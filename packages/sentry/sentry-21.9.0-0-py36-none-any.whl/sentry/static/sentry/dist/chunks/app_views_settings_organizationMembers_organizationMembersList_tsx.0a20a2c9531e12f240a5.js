"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationMembers_organizationMembersList_tsx"],{"./app/components/forms/multiSelectControl.tsx":(e,t,i)=>{i.d(t,{Z:()=>r});var s=i("../node_modules/react/index.js"),n=i("./app/components/forms/selectControl.tsx"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=(0,s.forwardRef)((function(e,t){return(0,o.tZ)(n.Z,{forwardedRef:t,...e,multiple:!0})}))},"./app/components/roleSelectControl.tsx":(e,t,i)=>{i.d(t,{Z:()=>c});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(i("../node_modules/core-js/modules/es.symbol.description.js"),i("../node_modules/react-select/dist/chunk-80640036.browser.esm.js")),o=i("./app/components/forms/selectControl.tsx"),r=i("./app/styles/space.tsx"),a=i("./app/utils/theme.tsx"),d=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l({roles:e,disableUnallowed:t,...i}){return(0,d.tZ)(o.Z,{options:null==e?void 0:e.map((e=>({value:e.id,label:e.name,disabled:t&&!e.allowed,description:e.desc}))),components:{Option:({label:e,data:t,...i})=>(0,d.tZ)(n.y.Option,{label:e,...i,children:(0,d.BX)(m,{children:[(0,d.tZ)("h1",{children:e}),(0,d.tZ)("div",{children:t.description})]})})},styles:{control:e=>({...e,borderBottomLeftRadius:a.ZP.borderRadius,borderBottomRightRadius:a.ZP.borderRadius}),menu:e=>({...e,borderRadius:a.ZP.borderRadius,marginTop:(0,r.Z)(.5),width:"350px",overflow:"hidden"})},...i})}l.displayName="RoleSelectControl";const m=(0,s.Z)("div",{target:"e1cjlayn0"})("display:grid;grid-template-columns:80px 1fr;grid-gap:",(0,r.Z)(1),";h1,div{font-size:",(e=>e.theme.fontSizeSmall),";line-height:1.4;margin:",(0,r.Z)(.25)," 0;}"),c=l},"./app/components/switchButton.tsx":(e,t,i)=>{i.d(t,{Z:()=>u});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("../node_modules/react/index.js"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const r=({forwardRef:e,size:t="sm",isActive:i,forceActiveColor:s,isLoading:n,isDisabled:r,toggle:a,id:d,name:l,className:m})=>(0,o.tZ)(c,{ref:e,id:d,name:l,type:"button",className:m,onClick:r?void 0:a,role:"checkbox","aria-checked":i,isLoading:n,isDisabled:r,isActive:i,size:t,"data-test-id":"switch",children:(0,o.tZ)(p,{isDisabled:r,isActive:i,forceActiveColor:s,size:t})});r.displayName="Switch";const a=e=>"sm"===e.size?16:24,d=e=>a(e)-("sm"===e.size?6:10),l=e=>"sm"===e.size?2:4,m=e=>e.isActive?l(e)+a(e):l(e),c=(0,s.Z)("button",{target:"ep74ita1"})("display:inline-block;background:none;padding:0;border:1px solid ",(e=>e.theme.border),";position:relative;box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.04);transition:0.15s border ease;cursor:",(e=>e.isLoading||e.isDisabled?"not-allowed":"pointer"),";pointer-events:",(e=>e.isLoading||e.isDisabled?"none":null),";height:",a,"px;width:",(e=>2*a(e)),"px;border-radius:",a,"px;&:hover,&:focus{outline:none;border-color:",(e=>e.theme.border),";}&:focus,&.focus-visible{outline:none;box-shadow:rgba(209, 202, 216, 0.5) 0 0 0 3px;}"),p=(0,s.Z)("span",{target:"ep74ita0"})("display:block;position:absolute;border-radius:50%;transition:0.25s all ease;top:",l,"px;transform:translateX(",m,"px);width:",d,"px;height:",d,"px;background:",(e=>e.isActive||e.forceActiveColor?e.theme.active:e.theme.border),";opacity:",(e=>e.isDisabled?.4:null),";"),u=n.forwardRef(((e,t)=>(0,o.tZ)(r,{...e,forwardRef:t})))},"./app/utils/isMemberDisabledFromLimit.tsx":(e,t,i)=>{function s(e){var t;return null!==(t=null==e?void 0:e.flags["member-limit:restricted"])&&void 0!==t&&t}i.d(t,{Z:()=>s})},"./app/utils/recreateRoute.tsx":(e,t,i)=>{i.d(t,{Z:()=>r});var s=i("../node_modules/lodash/findLastIndex.js"),n=i.n(s),o=i("./app/utils/replaceRouterParams.tsx");function r(e,t){var i,s;const{routes:r,params:a,location:d,stepBack:l}=t,m=r.map((({path:e})=>e||""));let c,p;"string"!=typeof e?(p=r.indexOf(e)+1,c=n()(m.slice(0,p),(e=>"/"===e[0]))):c=n()(m,(e=>"/"===e[0]));let u=m.slice(c,p);void 0!==l&&(u=u.slice(0,l));const h=null!==(i=null==d?void 0:d.search)&&void 0!==i?i:"",g=null!==(s=null==d?void 0:d.hash)&&void 0!==s?s:"",v="".concat(u.join("")).concat("string"!=typeof e?"":e).concat(h).concat(g);return(0,o.Z)(v,a)}},"./app/utils/routeTitle.tsx":(e,t,i)=>{i.d(t,{Z:()=>s});const s=function(e,t,i=!0,s){const n="".concat(e," - ").concat(t),o=s?"".concat(n," - ").concat(s):n;return i?"".concat(o," - Sentry"):o}},"./app/views/asyncView.tsx":(e,t,i)=>{i.d(t,{Z:()=>a}),i("../node_modules/react/index.js");var s=i("../node_modules/react-document-title/index.js"),n=i.n(s),o=i("./app/components/asyncComponent.tsx"),r=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends o.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,r.tZ)(n(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/components/defaultSearchBar.tsx":(e,t,i)=>{i.d(t,{_:()=>o});var s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=i("./app/styles/space.tsx");const o=(0,s.Z)("div",{target:"e1pq3sjx0"})("display:flex;grid-template-columns:1fr max-content;grid-gap:",(0,n.Z)(1.5),";margin-top:",(0,n.Z)(4),";margin-bottom:",(0,n.Z)(1.5),";position:relative;")},"./app/views/settings/organizationMembers/organizationMembersList.tsx":(e,t,i)=>{i.r(t),i.d(t,{default:()=>Se});var s=i("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/react/index.js")),a=i("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),d=i("./app/actionCreators/indicator.tsx"),l=i("./app/actionCreators/members.tsx"),m=i("./app/actionCreators/organizations.tsx"),c=i("./app/components/button.tsx"),p=i("./app/components/dropdownMenu.tsx"),u=i("./app/components/hookOrDefault.tsx"),h=i("./app/components/pagination.tsx"),g=i("./app/components/panels/index.tsx"),v=i("./app/constants/index.tsx"),b=i("./app/icons/index.tsx"),Z=i("./app/locale.tsx"),x=i("./app/stores/configStore.tsx"),f=i("./app/styles/space.tsx"),y=i("./app/utils/analytics/trackAdvancedAnalyticsEvent.tsx"),w=i("./app/utils/routeTitle.tsx"),z=i("./app/utils/theme.tsx"),R=i("./app/utils/withOrganization.tsx"),S=i("./app/utils/withTeams.tsx"),q=i("./app/views/asyncView.tsx"),k=i("./app/views/settings/components/defaultSearchBar.tsx"),N=i("./app/views/settings/components/emptyMessage.tsx"),_=i("./app/components/checkbox.tsx"),I=i("./app/components/switchButton.tsx"),C=i("./app/utils/tokenizeSearch.tsx"),B=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const L=e=>Array.isArray(e)&&e.length?e&&e.map((e=>e.toLowerCase())).includes("true"):null,j=({className:e,roles:t,query:i,onChange:s})=>{const n=new C.MY(i),o={roles:n.getFilterValues("role")||[],isInvited:L(n.getFilterValues("isInvited")),ssoLinked:L(n.getFilterValues("ssoLinked")),has2fa:L(n.getFilterValues("has2fa"))},r=e=>()=>{const t=new Set(n.getFilterValues("role")?[...n.getFilterValues("role")]:[]);t.has(e)?t.delete(e):t.add(e);const i=n.copy();i.setFilterValues("role",[...t]),s(i.formatString())},a=e=>t=>{const i=n.copy();i.removeFilter(e),null!==t&&i.setFilterValues(e,[Boolean(t).toString()]),s(i.formatString())};return(0,B.BX)(A,{className:e,children:[(0,B.tZ)(X,{children:(0,Z.t)("Filter By")}),(0,B.BX)(P,{children:[(0,B.BX)(D,{children:[(0,B.tZ)("h3",{children:(0,Z.t)("User Role")}),t.map((({id:e,name:t})=>(0,B.BX)("label",{children:[(0,B.tZ)(_.Z,{"data-test-id":"filter-role-".concat(e),checked:o.roles.includes(e),onChange:r(e)}),t]},e)))]}),(0,B.BX)(D,{children:[(0,B.tZ)("h3",{children:(0,Z.t)("Status")}),(0,B.tZ)(M,{"data-test-id":"filter-isInvited",onChange:a("isInvited"),value:o.isInvited,children:(0,Z.t)("Invited")}),(0,B.tZ)(M,{"data-test-id":"filter-has2fa",onChange:a("has2fa"),value:o.has2fa,children:(0,Z.t)("2FA")}),(0,B.tZ)(M,{"data-test-id":"filter-ssoLinked",onChange:a("ssoLinked"),value:o.ssoLinked,children:(0,Z.t)("SSO Linked")})]})]})]})};j.displayName="MembersFilter";const M=({onChange:e,value:t,children:i})=>(0,B.BX)("label",{children:[(0,B.tZ)(_.Z,{checked:null!==t,onChange:()=>e(null===t||null)}),i,(0,B.tZ)(I.Z,{isDisabled:null===t,isActive:!0===t,toggle:()=>e(!t)})]});M.displayName="BooleanFilter";const A=(0,o.Z)("div",{target:"e2fzkim3"})("border-radius:4px;background:",(e=>e.theme.background),";box-shadow:",(e=>e.theme.dropShadowLight),";border:1px solid ",(e=>e.theme.border),";"),X=(0,o.Z)("h2",{target:"e2fzkim2"})("border-top-left-radius:4px;border-top-right-radius:4px;border-bottom:1px solid ",(e=>e.theme.border),";background:",(e=>e.theme.backgroundSecondary),";color:",(e=>e.theme.subText),";text-transform:uppercase;font-size:",(e=>e.theme.fontSizeExtraSmall),";padding:",(0,f.Z)(1),";margin:0;"),P=(0,o.Z)("div",{target:"e2fzkim1"})("display:grid;grid-template-columns:100px max-content;grid-gap:",(0,f.Z)(3),";margin:",(0,f.Z)(1.5),";margin-top:",(0,f.Z)(.75),";"),D=(0,o.Z)("div",{target:"e2fzkim0"})("display:grid;grid-template-rows:repeat(auto-fit, minmax(0, max-content));grid-gap:",(0,f.Z)(1),";font-size:",(e=>e.theme.fontSizeMedium),";h3{color:#000;font-size:",(e=>e.theme.fontSizeSmall),";text-transform:uppercase;margin:",(0,f.Z)(1)," 0;}label{display:grid;grid-template-columns:max-content 1fr max-content;grid-gap:",(0,f.Z)(.75),";align-items:center;font-weight:normal;white-space:nowrap;height:",(0,f.Z)(2),";}input,label{margin:0;}"),F=j;var E=i("./app/components/confirm.tsx"),T=i("./app/components/forms/multiSelectControl.tsx"),V=i("./app/components/roleSelectControl.tsx"),O=i("./app/components/tag.tsx"),U=i("./app/components/tooltip.tsx");const Y=(0,u.Z)({hookName:"member-invite-modal:customization",defaultComponent:({onSendInvites:e,children:t})=>t({sendInvites:e,canSend:!0})}),J=({inviteRequest:e,inviteRequestBusy:t,organization:i,onApprove:s,onDeny:n,onUpdate:o,allTeams:a,allRoles:d})=>{const l=d.find((t=>t.id===e.role)),m=!(l&&l.allowed),{access:p}=i,u=p.includes("member:admin");return(0,B.tZ)(Y,{willInvite:!0,organization:i,onSendInvites:()=>s(e),children:({sendInvites:i,canSend:s,headerInfo:l})=>(0,B.BX)(G,{children:[(0,B.BX)("div",{children:[(0,B.tZ)("h5",{style:{marginBottom:(0,f.Z)(.5)},children:(0,B.tZ)(H,{children:e.email})}),"requested_to_be_invited"===e.inviteStatus?e.inviterName&&(0,B.tZ)(Q,{children:(0,B.tZ)(U.Z,{title:(0,Z.t)("An existing member has asked to invite this user to your organization"),children:(0,Z._N)("Requested by [inviterName]",{inviterName:e.inviterName})})}):(0,B.tZ)(K,{tooltipText:(0,Z.t)("This user has asked to join your organization."),children:(0,Z.t)("Join request")})]}),u?(0,B.tZ)(W,{name:"role",disableUnallowed:!0,onChange:e=>o({role:e.value}),value:e.role,roles:d}):(0,B.tZ)("div",{children:e.roleName}),u?(0,B.tZ)($,{name:"teams",placeholder:(0,Z.t)("Add to teamsâ€¦"),onChange:e=>o({teams:(e||[]).map((e=>e.value))}),value:e.teams,options:a.map((({slug:e})=>({value:e,label:"#".concat(e)}))),clearable:!0}):(0,B.tZ)("div",{children:e.teams.join(", ")}),(0,B.BX)(ee,{children:[(0,B.tZ)(c.ZP,{size:"small",busy:t[e.id],onClick:()=>n(e),icon:(0,B.tZ)(b.bM,{}),disabled:!u,title:u?void 0:(0,Z.t)("This request needs to be reviewed by a privileged user"),children:(0,Z.t)("Deny")}),(0,B.tZ)(E.Z,{onConfirm:i,disableConfirmButton:!s,disabled:!u||m,message:(0,B.BX)(r.Fragment,{children:[(0,Z._N)("Are you sure you want to invite [email] to your organization?",{email:e.email}),l]}),children:(0,B.tZ)(c.ZP,{priority:"primary",size:"small",busy:t[e.id],title:u?m?(0,Z.t)("You do not have permission to approve a user of this role.\n                      Select a different role to approve this user."):void 0:(0,Z.t)("This request needs to be reviewed by a privileged user"),icon:(0,B.tZ)(b.DL,{}),children:(0,Z.t)("Approve")})})]})]})})};J.displayName="InviteRequestRow";const K=(0,o.Z)(O.Z,{target:"e1ohn77a6"})({name:"50zrmy",styles:"text-transform:uppercase"}),G=(0,o.Z)(g.Lv,{target:"e1ohn77a5"})("display:grid;grid-template-columns:minmax(150px, auto) minmax(100px, 140px) 220px max-content;grid-gap:",(0,f.Z)(2),";align-items:center;"),H=(0,o.Z)("div",{target:"e1ohn77a4"})("font-size:",(e=>e.theme.fontSizeLarge),";overflow:hidden;text-overflow:ellipsis;"),Q=(0,o.Z)("div",{target:"e1ohn77a3"})("display:block;color:",(e=>e.theme.subText),";font-size:14px;overflow:hidden;text-overflow:ellipsis;"),W=(0,o.Z)(V.Z,{target:"e1ohn77a2"})({name:"pqgixs",styles:"max-width:140px"}),$=(0,o.Z)(T.Z,{target:"e1ohn77a1"})({name:"1qnipy5",styles:"max-width:220px;.Select-value-label{max-width:150px;word-break:break-all;}"}),ee=(0,o.Z)("div",{target:"e1ohn77a0"})("display:inline-grid;grid-template-columns:repeat(2, max-content);grid-gap:",(0,f.Z)(1),";"),te=J;var ie=i("./app/components/avatar/userAvatar.tsx"),se=i("./app/components/links/link.tsx"),ne=i("./app/components/loadingIndicator.tsx"),oe=i("./app/utils/isMemberDisabledFromLimit.tsx"),re=i("./app/utils/recreateRoute.tsx");const ae=(0,u.Z)({hookName:"component:disabled-member-tooltip",defaultComponent:({children:e})=>(0,B.tZ)(r.Fragment,{children:e})});class de extends r.PureComponent{constructor(...e){super(...e),(0,n.Z)(this,"state",{busy:!1}),(0,n.Z)(this,"handleRemove",(()=>{const{onRemove:e}=this.props;"function"==typeof e&&(this.setState({busy:!0}),e(this.props.member))})),(0,n.Z)(this,"handleLeave",(()=>{const{onLeave:e}=this.props;"function"==typeof e&&(this.setState({busy:!0}),e(this.props.member))})),(0,n.Z)(this,"handleSendInvite",(()=>{const{onSendInvite:e,member:t}=this.props;"function"==typeof e&&e(t)}))}renderMemberRole(){const{member:e}=this.props,{roleName:t,pending:i,expired:s}=e;return(0,oe.Z)(e)?(0,B.tZ)(ae,{children:(0,Z.t)("Deactivated")}):i?(0,B.BX)(ge,{children:[(0,B.tZ)(b.h,{size:"md"}),s?(0,Z.t)("Expired Invite"):(0,Z._N)("Invited [roleName]",{roleName:t})]}):t}render(){const{params:e,routes:t,member:i,orgName:s,status:n,requireLink:o,memberCanLeave:a,currentUser:d,canRemoveMembers:l,canAddMembers:m}=this.props,{id:p,flags:u,email:h,name:g,pending:v,user:x}=i,f=!u["sso:linked"]&&o,y=d.email===h,w=!y,z=y,R=l&&!y,S=x&&x.has2fa,q=(0,re.Z)(p,{routes:t,params:e}),k="success"===n,N="loading"===n,_=v||f;return(0,B.BX)(le,{"data-test-id":h,children:[(0,B.BX)(ce,{children:[(0,B.tZ)(ie.Z,{size:32,user:null!=x?x:{id:h,email:h}}),(0,B.BX)(pe,{to:q,children:[(0,B.tZ)("h5",{style:{margin:"0 0 3px"},children:(0,B.tZ)(ue,{children:g})}),(0,B.tZ)(he,{children:h})]})]}),(0,B.tZ)("div",{"data-test-id":"member-role",children:this.renderMemberRole()}),(0,B.tZ)("div",{"data-test-id":"member-status",children:_?(0,B.BX)(r.Fragment,{children:[N&&(0,B.tZ)(ve,{children:(0,B.tZ)(ne.Z,{mini:!0})}),k&&(0,B.tZ)("span",{children:(0,Z.t)("Sent!")}),!N&&!k&&(0,B.tZ)(c.ZP,{disabled:!m,priority:"primary",size:"small",onClick:this.handleSendInvite,children:v?(0,Z.t)("Resend invite"):(0,Z.t)("Resend SSO link")})]}):(0,B.BX)(be,{children:[S?(0,B.tZ)(b.DL,{isCircled:!0,color:"success"}):(0,B.tZ)(b.Gy,{color:"error"}),S?(0,Z.t)("2FA Enabled"):(0,Z.t)("2FA Not Enabled")]})}),w||z?(0,B.BX)("div",{children:[w&&R&&(0,B.tZ)(E.Z,{message:(0,Z._N)("Are you sure you want to remove [name] from [orgName]?",{name:g,orgName:s}),onConfirm:this.handleRemove,children:(0,B.tZ)(c.ZP,{"data-test-id":"remove",icon:(0,B.tZ)(b.JZ,{isCircled:!0,size:"xs"}),size:"small",busy:this.state.busy,children:(0,Z.t)("Remove")})}),w&&!R&&(0,B.tZ)(c.ZP,{disabled:!0,size:"small",title:(0,Z.t)("You do not have access to remove members"),icon:(0,B.tZ)(b.JZ,{isCircled:!0,size:"xs"}),children:(0,Z.t)("Remove")}),z&&a&&(0,B.tZ)(E.Z,{message:(0,Z._N)("Are you sure you want to leave [orgName]?",{orgName:s}),onConfirm:this.handleLeave,children:(0,B.tZ)(c.ZP,{priority:"danger",size:"small",icon:(0,B.tZ)(b.bM,{size:"xs"}),children:(0,Z.t)("Leave")})}),z&&!a&&(0,B.tZ)(c.ZP,{size:"small",icon:(0,B.tZ)(b.bM,{size:"xs"}),disabled:!0,title:(0,Z.t)("You cannot leave this organization as you are the only organization owner."),children:(0,Z.t)("Leave")})]}):null]})}}de.displayName="OrganizationMemberRow";const le=(0,o.Z)(g.Lv,{target:"eq39mcy8"})("display:grid;grid-template-columns:minmax(150px, 2fr) minmax(90px, 1fr) minmax(120px, 1fr) 90px;grid-gap:",(0,f.Z)(2),";align-items:center;"),me=(0,o.Z)("div",{target:"eq39mcy7"})("display:inline-grid;grid-template-columns:max-content auto;grid-gap:",(0,f.Z)(1),";align-items:center;"),ce=(0,o.Z)(me,{target:"eq39mcy6"})(""),pe=(0,o.Z)(se.Z,{target:"eq39mcy5"})({name:"d3v9zr",styles:"overflow:hidden"}),ue=(0,o.Z)("div",{target:"eq39mcy4"})("display:block;font-size:",(e=>e.theme.fontSizeLarge),";overflow:hidden;text-overflow:ellipsis;"),he=(0,o.Z)("div",{target:"eq39mcy3"})("color:",(e=>e.theme.textColor),";font-size:",(e=>e.theme.fontSizeMedium),";overflow:hidden;text-overflow:ellipsis;"),ge=(0,o.Z)(me,{target:"eq39mcy2"})(""),ve=(0,o.Z)("div",{target:"eq39mcy1"})("margin-top:0;margin-bottom:",(0,f.Z)(1.5),";"),be=(0,o.Z)(me,{target:"eq39mcy0"})("");var Ze;const xe=(0,u.Z)({hookName:"component:member-list-header",defaultComponent:()=>(0,B.tZ)(g.V9,{children:(0,Z.t)("Active Members")})});class fe extends q.Z{constructor(...e){super(...e),(0,n.Z)(this,"removeMember",(async e=>{const{orgId:t}=this.props.params;await this.api.requestPromise("/organizations/".concat(t,"/members/").concat(e,"/"),{method:"DELETE",data:{}}),this.setState((t=>({members:t.members.filter((({id:t})=>t!==e))})))})),(0,n.Z)(this,"handleRemove",(async({id:e,name:t})=>{const{organization:i}=this.props,{slug:s}=i;try{await this.removeMember(e)}catch{return void(0,d.Iw)((0,Z._N)("Error removing [name] from [orgName]",{name:t,orgName:s}))}(0,d.S9)((0,Z._N)("Removed [name] from [orgName]",{name:t,orgName:s}))})),(0,n.Z)(this,"handleLeave",(async({id:e})=>{const{organization:t}=this.props,{slug:i}=t;try{await this.removeMember(e)}catch{return void(0,d.Iw)((0,Z._N)("Error leaving [orgName]",{orgName:i}))}(0,m.mx)({orgId:i,removeOrg:!0}),(0,d.S9)((0,Z._N)("You left [orgName]",{orgName:i}))})),(0,n.Z)(this,"handleSendInvite",(async({id:e,expired:t})=>{this.setState((t=>({invited:{...t.invited,[e]:"loading"}})));try{await(0,l.R_)(this.api,{orgId:this.props.params.orgId,memberId:e,regenerate:t})}catch{return this.setState((t=>({invited:{...t.invited,[e]:null}}))),void(0,d.Iw)((0,Z.t)("Error sending invite"))}this.setState((t=>({invited:{...t.invited,[e]:"success"}})))})),(0,n.Z)(this,"updateInviteRequest",((e,t)=>this.setState((i=>{const s=[...i.inviteRequests],n=s.findIndex((t=>t.id===e));return s[n]={...s[n],...t},{inviteRequests:s}})))),(0,n.Z)(this,"removeInviteRequest",(e=>this.setState((t=>({inviteRequests:t.inviteRequests.filter((t=>t.id!==e))}))))),(0,n.Z)(this,"handleInviteRequestAction",(async({inviteRequest:e,method:t,data:i,successMessage:s,errorMessage:n,eventKey:o})=>{const{params:r,organization:a}=this.props;this.setState((t=>({inviteRequestBusy:{...t.inviteRequestBusy,[e.id]:!0}})));try{await this.api.requestPromise("/organizations/".concat(r.orgId,"/invite-requests/").concat(e.id,"/"),{method:t,data:i}),this.removeInviteRequest(e.id),(0,d.S9)(s),(0,y.Z)(o,{member_id:parseInt(e.id,10),invite_status:e.inviteStatus,organization:a})}catch{(0,d.Iw)(n)}this.setState((t=>({inviteRequestBusy:{...t.inviteRequestBusy,[e.id]:!1}})))})),(0,n.Z)(this,"handleInviteRequestApprove",(e=>{this.handleInviteRequestAction({inviteRequest:e,method:"PUT",data:{role:e.role,teams:e.teams,approve:1},successMessage:(0,Z._N)("[email] has been invited",{email:e.email}),errorMessage:(0,Z._N)("Error inviting [email]",{email:e.email}),eventKey:"invite_request.approved"})})),(0,n.Z)(this,"handleInviteRequestDeny",(e=>{this.handleInviteRequestAction({inviteRequest:e,method:"DELETE",data:{},successMessage:(0,Z._N)("Invite request for [email] denied",{email:e.email}),errorMessage:(0,Z._N)("Error denying invite request for [email]",{email:e.email}),eventKey:"invite_request.denied"})}))}getDefaultState(){return{...super.getDefaultState(),members:[],invited:{}}}getEndpoints(){const{orgId:e}=this.props.params;return[["members","/organizations/".concat(e,"/members/"),{},{paginate:!0}],["member","/organizations/".concat(e,"/members/me/"),{},{allowError:e=>404===e.status}],["authProvider","/organizations/".concat(e,"/auth-provider/"),{},{allowError:e=>403===e.status}],["inviteRequests","/organizations/".concat(e,"/invite-requests/")]]}getTitle(){const e=this.props.organization.slug;return(0,w.Z)((0,Z.t)("Members"),e,!1)}renderBody(){const{params:e,organization:t,routes:i,teams:n}=this.props,{membersPageLinks:o,members:d,member:l,inviteRequests:m}=this.state,{name:u,access:f}=t,y=f.includes("member:write"),w=f.includes("member:admin"),R=x.Z.get("user"),S=!d.find((({role:e,email:t,pending:i})=>"owner"===e&&t!==R.email&&!i)),q=!!this.state.authProvider&&this.state.authProvider.require_link,k=({defaultSearchBar:e,value:t,handleChange:i})=>(0,B.BX)(ye,{children:[(0,B.tZ)(p.Z,{closeOnEscape:!0,children:({getActorProps:e,isOpen:s})=>{var n;return(0,B.BX)(we,{children:[(0,B.tZ)(c.ZP,{icon:(0,B.tZ)(b.OP,{size:"xs"}),...e({}),children:(0,Z.t)("Filter")}),s&&(0,B.tZ)(ze,{roles:null!==(n=null==l?void 0:l.roles)&&void 0!==n?n:v.v6,query:t,onChange:e=>i(e)})]})}}),e]});return(0,B.BX)(r.Fragment,{children:[(0,B.tZ)(a.ms,{children:({css:e})=>this.renderSearchInput({updateRoute:!0,placeholder:(0,Z.t)("Search Members"),children:k,className:e(Ze||(Ze=(0,s.Z)(["\n                font-size: ",";\n              "])),z.ZP.fontSizeMedium)})}),m&&m.length>0&&(0,B.BX)(g.s_,{children:[(0,B.tZ)(g.V9,{children:(0,B.BX)(Re,{children:[(0,B.tZ)("div",{children:(0,Z.t)("Pending Members")}),(0,B.tZ)("div",{children:(0,Z.t)("Role")}),(0,B.tZ)("div",{children:(0,Z.t)("Teams")})]})}),(0,B.tZ)(g.N,{children:m.map((e=>{var i;return(0,B.tZ)(te,{organization:t,inviteRequest:e,inviteRequestBusy:{},allTeams:n,allRoles:null!==(i=null==l?void 0:l.roles)&&void 0!==i?i:v.v6,onApprove:this.handleInviteRequestApprove,onDeny:this.handleInviteRequestDeny,onUpdate:t=>this.updateInviteRequest(e.id,t)},e.id)}))})]}),(0,B.BX)(g.s_,{"data-test-id":"org-member-list",children:[(0,B.tZ)(xe,{members:d,organization:t}),(0,B.BX)(g.N,{children:[d.map((t=>(0,B.tZ)(de,{routes:i,params:e,member:t,status:this.state.invited[t.id],orgName:u,memberCanLeave:!S,currentUser:R,canRemoveMembers:w,canAddMembers:y,requireLink:q,onSendInvite:this.handleSendInvite,onRemove:this.handleRemove,onLeave:this.handleLeave},t.id))),0===d.length&&(0,B.tZ)(N.Z,{children:(0,Z.t)("No members found.")})]})]}),(0,B.tZ)(h.Z,{pageLinks:o})]})}}const ye=(0,o.Z)(k._,{target:"e1vx0h113"})({name:"15dvb6g",styles:"display:grid;grid-template-columns:max-content 1fr;margin-top:0"}),we=(0,o.Z)("div",{target:"e1vx0h112"})({name:"bjn8wh",styles:"position:relative"}),ze=(0,o.Z)(F,{target:"e1vx0h111"})("position:absolute;right:0;top:42px;z-index:",(e=>e.theme.zIndex.dropdown),";&:before,&:after{position:absolute;top:-16px;right:32px;content:'';height:16px;width:16px;border:8px solid transparent;border-bottom-color:",(e=>e.theme.backgroundSecondary),";}&:before{margin-top:-1px;border-bottom-color:",(e=>e.theme.border),";}"),Re=(0,o.Z)("div",{target:"e1vx0h110"})("display:grid;grid-template-columns:minmax(150px, auto) minmax(100px, 140px) 420px;grid-gap:",(0,f.Z)(2),";align-items:center;width:100%;"),Se=(0,S.Z)((0,R.Z)(fe))}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationMembers_organizationMembersList_tsx.97f84cf90f5665062f63da8af2c49a1f.js.map