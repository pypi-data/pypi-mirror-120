"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_dashboardsV2_view_tsx","app_components_sentryDocumentTitle_tsx"],{"./app/components/sentryDocumentTitle.tsx":(e,s,a)=>{a.d(s,{Z:()=>d}),a("../node_modules/react/index.js");var o=a("../node_modules/react-document-title/index.js"),t=a.n(o),r=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n({title:e,orgSlug:s,projectSlug:a,children:o}){const n=s||a?s&&a?"".concat(e," - ").concat(s," - ").concat(a):s?"".concat(e," - ").concat(s):"".concat(e," - ").concat(a):e;return(0,r.tZ)(t(),{title:"".concat(n," - Sentry"),children:o})}n.displayName="SentryDocumentTitle";const d=n},"./app/views/dashboardsV2/orgDashboards.tsx":(e,s,a)=>{a.d(s,{Z:()=>m});var o=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),t=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.string.replace.js"),a("../node_modules/react/index.js"),a("../node_modules/react-router/es/index.js")),r=a("../node_modules/lodash/isEqual.js"),n=a.n(r),d=a("./app/components/asyncComponent.tsx"),i=a("./app/components/errors/notFound.tsx"),c=a("./app/components/sentryDocumentTitle.tsx"),p=a("./app/locale.tsx"),l=a("./app/utils/analytics.tsx"),u=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class h extends d.Z{constructor(...e){super(...e),(0,o.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{},dashboards:[],selectedDashboard:null})}componentDidUpdate(e){n()(e.params.dashboardId,this.props.params.dashboardId)||this.remountComponent()}getEndpoints(){const{organization:e,params:s}=this.props,a="/organizations/".concat(e.slug,"/dashboards/"),o=[["dashboards",a]];return s.dashboardId&&(o.push(["selectedDashboard","".concat(a).concat(s.dashboardId,"/")]),(0,l.ec)({eventKey:"dashboards2.view",eventName:"Dashboards2: View dashboard",organization_id:parseInt(this.props.organization.id,10),dashboard_id:parseInt(s.dashboardId,10)})),o}getDashboards(){const{dashboards:e}=this.state;return Array.isArray(e)?e:[]}onRequestSuccess({stateKey:e,data:s}){const{params:a,organization:o,location:r}=this.props;if(a.dashboardId||"selectedDashboard"===e)return;const n=s.length?s[0].id:"default-overview",d="/organizations/".concat(o.slug,"/dashboard/").concat(n,"/");t.browserHistory.replace({pathname:d,query:{...r.query}})}renderBody(){const{children:e}=this.props,{selectedDashboard:s,error:a}=this.state;return e({error:a,dashboard:s,dashboards:this.getDashboards(),reloadData:this.reloadData.bind(this)})}renderError(e){return Object.values(this.state.errors).find((e=>e&&404===e.status))?(0,u.tZ)(i.Z,{}):super.renderError(e,!0,!0)}renderComponent(){const{organization:e,location:s}=this.props;return e.features.includes("dashboards-basic")?(0,u.tZ)(c.Z,{title:(0,p.t)("Dashboards"),orgSlug:e.slug,children:super.renderComponent()}):(t.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboards/"),query:{...s.query}}),null)}}const m=h},"./app/views/dashboardsV2/view.tsx":(e,s,a)=>{a.r(s),a.d(s,{default:()=>j,DashboardBasicFeature:()=>Z}),a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.string.replace.js");var o=a("../node_modules/react/index.js"),t=a("../node_modules/react-router/es/index.js"),r=a("./app/actionCreators/dashboards.tsx"),n=a("./app/components/acl/feature.tsx"),d=a("./app/components/alert.tsx"),i=a("./app/components/errors/notFound.tsx"),c=a("./app/components/loadingIndicator.tsx"),p=a("./app/locale.tsx"),l=a("./app/styles/organization.tsx"),u=a("./app/utils/withApi.tsx"),h=a("./app/utils/withOrganization.tsx"),m=a("./app/views/dashboardsV2/detail.tsx"),b=a("./app/views/dashboardsV2/orgDashboards.tsx"),g=a("./app/views/dashboardsV2/types.tsx"),x=a("./app/views/dashboardsV2/utils.tsx"),w=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function y(e){const{api:s,organization:a,params:n,location:d}=e,p=n.dashboardId,l=a.slug,[u,h]=(0,o.useState)();return(0,o.useEffect)((()=>{p&&"default-overview"!==p&&(0,r.a_)(s,l,p);const e=(0,x.y1)(d.query);h(e),e&&t.browserHistory.replace(d.pathname)}),[s,l,p]),(0,w.tZ)(Z,{organization:a,children:(0,w.tZ)(b.Z,{api:s,location:d,params:n,organization:a,children:({dashboard:s,dashboards:a,error:o,reloadData:t})=>o?(0,w.tZ)(i.Z,{}):s?(0,w.tZ)(m.Z,{...e,initialState:u?g.n.EDIT:g.n.VIEW,dashboard:s,dashboards:a,reloadData:(...e)=>(u&&h(void 0),t(...e)),newWidget:u}):(0,w.tZ)(c.Z,{})})})}y.displayName="ViewEditDashboard";const j=(0,u.Z)((0,h.Z)(y)),Z=({organization:e,children:s})=>(0,w.tZ)(n.Z,{hookName:"feature-disabled:dashboards-page",features:["organizations:dashboards-basic"],organization:e,renderDisabled:()=>(0,w.tZ)(l.JH,{children:(0,w.tZ)(d.Z,{type:"warning",children:(0,p.t)("You don't have access to this feature")})}),children:s});Z.displayName="DashboardBasicFeature"}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_view_tsx.ec1c51e0c8a2d5574d1b6362ecf7077b.js.map