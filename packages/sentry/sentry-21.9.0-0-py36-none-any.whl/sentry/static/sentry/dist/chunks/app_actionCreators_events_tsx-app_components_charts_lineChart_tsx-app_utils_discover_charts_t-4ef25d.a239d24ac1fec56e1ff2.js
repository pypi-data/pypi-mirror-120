"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_actionCreators_events_tsx-app_components_charts_lineChart_tsx-app_utils_discover_charts_t-4ef25d"],{"./app/actionCreators/events.tsx":(t,e,a)=>{a.d(e,{lI:()=>r,eV:()=>l,JE:()=>c}),a("../node_modules/core-js/modules/es.object.from-entries.js"),a("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=a("../node_modules/lodash/pick.js"),i=a.n(s),o=a("./app/components/charts/utils.tsx"),n=a("./app/utils/getPeriod.tsx"),d=a("./app/utils/performance/constants.tsx");const r=(t,{organization:e,project:a,environment:s,team:i,period:d,start:r,end:l,interval:c,includePrevious:h,query:p,yAxis:u,field:g,topEvents:m,orderby:b,partial:f,withoutZerofill:D})=>{const w=(0,o.Sw)(h,d),x=Object.fromEntries(Object.entries({interval:c,project:a,environment:s,team:i,query:p,yAxis:u,field:g,topEvents:m,orderby:b,partial:f?"1":void 0,withoutZerofill:D?"1":void 0}).filter((([,t])=>void 0!==t))),v=(0,n.X)({period:d,start:r,end:l},{shouldDoublePeriod:w});return t.requestPromise("/organizations/".concat(e.slug,"/events-stats/"),{query:{...x,...v}})};async function l(t,e,a){const s={...i()(a,Object.values(d.s)),query:a.query};return t.requestPromise("/organizations/".concat(e,"/events-facets/"),{query:s})}async function c(t,e,a){const s={...i()(a,Object.values(d.s)),query:a.query};return t.requestPromise("/organizations/".concat(e,"/events-meta/"),{query:s}).then((t=>t.count))}},"./app/components/charts/lineChart.tsx":(t,e,a)=>{a.d(e,{Z:()=>d});var s=a("../node_modules/react/index.js"),i=a("./app/components/charts/series/lineSeries.tsx"),o=a("./app/components/charts/baseChart.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends s.Component{render(){const{series:t,seriesOptions:e,...a}=this.props;return(0,n.tZ)(o.Z,{...a,series:t.map((({seriesName:t,data:a,dataArray:s,...o})=>(0,i.Z)({...e,...o,name:t,data:s||a.map((({value:t,name:e})=>[e,t])),animation:!1,animationThreshold:1,animationDuration:0})))})}}d.displayName="LineChart"},"./app/utils/discover/charts.tsx":(t,e,a)=>{a.d(e,{CX:()=>n,gu:()=>d,b4:()=>r});var s=a("./app/locale.tsx"),i=a("./app/utils/discover/fields.tsx"),o=a("./app/utils/formatters.tsx");function n(t,e=""){switch((0,i.Px)(e)){case"integer":case"number":return t.toLocaleString();case"percentage":return(0,o.rl)(t,2);case"duration":return(0,o.g9)(t/1e3,2,!0);default:return t.toString()}}function d(t,e,a=!1){switch((0,i.Px)(e)){case"integer":case"number":return a?(0,o.Du)(t):t.toLocaleString();case"percentage":return(0,o.rl)(t,0);case"duration":return r(t);default:return t.toString()}}function r(t){if(0===t)return"0";if(t>=o.ps){const e=(t/o.ps).toFixed(0);return(0,s.t)("%swk",e)}if(t>=o.x4){const e=(t/o.x4).toFixed(0);return(0,s.t)("%sd",e)}if(t>=o.kr){const e=(t/o.kr).toFixed(0);return(0,s.t)("%shr",e)}if(t>=o.EB){const e=(t/o.EB).toFixed(0);return(0,s.t)("%smin",e)}if(t>=o.sh){const e=(t/o.sh).toFixed(0);return(0,s.t)("%ss",e)}const e=t.toFixed(0);return(0,s.t)("%sms",e)}},"./app/utils/getPeriod.tsx":(t,e,a)=>{a.d(e,{X:()=>d}),a("../node_modules/core-js/modules/web.dom-collections.iterator.js");var s=a("../node_modules/moment/moment.js"),i=a.n(s),o=a("./app/constants/index.tsx"),n=a("./app/utils/dates.tsx");const d=({period:t,start:e,end:a},{shouldDoublePeriod:s}={})=>{if(t||e||a||(t=o.GY),t){if(!s)return{statsPeriod:t};const[,e,a]=t.match(/([0-9]+)([mhdw])/);return{statsPeriod:"".concat(2*parseInt(e,10)).concat(a)}}if(!e||!a)throw new Error("start and end required");const d=(0,n.v5)(e),r=(0,n.v5)(a);if(s){const t=i()(a).diff(i()(e)),s=i()(e).subtract(t);return{start:(0,n.v5)(s),end:r}}return{start:d,end:r}}},"./app/views/dashboardsV2/data.tsx":(t,e,a)=>{a.d(e,{R7:()=>i,L3:()=>o,GY:()=>n});var s=a("./app/locale.tsx");const i={id:"",dateCreated:"",createdBy:void 0,title:(0,s.t)("Untitled dashboard"),widgets:[]},o=[{label:(0,s.t)("Area Chart"),value:"area"},{label:(0,s.t)("Bar Chart"),value:"bar"},{label:(0,s.t)("Line Chart"),value:"line"},{label:(0,s.t)("Table"),value:"table"},{label:(0,s.t)("World Map"),value:"world_map"},{label:(0,s.t)("Big Number"),value:"big_number"}],n=((0,s.t)("1 Minute"),(0,s.t)("5 Minutes"),(0,s.t)("15 Minutes"),(0,s.t)("30 Minutes"),(0,s.t)("1 Hour"),(0,s.t)("1 Day"),"24h")},"./app/views/dashboardsV2/detail.tsx":(t,e,a)=>{a.d(e,{Z:()=>ut});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/core-js/modules/es.string.replace.js"),a("../node_modules/react/index.js")),n=a("../node_modules/react-router/es/index.js"),d=a("../node_modules/lodash/isEqual.js"),r=a.n(d),l=a("./app/actionCreators/dashboards.tsx"),c=a("./app/actionCreators/indicator.tsx"),h=a("./app/components/breadcrumbs.tsx"),p=a("./app/components/hookOrDefault.tsx"),u=a("./app/components/layouts/thirds.tsx"),g=a("./app/components/lightWeightNoProjectMessage.tsx"),m=a("./app/components/organizations/globalSelectionHeader/index.tsx"),b=a("./app/locale.tsx"),f=a("./app/styles/organization.tsx"),D=a("./app/styles/space.tsx"),w=a("./app/utils/analytics.tsx"),x=a("./app/utils/withApi.tsx"),v=a("./app/utils/withOrganization.tsx"),y=a("./app/components/acl/feature.tsx"),E=a("./app/components/acl/featureDisabled.tsx"),Z=a("./app/components/button.tsx"),S=a("./app/components/buttonBar.tsx"),z=a("./app/components/confirm.tsx"),C=a("./app/components/hovercard.tsx"),W=a("./app/icons/index.tsx"),I=a("./app/views/dashboardsV2/types.tsx"),T=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class _ extends o.Component{render(){const{dashboardState:t,dashboards:e,onEdit:a,onCancel:s,onCommit:i,onDelete:o}=this.props,n=(0,T.tZ)(Z.ZP,{"data-test-id":"dashboard-cancel",onClick:t=>{t.preventDefault(),s()},children:(0,b.t)("Cancel")});return[I.n.EDIT,I.n.PENDING_DELETE].includes(t)?(0,T.BX)(k,{gap:1,children:[n,(0,T.tZ)(z.Z,{priority:"danger",message:(0,b.t)("Are you sure you want to delete this dashboard?"),onConfirm:o,disabled:e.length<=1,children:(0,T.tZ)(Z.ZP,{"data-test-id":"dashboard-delete",priority:"danger",children:(0,b.t)("Delete")})}),(0,T.tZ)(Z.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),i()},priority:"primary",children:(0,b.t)("Save and Finish")})]},"edit-controls"):"create"===t?(0,T.BX)(k,{gap:1,children:[n,(0,T.tZ)(Z.ZP,{"data-test-id":"dashboard-commit",onClick:t=>{t.preventDefault(),i()},priority:"primary",children:(0,b.t)("Save and Finish")})]},"create-controls"):(0,T.tZ)(k,{gap:1,children:(0,T.tZ)(B,{children:t=>(0,T.tZ)(Z.ZP,{"data-test-id":"dashboard-edit",onClick:t=>{t.preventDefault(),a()},priority:"primary",icon:(0,T.tZ)(W.yl,{size:"xs"}),disabled:!t,children:(0,b.t)("Edit Dashboard")})})},"controls")}}_.displayName="Controls";const B=({children:t})=>{const e=(0,b.t)("Requires dashboard editing.");return(0,T.tZ)(y.Z,{hookName:"feature-disabled:dashboards-edit",features:["organizations:dashboards-edit"],renderDisabled:t=>(0,T.tZ)(C.ZP,{body:(0,T.tZ)(E.Z,{features:t.features,hideHelpToggle:!0,message:e,featureName:e}),children:t.children(t)}),children:({hasFeature:e})=>t(e)})};B.displayName="DashboardEditFeature";const k=(0,i.Z)(S.ZP,{target:"e78awt50"})("@media (max-width: ",(t=>t.theme.breakpoints[0]),"){grid-auto-flow:row;grid-row-gap:",(0,D.Z)(1),";width:100%;}"),q=_;var N=a("../node_modules/@dnd-kit/core/dist/core.esm.js"),U=a("../node_modules/@dnd-kit/sortable/dist/sortable.esm.js"),j=a("./app/actionCreators/modal.tsx"),P=a("./app/actionCreators/tags.tsx"),R=a("./app/utils/withGlobalSelection.tsx"),A=a("./app/views/dashboardsV2/widget/utils.tsx"),V=a("../node_modules/framer-motion/dist/es/render/dom/motion.js");const X=(0,i.Z)(V.E.div,{target:"ec3gecx0"})("position:relative;touch-action:manipulation;",(t=>{switch(t.displayType){case"big_number":return"\n          /* 2 cols */\n          grid-area: span 1 / span 2;\n\n          @media (min-width: ".concat(t.theme.breakpoints[0],") {\n            /* 4 cols */\n            grid-area: span 1 / span 1;\n          }\n\n          @media (min-width: ").concat(t.theme.breakpoints[3],") {\n            /* 6 and 8 cols */\n            grid-area: span 1 / span 2;\n          }\n        ");default:return"\n          /* 2, 4, 6 and 8 cols */\n          grid-area: span 2 / span 2;\n        "}}),";"),L="add-widget-button",M={x:0,y:0,scaleX:1,scaleY:1};function Y({onAddWidget:t,onOpenWidgetBuilder:e,orgFeatures:a}){const s=a.includes("metrics")?e:t,{setNodeRef:i,transform:o}=(0,U.nB)({disabled:!0,id:L,transition:null});return(0,T.tZ)(X,{ref:i,displayType:I.F.BIG_NUMBER,layoutId:L,style:{originX:0,originY:0},animate:o?{x:o.x,y:o.y,scaleX:null!=o&&o.scaleX&&o.scaleX<=1?o.scaleX:1,scaleY:null!=o&&o.scaleY&&o.scaleY<=1?o.scaleY:1}:M,transition:{duration:.25},children:(0,T.tZ)(G,{onClick:s,children:(0,T.tZ)(O,{"data-test-id":"widget-add",onClick:s,icon:(0,T.tZ)(W.N_,{size:"lg",isCircled:!0,color:"inactive"})})})},"add")}Y.displayName="AddWidget";const F=Y,O=(0,i.Z)(Z.ZP,{target:"e1sxcph31"})({name:"6ayxgl",styles:"border:none;&,&:focus,&:active,&:hover{background:transparent;box-shadow:none;}"}),G=(0,i.Z)("div",{target:"e1sxcph30"})("width:100%;height:110px;border:2px dashed ",(t=>t.theme.border),";border-radius:",(t=>t.theme.borderRadius),";display:flex;align-items:center;justify-content:center;cursor:",(t=>t.onClick?"pointer":""),";");var H=a("./app/utils/theme.tsx"),K=a("./app/views/dashboardsV2/widgetCard.tsx");const J={zIndex:"auto"};function Q(t){const{widget:e,dragId:a,isEditing:s,onDelete:i,onEdit:n}=t,{attributes:d,listeners:r,setNodeRef:l,transform:c,isDragging:h,isSorting:p}=(0,U.nB)({id:a,transition:null});return(0,o.useEffect)((()=>{if(h)return document.body.style.cursor="grabbing",function(){document.body.style.cursor=""}}),[h]),(0,T.tZ)(X,{ref:l,displayType:e.displayType,layoutId:a,style:{originX:h?1:0,originY:0,boxShadow:h?H.ZP.dropShadowHeavy:"none",borderRadius:h?H.ZP.borderRadius:void 0},animate:c?{x:c.x,y:c.y,scaleX:null!=c&&c.scaleX&&c.scaleX<=1?c.scaleX:1,scaleY:null!=c&&c.scaleY&&c.scaleY<=1?c.scaleY:1,zIndex:h?H.ZP.zIndex.modal:"auto"}:J,transformTemplate:(t,e)=>s&&c?e:"none",transition:{duration:h?0:.25,easings:{type:"spring"}},children:(0,T.tZ)(K.Z,{widget:e,isEditing:s,onDelete:i,onEdit:n,isSorting:p,hideToolbar:p,currentWidgetDragging:h,draggableProps:{attributes:d,listeners:r},showContextMenu:!0})})}Q.displayName="SortableWidget";const $=Q;class tt extends o.Component{constructor(...t){super(...t),(0,s.Z)(this,"handleStartAdd",(()=>{const{organization:t,dashboard:e,selection:a}=this.props;(0,j.openAddDashboardWidgetModal)({organization:t,dashboard:e,selection:a,onAddWidget:this.handleAddComplete})})),(0,s.Z)(this,"handleOpenWidgetBuilder",(()=>{const{router:t,paramDashboardId:e,organization:a,location:s}=this.props;e?t.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(e,"/widget/new/"),query:{...s.query,dataSet:A.qg.EVENTS}}):t.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/widget/new/"),query:{...s.query,dataSet:A.qg.EVENTS}})})),(0,s.Z)(this,"handleAddComplete",(t=>{this.props.onUpdate([...this.props.dashboard.widgets,t])})),(0,s.Z)(this,"handleUpdateComplete",(t=>e=>{const a=[...this.props.dashboard.widgets];a[t]=e,this.props.onUpdate(a)})),(0,s.Z)(this,"handleDeleteWidget",(t=>()=>{const e=[...this.props.dashboard.widgets];e.splice(t,1),this.props.onUpdate(e)})),(0,s.Z)(this,"handleEditWidget",((t,e)=>()=>{const{organization:a,dashboard:s,selection:i,router:o,location:n,paramDashboardId:d,onSetWidgetToBeUpdated:r}=this.props;if(a.features.includes("metrics")){if(r(t),d)return void o.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(d,"/widget/").concat(e,"/edit/"),query:{...n.query,dataSet:A.qg.EVENTS}});o.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/widget/").concat(e,"/edit/"),query:{...n.query,dataSet:A.qg.EVENTS}})}(0,j.openAddDashboardWidgetModal)({organization:a,dashboard:s,widget:t,selection:i,onAddWidget:this.handleAddComplete,onUpdateWidget:this.handleUpdateComplete(e)})}))}async componentDidMount(){const{api:t,organization:e,isEditing:a,newWidget:s}=this.props;if(a&&this.fetchTags(),s)try{await(0,l.QL)(t,e.slug,s),this.handleAddComplete(s)}catch(t){(0,c.Iw)(t)}}componentDidUpdate(t){const{isEditing:e}=this.props;t.isEditing!==e&&e&&this.fetchTags()}fetchTags(){const{api:t,organization:e,selection:a}=this.props;(0,P.QK)(t,e.slug,a)}getWidgetIds(){return[...this.props.dashboard.widgets.map(((t,e)=>st(t,e))),L]}renderWidget(t,e){const{isEditing:a}=this.props,s=st(t,e),i=s;return(0,T.tZ)($,{widget:t,dragId:i,isEditing:a,onDelete:this.handleDeleteWidget(e),onEdit:this.handleEditWidget(t,e)},s)}render(){const{isEditing:t,onUpdate:e,dashboard:{widgets:a},organization:s}=this.props,i=this.getWidgetIds();return(0,T.tZ)(N.LB,{collisionDetection:N.pE,onDragEnd:({over:t,active:s})=>{const o=s.id,n=i.indexOf.bind(i),d=o?n(o):-1;if(t&&t.id!==L){const s=n(t.id);d!==s&&e((0,U.Rp)(a,d,s))}},children:(0,T.tZ)(at,{children:(0,T.BX)(U.Fo,{items:i,strategy:U.U2,children:[a.map(((t,e)=>this.renderWidget(t,e))),t&&(0,T.tZ)(F,{orgFeatures:s.features,onAddWidget:this.handleStartAdd,onOpenWidgetBuilder:this.handleOpenWidgetBuilder})]})})})}}tt.displayName="Dashboard";const et=(0,x.Z)((0,R.Z)(tt)),at=(0,i.Z)("div",{target:"e1wa3gzn0"})("display:grid;grid-template-columns:repeat(2, minmax(0, 1fr));grid-auto-flow:row dense;grid-gap:",(0,D.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:repeat(4, minmax(0, 1fr));}@media (min-width: ",(t=>t.theme.breakpoints[3]),"){grid-template-columns:repeat(6, minmax(0, 1fr));}@media (min-width: ",(t=>t.theme.breakpoints[4]),"){grid-template-columns:repeat(8, minmax(0, 1fr));}");function st(t,e){return t.id?"".concat(t.id,"-index-").concat(e):"index-".concat(e)}var it=a("./app/views/dashboardsV2/data.tsx"),ot=a("./app/components/editableText.tsx");function nt({dashboard:t,isEditing:e,organization:a,onUpdate:s}){return(0,T.tZ)("div",{children:t?(0,T.tZ)(ot.Z,{isDisabled:!e,value:a.features.includes("dashboards-edit")&&"default-overview"===t.id?"Default Dashboard":t.title,onChange:e=>s({...t,title:e}),errorMessage:(0,b.t)("Please set a title for this dashboard"),successMessage:(0,b.t)("Dashboard title updated successfully")}):(0,b.t)("Dashboards")})}nt.displayName="DashboardTitle";const dt=(0,v.Z)(nt);var rt=a("./app/views/dashboardsV2/utils.tsx");const lt=(0,b.t)("You have unsaved changes, are you sure you want to leave?"),ct=(0,p.Z)({hookName:"component:dashboards-header"});class ht extends o.Component{constructor(...t){super(...t),(0,s.Z)(this,"state",{dashboardState:this.props.initialState,modifiedDashboard:this.updateModifiedDashboard(this.props.initialState)}),(0,s.Z)(this,"onEdit",(()=>{const{dashboard:t}=this.props;(0,w.ec)({eventKey:"dashboards2.edit.start",eventName:"Dashboards2: Edit start",organization_id:parseInt(this.props.organization.id,10)}),this.setState({dashboardState:I.n.EDIT,modifiedDashboard:(0,rt.qk)(t)})})),(0,s.Z)(this,"onRouteLeave",(()=>{if(![I.n.VIEW,I.n.PENDING_DELETE].includes(this.state.dashboardState))return lt})),(0,s.Z)(this,"onUnload",(t=>{[I.n.VIEW,I.n.PENDING_DELETE].includes(this.state.dashboardState)||(t.preventDefault(),t.returnValue=lt)})),(0,s.Z)(this,"onDelete",(t=>()=>{const{api:e,organization:a,location:s}=this.props;if(null==t||!t.id)return;const i=this.state.dashboardState;this.setState({dashboardState:I.n.PENDING_DELETE},(()=>{(0,l.iM)(e,a.slug,t.id).then((()=>{(0,c.S9)((0,b.t)("Dashboard deleted")),(0,w.ec)({eventKey:"dashboards2.delete",eventName:"Dashboards2: Delete",organization_id:parseInt(this.props.organization.id,10)}),n.browserHistory.replace({pathname:"/organizations/".concat(a.slug,"/dashboards/"),query:s.query})})).catch((()=>{this.setState({dashboardState:i})}))}))})),(0,s.Z)(this,"onCancel",(()=>{const{organization:t,location:e,params:a}=this.props;if(a.dashboardId)return(0,w.ec)({eventKey:"dashboards2.edit.cancel",eventName:"Dashboards2: Edit cancel",organization_id:parseInt(this.props.organization.id,10)}),void this.setState({dashboardState:I.n.VIEW,modifiedDashboard:null});(0,w.ec)({eventKey:"dashboards2.create.cancel",eventName:"Dashboards2: Create cancel",organization_id:parseInt(this.props.organization.id,10)}),n.browserHistory.replace({pathname:"/organizations/".concat(t.slug,"/dashboards/"),query:e.query})})),(0,s.Z)(this,"onCommit",(()=>{const{api:t,organization:e,location:a,dashboard:s,reloadData:i}=this.props,{modifiedDashboard:o,dashboardState:d}=this.state;switch(d){case I.n.CREATE:o&&(0,l.JR)(t,e.slug,o).then((t=>{(0,c.S9)((0,b.t)("Dashboard created")),(0,w.ec)({eventKey:"dashboards2.create.complete",eventName:"Dashboards2: Create complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:I.n.VIEW,modifiedDashboard:null}),n.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...a.query}})}),(()=>{}));break;case I.n.EDIT:if(o)return r()(s,o)?void this.setState({dashboardState:I.n.VIEW,modifiedDashboard:null}):void(0,l.Y)(t,e.slug,o).then((t=>{(0,c.S9)((0,b.t)("Dashboard updated")),(0,w.ec)({eventKey:"dashboards2.edit.complete",eventName:"Dashboards2: Edit complete",organization_id:parseInt(e.id,10)}),this.setState({dashboardState:I.n.VIEW,modifiedDashboard:null}),i&&i(),s&&t.id!==s.id&&n.browserHistory.replace({pathname:"/organizations/".concat(e.slug,"/dashboard/").concat(t.id,"/"),query:{...a.query}})}),(()=>{}));this.setState({dashboardState:I.n.VIEW,modifiedDashboard:null});break;case I.n.VIEW:default:this.setState({dashboardState:I.n.VIEW,modifiedDashboard:null})}})),(0,s.Z)(this,"setModifiedDashboard",(t=>{this.setState({modifiedDashboard:t})})),(0,s.Z)(this,"onSetWidgetToBeUpdated",(t=>{this.setState({widgetToBeUpdated:t})})),(0,s.Z)(this,"onUpdateWidget",(t=>{const{modifiedDashboard:e}=this.state;null!==e&&this.setState((e=>({...e,widgetToBeUpdated:void 0,modifiedDashboard:{...e.modifiedDashboard,widgets:t}})),this.updateRouteAfterSavingWidget)}))}componentDidMount(){const{route:t,router:e}=this.props;this.checkStateRoute(),e.setRouteLeaveHook(t,this.onRouteLeave),window.addEventListener("beforeunload",this.onUnload)}componentDidUpdate(t){t.location.pathname!==this.props.location.pathname&&this.checkStateRoute()}componentWillUnmount(){window.removeEventListener("beforeunload",this.onUnload)}checkStateRoute(){const{router:t,organization:e,params:a}=this.props,{dashboardId:s}=a,i="/organizations/".concat(e.slug,"/dashboard/").concat(s,"/");this.isWidgetBuilderRouter&&!this.isEditing&&t.replace(i),location.pathname===i&&this.state.widgetToBeUpdated&&this.onSetWidgetToBeUpdated(void 0)}updateRouteAfterSavingWidget(){if(this.isWidgetBuilderRouter){const{router:t,organization:e,params:a}=this.props,{dashboardId:s}=a;if(s)return void t.replace("/organizations/".concat(e.slug,"/dashboard/").concat(s,"/"));t.replace("/organizations/".concat(e.slug,"/dashboards/new/"))}}updateModifiedDashboard(t){const{dashboard:e}=this.props;switch(t){case I.n.CREATE:return(0,rt.qk)(it.R7);case I.n.EDIT:return(0,rt.qk)(e);default:return null}}get isEditing(){const{dashboardState:t}=this.state;return[I.n.EDIT,I.n.CREATE,I.n.PENDING_DELETE].includes(t)}get isWidgetBuilderRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:s}=e;return["/organizations/".concat(a.slug,"/dashboards/new/widget/new/"),"/organizations/".concat(a.slug,"/dashboard/").concat(s,"/widget/new/")].includes(t.pathname)||this.isWidgetBuilderEditRouter}get isWidgetBuilderEditRouter(){const{location:t,params:e,organization:a}=this.props,{dashboardId:s,widgetId:i}=e;return["/organizations/".concat(a.slug,"/dashboards/new/widget/").concat(i,"/edit/"),"/organizations/".concat(a.slug,"/dashboard/").concat(s,"/widget/").concat(i,"/edit/")].includes(t.pathname)}get dashboardTitle(){const{dashboard:t}=this.props,{modifiedDashboard:e}=this.state;return e?e.title:t.title}renderWidgetBuilder(t){const{children:e}=this.props,{modifiedDashboard:a,widgetToBeUpdated:s}=this.state;return(0,o.isValidElement)(e)?(0,o.cloneElement)(e,{dashboard:null!=a?a:t,onSave:this.onUpdateWidget,widget:s}):e}renderDefaultDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:s,router:i,location:o}=this.props,{modifiedDashboard:n,dashboardState:d}=this.state,{dashboardId:r}=s;return(0,T.tZ)(m.Z,{skipLoadLastUsed:t.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:it.GY}},children:(0,T.tZ)(f.JH,{children:(0,T.BX)(g.Z,{organization:t,children:[(0,T.BX)(pt,{children:[(0,T.tZ)(dt,{dashboard:null!=n?n:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing}),(0,T.tZ)(q,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onDelete:this.onDelete(e),dashboardState:d})]}),(0,T.tZ)(ct,{organization:t}),(0,T.tZ)(et,{paramDashboardId:r,dashboard:null!=n?n:e,organization:t,isEditing:this.isEditing,onUpdate:this.onUpdateWidget,onSetWidgetToBeUpdated:this.onSetWidgetToBeUpdated,router:i,location:o})]})})})}renderDashboardDetail(){const{organization:t,dashboard:e,dashboards:a,params:s,router:i,location:o,newWidget:n}=this.props,{modifiedDashboard:d,dashboardState:r}=this.state,{dashboardId:l}=s;return(0,T.tZ)(m.Z,{skipLoadLastUsed:t.features.includes("global-views"),defaultSelection:{datetime:{start:null,end:null,utc:!1,period:it.GY}},children:(0,T.BX)(g.Z,{organization:t,children:[(0,T.BX)(u.h4,{children:[(0,T.BX)(u.oB,{children:[(0,T.tZ)(h.Z,{crumbs:[{label:(0,b.t)("Dashboards"),to:"/organizations/".concat(t.slug,"/dashboards/")},{label:r===I.n.CREATE?(0,b.t)("Create Dashboard"):t.features.includes("dashboards-edit")&&"default-overview"===e.id?"Default Dashboard":this.dashboardTitle}]}),(0,T.tZ)(u.Dx,{children:(0,T.tZ)(dt,{dashboard:null!=d?d:e,onUpdate:this.setModifiedDashboard,isEditing:this.isEditing})})]}),(0,T.tZ)(u.kP,{children:(0,T.tZ)(q,{organization:t,dashboards:a,onEdit:this.onEdit,onCancel:this.onCancel,onCommit:this.onCommit,onDelete:this.onDelete(e),dashboardState:r})})]}),(0,T.tZ)(u.uT,{children:(0,T.tZ)(u.or,{fullWidth:!0,children:(0,T.tZ)(et,{paramDashboardId:l,dashboard:null!=d?d:e,organization:t,isEditing:this.isEditing,onUpdate:this.onUpdateWidget,onSetWidgetToBeUpdated:this.onSetWidgetToBeUpdated,router:i,location:o,newWidget:n})})})]})})}render(){const{organization:t,dashboard:e}=this.props;return this.isEditing&&this.isWidgetBuilderRouter?this.renderWidgetBuilder(e):t.features.includes("dashboards-edit")?this.renderDashboardDetail():this.renderDefaultDashboardDetail()}}ht.displayName="DashboardDetail";const pt=(0,i.Z)("div",{target:"e1anno2f0"})("display:grid;grid-template-columns:minmax(0, 1fr);grid-row-gap:",(0,D.Z)(2),";align-items:center;font-size:",(t=>t.theme.headerFontSize),";color:",(t=>t.theme.textColor),";margin-bottom:",(0,D.Z)(2),";@media (min-width: ",(t=>t.theme.breakpoints[1]),"){grid-template-columns:minmax(0, 1fr) max-content;grid-column-gap:",(0,D.Z)(2),";height:40px;}"),ut=(0,x.Z)((0,v.Z)(ht))}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_events_tsx-app_components_charts_lineChart_tsx-app_utils_discover_charts_t-4ef25d.61ab53bbeec80de5f4bc26e3080d0a1e.js.map