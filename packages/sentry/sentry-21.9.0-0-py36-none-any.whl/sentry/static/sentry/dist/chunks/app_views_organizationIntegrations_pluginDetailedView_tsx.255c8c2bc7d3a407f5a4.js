"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationIntegrations_pluginDetailedView_tsx"],{"./app/components/switchButton.tsx":(t,e,i)=>{i.d(e,{Z:()=>u});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("../node_modules/react/index.js"),o=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=({forwardRef:t,size:e="sm",isActive:i,forceActiveColor:n,isLoading:s,isDisabled:a,toggle:r,id:l,name:c,className:d})=>(0,o.tZ)(p,{ref:t,id:l,name:c,type:"button",className:d,onClick:a?void 0:r,role:"checkbox","aria-checked":i,isLoading:s,isDisabled:a,isActive:i,size:e,"data-test-id":"switch",children:(0,o.tZ)(g,{isDisabled:a,isActive:i,forceActiveColor:n,size:e})});a.displayName="Switch";const r=t=>"sm"===t.size?16:24,l=t=>r(t)-("sm"===t.size?6:10),c=t=>"sm"===t.size?2:4,d=t=>t.isActive?c(t)+r(t):c(t),p=(0,n.Z)("button",{target:"ep74ita1"})("display:inline-block;background:none;padding:0;border:1px solid ",(t=>t.theme.border),";position:relative;box-shadow:inset 0 1px 1px rgba(0, 0, 0, 0.04);transition:0.15s border ease;cursor:",(t=>t.isLoading||t.isDisabled?"not-allowed":"pointer"),";pointer-events:",(t=>t.isLoading||t.isDisabled?"none":null),";height:",r,"px;width:",(t=>2*r(t)),"px;border-radius:",r,"px;&:hover,&:focus{outline:none;border-color:",(t=>t.theme.border),";}&:focus,&.focus-visible{outline:none;box-shadow:rgba(209, 202, 216, 0.5) 0 0 0 3px;}"),g=(0,n.Z)("span",{target:"ep74ita0"})("display:block;position:absolute;border-radius:50%;transition:0.25s all ease;top:",c,"px;transform:translateX(",d,"px);width:",l,"px;height:",l,"px;background:",(t=>t.isActive||t.forceActiveColor?t.theme.active:t.theme.border),";opacity:",(t=>t.isDisabled?.4:null),";"),u=s.forwardRef(((t,e)=>(0,o.tZ)(a,{...t,forwardRef:e})))},"./app/views/organizationIntegrations/pluginDeprecationAlert.tsx":(t,e,i)=>{i.d(e,{Z:()=>u});var n=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=i("../node_modules/react/index.js"),o=i("./app/components/alert.tsx"),a=i("./app/components/button.tsx"),r=i("./app/icons/index.tsx"),l=i("./app/locale.tsx"),c=i("./app/utils/integrationUtil.tsx"),d=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class p extends s.Component{render(){const{organization:t,plugin:e}=this.props;if(!e.deprecationDate)return(0,d.tZ)(s.Fragment,{});const i=e.altIsSentryApp?"sentry-apps":"integrations",n="/settings/".concat(t.slug,"/").concat(i,"/").concat(e.firstPartyAlternative,"/");return(0,d.tZ)("div",{children:(0,d.BX)(o.Z,{type:"warning",icon:(0,d.tZ)(r.FC,{size:"sm"}),children:[(0,d.tZ)("span",{children:"This integration is being deprecated on ".concat(e.deprecationDate,". Please upgrade to avoid any disruption.")}),(0,d.tZ)(g,{href:"".concat(n,"?tab=configurations&referrer=directory_upgrade_now"),size:"xsmall",onClick:()=>(0,c.Db)("integrations.resolve_now_clicked",{integration_type:"plugin",integration:e.slug,organization:t}),children:(0,l.t)("Upgrade Now")})]})})}}p.displayName="PluginDeprecationAlert";const g=(0,n.Z)(a.ZP,{target:"e1otf8d90"})("color:",(t=>t.theme.subText),";float:right;"),u=p},"./app/views/organizationIntegrations/pluginDetailedView.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>D});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),s=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.symbol.description.js"),i("../node_modules/react/index.js")),a=i("./app/actionCreators/modal.tsx"),r=i("./app/components/button.tsx"),l=i("./app/components/contextPickerModal.tsx"),c=i("./app/locale.tsx"),d=i("./app/styles/space.tsx"),p=i("./app/utils/withOrganization.tsx"),g=i("./app/views/organizationIntegrations/abstractIntegrationDetailedView.tsx"),u=i("./app/actionCreators/indicator.tsx"),h=i("./app/components/acl/access.tsx"),m=i("./app/components/alert.tsx"),b=i("./app/components/confirm.tsx"),x=i("./app/components/idBadge/projectBadge.tsx"),Z=i("./app/components/switchButton.tsx"),f=i("./app/icons/index.tsx"),j=i("./app/utils/withApi.tsx"),w=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends o.Component{constructor(...t){super(...t),(0,n.Z)(this,"pluginUpdate",(async(t,e="POST")=>{const{organization:i,projectItem:n,plugin:s}=this.props;await this.props.api.requestPromise("/projects/".concat(i.slug,"/").concat(n.projectSlug,"/plugins/").concat(s.id,"/"),{method:e,data:t})})),(0,n.Z)(this,"updatePluginEnableStatus",(async t=>{t?await this.pluginUpdate({enabled:t}):await this.pluginUpdate({},"DELETE")})),(0,n.Z)(this,"handleReset",(async()=>{try{(0,u.E3)((0,c.t)("Removing...")),await this.pluginUpdate({reset:!0}),(0,u.S9)((0,c.t)("Configuration was removed")),this.props.onResetConfiguration(this.projectId),this.props.trackIntegrationAnalytics("integrations.uninstall_completed")}catch(t){(0,u.Iw)((0,c.t)("Unable to remove configuration"))}})),(0,n.Z)(this,"handleUninstallClick",(()=>{this.props.trackIntegrationAnalytics("integrations.uninstall_clicked")})),(0,n.Z)(this,"toggleEnablePlugin",(async(t,e=!0)=>{try{(0,u.E3)((0,c.t)("Enabling...")),await this.updatePluginEnableStatus(e),(0,u.S9)(e?(0,c.t)("Configuration was enabled."):(0,c.t)("Configuration was disabled.")),this.props.onPluginEnableStatusChange(t,e),this.props.trackIntegrationAnalytics(e?"integrations.enabled":"integrations.disabled")}catch(t){(0,u.Iw)(e?(0,c.t)("Unable to enable configuration."):(0,c.t)("Unable to disable configuration."))}}))}get projectId(){return this.props.projectItem.projectId}getConfirmMessage(){return(0,w.tZ)(o.Fragment,{children:(0,w.tZ)(m.Z,{type:"error",icon:(0,w.tZ)(f.Gy,{size:"md"}),children:(0,c.t)("Deleting this installation will disable the integration for this project and remove any configurations.")})})}get projectForBadge(){const{projectItem:t}=this.props;return{slug:t.projectSlug,platform:t.projectPlatform?t.projectPlatform:void 0}}render(){const{className:t,plugin:e,organization:i,projectItem:n}=this.props;return(0,w.tZ)(I,{children:(0,w.tZ)(h.Z,{access:["org:integrations"],children:({hasAccess:s})=>(0,w.BX)(k,{className:t,children:[(0,w.tZ)(z,{children:(0,w.tZ)(x.Z,{project:this.projectForBadge})}),(0,w.tZ)("div",{children:(0,w.tZ)(C,{borderless:!0,icon:(0,w.tZ)(f.iC,{}),disabled:!s,to:"/settings/".concat(i.slug,"/projects/").concat(n.projectSlug,"/plugins/").concat(e.id,"/"),"data-test-id":"integration-configure-button",children:(0,c.t)("Configure")})}),(0,w.tZ)("div",{children:(0,w.tZ)(b.Z,{priority:"danger",onConfirming:this.handleUninstallClick,disabled:!s,confirmText:"Delete Installation",onConfirm:()=>this.handleReset(),message:this.getConfirmMessage(),children:(0,w.tZ)(C,{disabled:!s,borderless:!0,icon:(0,w.tZ)(f.Fz,{}),"data-test-id":"integration-remove-button",children:(0,c.t)("Uninstall")})})}),(0,w.tZ)(Z.Z,{isActive:n.enabled,toggle:()=>this.toggleEnablePlugin(n.projectId,!n.enabled),isDisabled:!s})]})})})}}y.displayName="InstalledPlugin";const v=(0,j.Z)(y),I=(0,s.Z)("div",{target:"emrs3rl3"})("padding:",(0,d.Z)(2),";border:1px solid ",(t=>t.theme.border),";border-bottom:none;background-color:",(t=>t.theme.background),";&:last-child{border-bottom:1px solid ",(t=>t.theme.border),";}"),C=(0,s.Z)(r.ZP,{target:"emrs3rl2"})("color:",(t=>t.theme.gray300),";"),k=(0,s.Z)("div",{target:"emrs3rl1"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),z=(0,s.Z)("div",{target:"emrs3rl0"})({name:"b6ci67",styles:"flex:1;box-sizing:border-box;display:flex;flex-direction:row;min-width:0"});var _=i("./app/views/organizationIntegrations/pluginDeprecationAlert.tsx");class P extends g.Z{constructor(...t){super(...t),(0,n.Z)(this,"handleResetConfiguration",(t=>{const e=this.plugin.projectList.slice(),i=e.findIndex((e=>e.projectId===t));i<0||(e.splice(i,1),this.setState({plugins:[{...this.state.plugins[0],projectList:e}]}))})),(0,n.Z)(this,"handlePluginEnableStatus",((t,e=!0)=>{const i=this.plugin.projectList.slice(),n=i.findIndex((e=>e.projectId===t));n<0||(i[n]={...i[n],enabled:e},this.setState({plugins:[{...this.state.plugins[0],projectList:i}]}))})),(0,n.Z)(this,"handleAddToProject",(()=>{const t=this.plugin,{organization:e,router:i}=this.props;this.trackIntegrationAnalytics("integrations.plugin_add_to_project_clicked"),a.openModal((n=>(0,w.tZ)(l.Z,{...n,nextPath:"/settings/".concat(e.slug,"/projects/:projectId/plugins/").concat(t.id,"/"),needProject:!0,needOrg:!1,onFinish:t=>{n.closeModal(),i.push(t)}})),{allowClickClose:!1})}))}getEndpoints(){const{orgId:t,integrationSlug:e}=this.props.params;return[["plugins","/organizations/".concat(t,"/plugins/configs/?plugins=").concat(e)]]}get integrationType(){return"plugin"}get plugin(){return this.state.plugins[0]}get description(){return this.plugin.description||""}get author(){var t;return null===(t=this.plugin.author)||void 0===t?void 0:t.name}get resourceLinks(){return this.plugin.resourceLinks||[]}get installationStatus(){return this.plugin.projectList.length>0?"Installed":"Not Installed"}get integrationName(){return"".concat(this.plugin.name).concat(this.plugin.isHidden?" (Legacy)":"")}get featureData(){return this.plugin.featureDescriptions}getTabDisplay(t){return"configurations"===t?"project configurations":"overview"}renderTopButton(t,e){return e?(0,w.tZ)(A,{"data-test-id":"install-button",disabled:t,onClick:this.handleAddToProject,size:"small",priority:"primary",children:(0,c.t)("Add to Project")}):this.renderRequestIntegrationButton()}renderConfigurations(){const t=this.plugin,{organization:e}=this.props;return t.projectList.length?(0,w.BX)(o.Fragment,{children:[(0,w.tZ)(_.Z,{organization:e,plugin:t}),(0,w.tZ)("div",{children:t.projectList.map((i=>(0,w.tZ)(v,{organization:e,plugin:t,projectItem:i,onResetConfiguration:this.handleResetConfiguration,onPluginEnableStatusChange:this.handlePluginEnableStatus,trackIntegrationAnalytics:this.trackIntegrationAnalytics},i.projectId)))})]}):this.renderEmptyConfigurations()}}const A=(0,s.Z)(r.ZP,{target:"e13hh9ci0"})("margin-bottom:",(0,d.Z)(1),";"),D=(0,p.Z)(P)}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationIntegrations_pluginDetailedView_tsx.846f540da72e775593a2e62ae4fa7e47.js.map