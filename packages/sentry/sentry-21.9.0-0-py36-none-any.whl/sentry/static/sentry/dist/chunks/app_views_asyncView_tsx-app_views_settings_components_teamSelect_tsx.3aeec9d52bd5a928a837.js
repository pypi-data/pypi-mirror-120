"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_asyncView_tsx-app_views_settings_components_teamSelect_tsx"],{"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>d}),s("../node_modules/react/index.js");var a=s("../node_modules/react-document-title/index.js"),n=s.n(a),o=s("./app/components/asyncComponent.tsx"),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends o.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,i.tZ)(n(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}d.displayName="AsyncView"},"./app/views/settings/components/teamSelect.tsx":(e,t,s)=>{s.d(t,{Z:()=>M});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/lodash/debounce.js"),d=s.n(i),r=s("./app/components/button.tsx"),m=s("./app/components/confirm.tsx"),l=s("./app/components/dropdownAutoComplete/index.tsx"),p=s("./app/components/dropdownButton.tsx"),c=s("../node_modules/lodash/isEqual.js"),h=s.n(c),u=s("./app/stores/teamStore.tsx"),g=s("./app/components/idBadge/teamBadge/badge.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class Z extends o.Component{constructor(...e){super(...e),(0,a.Z)(this,"state",{team:this.props.team}),(0,a.Z)(this,"unlistener",u.Z.listen((e=>this.onTeamStoreUpdate(e)),void 0))}UNSAFE_componentWillReceiveProps(e){this.state.team!==e.team&&(h()(this.state.team,e.team)||this.setState({team:e.team}))}componentWillUnmount(){var e;null===(e=this.unlistener)||void 0===e||e.call(this)}onTeamStoreUpdate(e){if(!e.has(this.state.team.id))return;const t=u.Z.getById(this.state.team.id);t&&!h()(t.avatar,this.state.team.avatar)&&this.setState({team:t})}render(){return(0,x.tZ)(g.Z,{...this.props,team:this.state.team})}}Z.displayName="TeamBadgeContainer";const v=Z;var b=s("./app/components/links/link.tsx"),y=s("./app/components/panels/index.tsx"),f=s("./app/constants/index.tsx"),T=s("./app/icons/index.tsx"),w=s("./app/locale.tsx"),_=s("./app/styles/space.tsx"),S=s("./app/utils/withApi.tsx"),j=s("./app/views/settings/components/emptyMessage.tsx");class A extends o.Component{constructor(...e){super(...e),(0,a.Z)(this,"state",{loading:!0,teamsSearch:null}),(0,a.Z)(this,"fetchTeams",d()((async e=>{const{api:t,organization:s}=this.props,a=await t.requestPromise("/organizations/".concat(s.slug,"/teams/"),{query:{query:e,per_page:f.X1}});this.setState({teamsSearch:a,loading:!1})}),f.Dk)),(0,a.Z)(this,"handleQueryUpdate",(e=>{this.setState({loading:!0}),this.fetchTeams(e.target.value)})),(0,a.Z)(this,"handleAddTeam",(e=>{var t;const s=null===(t=this.state.teamsSearch)||void 0===t?void 0:t.find((t=>t.slug===e.value));s&&this.props.onAddTeam(s)})),(0,a.Z)(this,"handleRemove",(e=>{this.props.onRemoveTeam(e)}))}componentDidMount(){this.fetchTeams()}renderTeamAddDropDown(){const{disabled:e,selectedTeams:t,menuHeader:s}=this.props,{teamsSearch:a}=this.state,n=e;let o=[];return o=null===a||0===a.length?[]:a.filter((e=>!t.some((t=>t.slug===e.slug)))).map(((e,t)=>({index:t,value:e.slug,searchKey:e.slug,label:(0,x.tZ)(C,{avatarSize:18,team:e})}))),(0,x.tZ)(l.Z,{items:o,busyItemsStillVisible:this.state.loading,onChange:this.handleQueryUpdate,onSelect:this.handleAddTeam,emptyMessage:(0,w.t)("No teams"),menuHeader:s,disabled:n,alignMenu:"right",children:({isOpen:e})=>(0,x.tZ)(p.Z,{"aria-label":(0,w.t)("Add Team"),isOpen:e,size:"xsmall",disabled:n,children:(0,w.t)("Add Team")})})}renderBody(){const{organization:e,selectedTeams:t,disabled:s,confirmLastTeamRemoveMessage:a}=this.props;if(0===t.length)return(0,x.tZ)(j.Z,{children:(0,w.t)("No Teams assigned")});const n=1===t.length&&a?a:null;return t.map((t=>(0,x.tZ)(B,{orgId:e.slug,team:t,onRemove:this.handleRemove,disabled:s,confirmMessage:n},t.slug)))}render(){return(0,x.BX)(y.s_,{children:[(0,x.BX)(y.V9,{hasButtons:!0,children:[(0,w.t)("Team"),this.renderTeamAddDropDown()]}),(0,x.tZ)(y.N,{children:this.renderBody()})]})}}A.displayName="TeamSelect";const B=({orgId:e,team:t,onRemove:s,disabled:a,confirmMessage:n})=>(0,x.BX)(z,{children:[(0,x.tZ)(R,{to:"/settings/".concat(e,"/teams/").concat(t.slug,"/"),children:(0,x.tZ)(v,{team:t})}),(0,x.tZ)(m.Z,{message:n,bypass:!n,onConfirm:()=>s(t.slug),disabled:a,children:(0,x.tZ)(r.ZP,{size:"xsmall",icon:(0,x.tZ)(T.JZ,{isCircled:!0,size:"xs"}),disabled:a,children:(0,w.t)("Remove")})})]});B.displayName="TeamRow";const C=(0,n.Z)(v,{target:"e1u21fi92"})("font-weight:normal;font-size:",(e=>e.theme.fontSizeMedium),";text-transform:none;"),z=(0,n.Z)(y.Lv,{target:"e1u21fi91"})("padding:",(0,_.Z)(2),";align-items:center;"),R=(0,n.Z)(b.Z,{target:"e1u21fi90"})("flex:1;margin-right:",(0,_.Z)(1),";"),M=(0,S.Z)(A)}}]);
//# sourceMappingURL=../sourcemaps/app_views_asyncView_tsx-app_views_settings_components_teamSelect_tsx.6a6ccecdc7101cce938691b9cae71ca4.js.map