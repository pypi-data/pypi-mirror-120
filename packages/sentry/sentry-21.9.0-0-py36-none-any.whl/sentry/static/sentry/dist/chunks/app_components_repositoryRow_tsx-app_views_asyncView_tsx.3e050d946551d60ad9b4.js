"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_repositoryRow_tsx-app_views_asyncView_tsx"],{"./app/actionCreators/integrations.tsx":(e,t,s)=>{s.d(t,{cQ:()=>r,qU:()=>a,Ag:()=>p,eg:()=>d});var o=s("./app/actionCreators/indicator.tsx"),n=s("./app/api.tsx"),i=s("./app/locale.tsx");function r(e,t,s){(0,o.E3)();const n=e.requestPromise("/organizations/".concat(t,"/repos/").concat(s,"/"),{method:"DELETE"});return n.then((()=>(0,o.B8)()),(()=>(0,o.Iw)((0,i.t)("Unable to delete repository.")))),n}function a(e,t,s){(0,o.E3)();const n=e.requestPromise("/organizations/".concat(t,"/repos/").concat(s,"/"),{method:"PUT",data:{status:"visible"}});return n.then((()=>(0,o.B8)()),(()=>(0,o.Iw)((0,i.t)("Unable to cancel deletion.")))),n}function l(e){return e.then((e=>{const t=(0,i._N)("[repo] has been successfully added.",{repo:e.name});(0,o.S9)(t)}),(e=>{const t=e.responseJSON.errors?e.responseJSON.errors.__all__:(0,i.t)("Unable to add repository.");(0,o.Iw)(t)})),e}function p(e,t,s,n){const i={integrationId:n.id};return(0,o.E3)(),l(e.requestPromise("/organizations/".concat(t,"/repos/").concat(s,"/"),{data:i,method:"PUT"}))}function d(e,t,s,n){const i={installation:n.id,identifier:s,provider:"integrations:".concat(n.provider.key)};return(0,o.E3)(),l(e.requestPromise("/organizations/".concat(t,"/repos/"),{method:"POST",data:i}))}new n.KU},"./app/components/repositoryRow.tsx":(e,t,s)=>{s.d(t,{Z:()=>D});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/integrations.tsx"),a=s("./app/actionCreators/modal.tsx"),l=s("./app/components/acl/access.tsx"),p=s("./app/components/button.tsx"),d=s("./app/components/confirm.tsx"),c=s("./app/components/links/externalLink.tsx"),m=s("./app/components/panels/index.tsx"),u=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),g=s("./app/views/settings/components/forms/index.tsx"),x=s("./app/views/settings/components/forms/form.tsx"),f=s("./app/components/alert.tsx"),y=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends i.Component{get initialData(){const{repository:e}=this.props;return{name:e.name,url:e.url||""}}get formFields(){return[{name:"name",type:"string",required:!0,label:(0,h.t)("Name of your repository.")},{name:"url",type:"string",required:!1,label:(0,h.t)("Full URL to your repository."),placeholder:(0,h.t)("https://github.com/my-org/my-repo/")}]}render(){const{onCancel:e,orgSlug:t,repository:s}=this.props,o="/organizations/".concat(t,"/repos/").concat(s.id,"/");return(0,y.BX)(x.Z,{initialData:this.initialData,onSubmitSuccess:e=>{this.props.onSubmitSuccess(e),this.props.closeModal()},apiEndpoint:o,apiMethod:"PUT",onCancel:e,children:[(0,y.tZ)(f.Z,{type:"warning",icon:(0,y.tZ)(u.FC,{}),children:(0,h._N)("Changing the [name:repo name] may have consequences if it no longer matches the repo name used when [link:sending commits with releases].",{link:(0,y.tZ)(c.Z,{href:"https://docs.sentry.io/product/cli/releases/#sentry-cli-commit-integration"}),name:(0,y.tZ)("strong",{children:"repo name"})})}),this.formFields.map((e=>(0,y.tZ)(g.Ff,{field:e,inline:!1,stacked:!0,flexibleControlStateSize:!0},e.name)))]})}}b.displayName="RepositoryEditForm";var v=s("./app/components/tooltip.tsx"),Z=s("./app/styles/space.tsx"),w=s("./app/types/index.tsx"),j=s("./app/utils/withOrganization.tsx");class F extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"cancelDelete",(()=>{const{api:e,orgId:t,repository:s,onRepositoryChange:o}=this.props;(0,r.qU)(e,t,s.id).then((e=>{o&&o(e)}),(()=>{}))})),(0,o.Z)(this,"deleteRepo",(()=>{const{api:e,orgId:t,repository:s,onRepositoryChange:o}=this.props;(0,r.cQ)(e,t,s.id).then((e=>{o&&o(e)}),(()=>{}))})),(0,o.Z)(this,"handleEditRepo",(e=>{const{onRepositoryChange:t}=this.props;t&&t(e)})),(0,o.Z)(this,"openModal",(()=>{const{repository:e,orgId:t}=this.props;(0,a.openModal)((({Body:s,Header:o,closeModal:n})=>(0,y.BX)(i.Fragment,{children:[(0,y.tZ)(o,{closeButton:!0,children:(0,h.t)("Edit Repository")}),(0,y.tZ)(s,{children:(0,y.tZ)(b,{orgSlug:t,repository:e,onSubmitSuccess:this.handleEditRepo,closeModal:n,onCancel:n})})]})))}))}getStatusLabel(e){switch(e.status){case w.Fr.PENDING_DELETION:return"Deletion Queued";case w.Fr.DELETION_IN_PROGRESS:return"Deletion in Progress";case w.Fr.DISABLED:case w.Fr.HIDDEN:return"Disabled";default:return null}}get isActive(){return this.props.repository.status===w.Fr.ACTIVE}renderDeleteButton(e){const{repository:t}=this.props,s=this.isActive;return(0,y.tZ)(v.Z,{title:(0,h.t)("You must be an organization owner, manager or admin to remove a repository."),disabled:e,children:(0,y.tZ)(d.Z,{disabled:!e||!s&&t.status!==w.Fr.DISABLED,onConfirm:this.deleteRepo,message:(0,h.t)("Are you sure you want to remove this repository? All associated commit data will be removed in addition to the repository."),children:(0,y.tZ)(P,{size:"xsmall",icon:(0,y.tZ)(u.Fz,{size:"xs"}),label:(0,h.t)("delete"),disabled:!e})})})}render(){const{repository:e,showProvider:t,organization:s}=this.props,o=this.isActive,n=s.features.includes("integrations-custom-scm")&&"integrations:custom_scm"===e.provider.id;return(0,y.tZ)(l.Z,{access:["org:integrations"],children:({hasAccess:s})=>(0,y.BX)(_,{status:e.status,children:[(0,y.BX)(S,{children:[(0,y.BX)(E,{children:[(0,y.tZ)("strong",{children:e.name}),!o&&(0,y.BX)("small",{children:[" — ",this.getStatusLabel(e)]}),e.status===w.Fr.PENDING_DELETION&&(0,y.tZ)(P,{size:"xsmall",onClick:this.cancelDelete,disabled:!s,"data-test-id":"repo-cancel",children:(0,h.t)("Cancel")})]}),(0,y.BX)("div",{children:[t&&(0,y.tZ)("small",{children:e.provider.name}),t&&e.url&&(0,y.tZ)("span",{children:" — "}),e.url&&(0,y.tZ)("small",{children:(0,y.tZ)(c.Z,{href:e.url,children:e.url.replace("https://","")})})]})]}),n?(0,y.BX)(C,{children:[(0,y.tZ)(P,{size:"xsmall",icon:(0,y.tZ)(u.yl,{size:"xs"}),label:(0,h.t)("edit"),disabled:!s||!o&&e.status!==w.Fr.DISABLED,onClick:()=>this.openModal()}),this.renderDeleteButton(s)]}):this.renderDeleteButton(s)]})})}}F.displayName="RepositoryRow",(0,o.Z)(F,"defaultProps",{showProvider:!1});const _=(0,n.Z)(m.Lv,{target:"e1nskpen4"})("padding:",(0,Z.Z)(1)," ",(0,Z.Z)(2)," ",(0,Z.Z)(2),";justify-content:space-between;align-items:center;flex:1;",(e=>e.status===w.Fr.DISABLED&&"\n    filter: grayscale(1);\n    opacity: 0.4;\n  "),";&:last-child{border-bottom:none;}"),P=(0,n.Z)(p.ZP,{target:"e1nskpen3"})("margin-left:",(0,Z.Z)(1),";"),S=(0,n.Z)("div",{target:"e1nskpen2"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),C=(0,n.Z)("div",{target:"e1nskpen1"})("display:flex;margin-left:",(0,Z.Z)(1),";"),E=(0,n.Z)("div",{target:"e1nskpen0"})("margin-bottom:",(0,Z.Z)(1),";line-height:26px;"),D=(0,j.Z)(F)},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>a}),s("../node_modules/react/index.js");var o=s("../node_modules/react-document-title/index.js"),n=s.n(o),i=s("./app/components/asyncComponent.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class a extends i.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,r.tZ)(n(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}a.displayName="AsyncView"},"./app/views/settings/components/forms/apiForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>d});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/indicator.tsx"),r=s("./app/api.tsx"),a=s("./app/locale.tsx"),l=s("./app/views/settings/components/forms/form.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class d extends n.Component{constructor(...e){super(...e),(0,o.Z)(this,"api",new r.KU),(0,o.Z)(this,"onSubmit",((e,t,s)=>{this.props.onSubmit&&this.props.onSubmit(e),(0,i.E3)((0,a.t)("Saving changes…")),this.api.request(this.props.apiEndpoint,{method:this.props.apiMethod,data:e,success:e=>{(0,i.B8)(),t(e)},error:e=>{(0,i.B8)(),s(e)}})}))}componentWillUnmount(){this.api.clear()}render(){const{onSubmit:e,apiMethod:t,apiEndpoint:s,...o}=this.props;return(0,p.tZ)(l.Z,{onSubmit:this.onSubmit,...o})}}d.displayName="ApiForm"},"./app/views/settings/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>c});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/components/panels/index.tsx"),a=s("./app/icons/index.tsx"),l=s("./app/utils/sanitizeQuerySelector.tsx"),p=s("./app/views/settings/components/forms/fieldFromConfig.tsx"),d=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class c extends i.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{collapsed:!1}),(0,o.Z)(this,"handleToggleEvents",(()=>{const{collapsed:e}=this.state;this.setState({collapsed:!e})}))}render(){const{title:e,fields:t,access:s,disabled:o,additionalFieldProps:n,renderFooter:i,renderHeader:c,collapsible:u,...h}=this.props,{collapsed:g}=this.state;return(0,d.BX)(r.s_,{id:"string"==typeof e?(0,l.m)(e):void 0,children:[e&&(0,d.BX)(r.V9,{children:[e,u&&(0,d.tZ)(m,{onClick:this.handleToggleEvents,children:(0,d.tZ)(a.g6,{direction:g?"down":"up",size:"xs"})})]}),!g&&(0,d.BX)(r.N,{children:["function"==typeof c&&c({title:e,fields:t}),t.map((e=>{if("function"==typeof e)return e();const{defaultValue:t,...i}=e;return!0===o&&(i.disabled=!0,i.disabledReason=void 0),(0,d.tZ)(p.Z,{access:s,disabled:o,...h,...n,field:i,highlighted:this.props.highlighted==="#".concat(e.name)},e.name)})),"function"==typeof i&&i({title:e,fields:t})]})]})}}c.displayName="FormPanel",(0,o.Z)(c,"defaultProps",{additionalFieldProps:{}});const m=(0,n.Z)("span",{target:"efsz5z60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/views/settings/components/forms/index.tsx":(e,t,s)=>{s.d(t,{Ff:()=>i.Z}),s("./app/views/settings/components/forms/apiForm.tsx"),s("./app/views/settings/components/forms/booleanField.tsx"),s("./app/views/settings/components/forms/choiceMapperField.tsx");s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js");var o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js"),s("../node_modules/moment/moment.js"),s("./app/components/dropdownMenu.tsx"),s("./app/components/loadingIndicator.tsx"),s("./app/components/placeholder.tsx"),s("./app/icons/index.tsx"),s("./app/styles/input.tsx")),n=s("./app/styles/space.tsx");s("./app/views/settings/components/forms/inputField.tsx"),s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js"),o.T,(0,n.Z)(1),s("./app/views/settings/components/forms/emailField.tsx");var i=s("./app/views/settings/components/forms/fieldFromConfig.tsx");s("./app/views/settings/components/forms/fieldSeparator.tsx"),s("./app/views/settings/components/forms/form.tsx"),s("./app/views/settings/components/forms/formPanel.tsx"),s("./app/views/settings/components/forms/hiddenField.tsx"),s("./app/views/settings/components/forms/jsonForm.tsx"),s("./app/views/settings/components/forms/numberField.tsx"),s("../node_modules/lodash/omit.js"),s("./app/views/settings/components/forms/rangeField.tsx"),s("./app/views/settings/components/forms/selectField.tsx"),s("./app/views/settings/components/forms/textareaField.tsx"),s("./app/views/settings/components/forms/textCopyInput.tsx"),s("./app/views/settings/components/forms/textField.tsx")},"./app/views/settings/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),r=s("../node_modules/@sentry/minimal/esm/index.js"),a=s("../node_modules/scroll-to-element/index.js"),l=s.n(a),p=s("./app/utils.tsx"),d=s("./app/utils/sanitizeQuerySelector.tsx"),c=s("./app/views/settings/components/forms/formPanel.tsx"),m=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends n.Component{constructor(...e){var t;super(...e),(0,o.Z)(this,"state",{highlighted:null===(t=this.props.location)||void 0===t?void 0:t.hash})}componentDidMount(){this.scrollToHash()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.hash!==e.location.hash){const t=e.location.hash;this.scrollToHash(t),this.setState({highlighted:t})}}scrollToHash(e){var t;const s=e||(null===(t=this.props.location)||void 0===t?void 0:t.hash);if(s)try{l()((0,d.m)(decodeURIComponent(s)),{align:"middle",offset:-100})}catch(e){r.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,p.ri)(null==e?void 0:e.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm({fields:e,formPanelProps:t,title:s}){return this.shouldDisplayForm(e)||null!=t&&t.renderFooter||null!=t&&t.renderHeader?(0,m.tZ)(c.Z,{title:s,fields:e,...t}):null}render(){const{access:e,collapsible:t,fields:s,title:o,forms:i,disabled:r,features:a,additionalFieldProps:l,renderFooter:p,renderHeader:d,location:c,...u}=this.props,h={access:e,disabled:r,features:a,additionalFieldProps:l,renderFooter:p,renderHeader:d,highlighted:this.state.highlighted,collapsible:t};return(0,m.BX)("div",{...u,children:[void 0!==i&&i.map(((e,t)=>(0,m.tZ)(n.Fragment,{children:this.renderForm({formPanelProps:h,...e})},t))),void 0===i&&void 0!==s&&this.renderForm({fields:s,formPanelProps:h,title:o})]})}}u.displayName="JsonForm";const h=(0,i.withRouter)(u)}}]);
//# sourceMappingURL=../sourcemaps/app_components_repositoryRow_tsx-app_views_asyncView_tsx.58fc61c2ae1153b292a7a3f395ae8f4f.js.map