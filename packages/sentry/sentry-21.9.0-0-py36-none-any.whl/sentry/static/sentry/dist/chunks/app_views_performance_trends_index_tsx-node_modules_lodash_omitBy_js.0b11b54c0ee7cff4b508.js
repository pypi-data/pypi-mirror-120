(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_trends_index_tsx-node_modules_lodash_omitBy_js","app_components_sentryDocumentTitle_tsx","app_views_performance_data_tsx-app_views_performance_landing_utils_tsx-node_modules_lodash_om-394608"],{"./app/components/events/searchBar.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var n,a=r("../node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral.js"),s=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/core-js/modules/es.string.replace.js"),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/react/index.js")),i=r("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),l=r("../node_modules/lodash/assign.js"),c=r.n(l),p=r("../node_modules/lodash/flatten.js"),u=r.n(p),d=r("../node_modules/lodash/isEqual.js"),m=r.n(d),h=r("../node_modules/lodash/memoize.js"),f=r.n(h),g=r("../node_modules/lodash/omit.js"),_=r.n(g),y=r("./app/actionCreators/tags.tsx"),v=r("./app/components/smartSearchBar/index.tsx"),x=r("./app/constants/index.tsx"),b=r("./app/types/index.tsx"),Z=r("./app/utils.tsx"),w=r("./app/utils/discover/fields.tsx"),T=r("./app/utils/measurements/measurements.tsx"),P=r("./app/utils/withApi.tsx"),S=r("./app/utils/withTags.tsx"),j=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D=new RegExp("^".concat(x.c$,"|\\").concat(x.ir),"g");class E extends o.PureComponent{constructor(...e){super(...e),(0,s.Z)(this,"getEventFieldValues",f()(((e,t,r)=>{const{api:n,organization:a,projectIds:s}=this.props,o=null==s?void 0:s.map(String);return(0,w.h1)(e.key)||(0,w.Xr)(e.key)?Promise.resolve([]):(0,y.Fo)(n,a.slug,e.key,t,o,r,!0).then((e=>u()(e.filter((({name:e})=>(0,Z.ri)(e))).map((({name:e})=>e)))),(()=>{throw new Error("Unable to fetch event field values")}))}),(({key:e},t)=>"".concat(e,"-").concat(t)))),(0,s.Z)(this,"prepareQuery",(e=>e.replace(D,"")))}componentDidMount(){var e,t;null===(e=(t=this.getEventFieldValues.cache).clear)||void 0===e||e.call(t)}componentDidUpdate(e){var t,r;m()(this.props.projectIds,e.projectIds)||null===(t=(r=this.getEventFieldValues.cache).clear)||void 0===t||t.call(r)}getTagList(e){const{fields:t,organization:r,tags:n,omitTags:a}=this.props,s=t?Object.fromEntries(t.filter((e=>!Object.keys(w.wZ).includes(e.field)&&!(0,w.GO)(e.field))).map((e=>[e.field,{key:e.field,name:e.field}]))):{},o=r.features.includes("performance-view")?Object.assign({},e,w.wZ,s):_()(w.wZ,w.J8),i=r.features.includes("semver")?Object.assign({},w.jg,o):o,l=c()({},n,i);return l.has={key:"has",name:"Has property",values:Object.keys(l),predefined:!0},_()(l,null!=a?a:[])}render(){const{organization:e}=this.props;return(0,j.tZ)(T.Z,{organization:e,children:({measurements:e})=>{const t=this.getTagList(e);return(0,j.tZ)(i.ms,{children:({css:e})=>(0,j.tZ)(v.Z,{...this.props,hasRecentSearches:!0,savedSearchType:b.L4.EVENT,onGetTagValues:this.getEventFieldValues,supportedTags:t,prepareQuery:this.prepareQuery,excludeEnvironment:!0,dropdownClassName:e(n||(n=(0,a.Z)(["\n                    max-height: 300px;\n                    overflow-y: auto;\n                  "])))})})}})}}E.displayName="SearchBar";const C=(0,P.Z)((0,S.Z)(E))},"./app/components/sentryDocumentTitle.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>i}),r("../node_modules/react/index.js");var n=r("../node_modules/react-document-title/index.js"),a=r.n(n),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o({title:e,orgSlug:t,projectSlug:r,children:n}){const o=t||r?t&&r?"".concat(e," - ").concat(t," - ").concat(r):t?"".concat(e," - ").concat(t):"".concat(e," - ").concat(r):e;return(0,s.tZ)(a(),{title:"".concat(o," - Sentry"),children:n})}o.displayName="SentryDocumentTitle";const i=o},"./app/utils/measurements/measurements.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>p}),r("../node_modules/core-js/modules/es.object.from-entries.js"),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("../node_modules/react/index.js"),a=r("./app/utils/performance/vitals/constants.tsx"),s=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function o(e){return Object.fromEntries(Object.entries(e).map((([e,t])=>[e,{name:t.name,key:e}])))}const i=o(a.T),l=o(a.r);function c({organization:e,children:t}){const r=e.features.includes("performance-mobile-vitals")?{...l,...i}:l;return(0,s.tZ)(n.Fragment,{children:t({measurements:r})})}c.displayName="Measurements";const p=c},"./app/utils/withTags.tsx":(e,t,r)=>{"use strict";r.d(t,{Z:()=>l});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),s=r("./app/stores/tagStore.tsx"),o=r("./app/utils/getDisplayName.tsx"),i=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends a.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{tags:s.Z.getAllTags()}),(0,n.Z)(this,"unsubscribe",s.Z.listen((e=>this.setState({tags:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{tags:t,...r}=this.props;return(0,i.tZ)(e,{tags:null!=t?t:this.state.tags,...r})}}return t.displayName="WithTags",(0,n.Z)(t,"displayName","withTags(".concat((0,o.Z)(e),")")),t}},"./app/views/performance/data.tsx":(e,t,r)=>{"use strict";r.d(t,{GY:()=>u,hj:()=>d,V$:()=>m,ze:()=>h,L0:()=>f,g1:()=>g,DW:()=>_,Gm:()=>y,$r:()=>x,C:()=>b,AM:()=>Z}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=r("./app/components/gridEditable/index.tsx"),a=r("./app/constants/globalSelectionHeader.tsx"),s=r("./app/locale.tsx"),o=r("./app/utils/discover/eventView.tsx"),i=r("./app/utils/queryString.tsx"),l=r("./app/utils/tokenizeSearch.tsx"),c=r("./app/views/performance/landing/utils.tsx"),p=r("./app/views/performance/vitalDetail/utils.tsx");const u="24h",d=["transaction","project","tpm","p50","p95","failure rate","apdex","users","user misery"];let m;function h(e){return[{tooltip:x(e,m.APDEX_NEW),value:"apdex()",label:(0,s.t)("Apdex")},{tooltip:x(e,m.TPM),value:"tpm()",label:(0,s.t)("Transactions Per Minute")},{tooltip:x(e,m.FAILURE_RATE),value:"failure_rate()",label:(0,s.t)("Failure Rate")},{tooltip:x(e,m.P50),value:"p50()",label:(0,s.t)("p50 Duration")},{tooltip:x(e,m.P95),value:"p95()",label:(0,s.t)("p95 Duration")},{tooltip:x(e,m.P99),value:"p99()",label:(0,s.t)("p99 Duration")}]}function f(e){return[{tooltip:x(e,m.LCP),value:"p75(lcp)",label:(0,s.t)("LCP p75"),field:"p75(measurements.lcp)",isLeftDefault:!0,backupOption:{tooltip:x(e,m.FCP),value:"p75(fcp)",label:(0,s.t)("FCP p75"),field:"p75(measurements.fcp)"}},{tooltip:x(e,m.DURATION_DISTRIBUTION),value:"lcp_distribution",label:(0,s.t)("LCP Distribution"),field:"measurements.lcp",isDistribution:!0,isRightDefault:!0,backupOption:{tooltip:x(e,m.DURATION_DISTRIBUTION),value:"fcp_distribution",label:(0,s.t)("FCP Distribution"),field:"measurements.fcp",isDistribution:!0}},{tooltip:x(e,m.TPM),value:"tpm()",label:(0,s.t)("Transactions Per Minute"),field:"tpm()"}]}function g(e){return[{tooltip:x(e,m.P50),value:"p50()",label:(0,s.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:x(e,m.P75),value:"p75()",label:(0,s.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:x(e,m.P95),value:"p95()",label:(0,s.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:x(e,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,s.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0}]}function _(e){return[{tooltip:x(e,m.P50),value:"p50()",label:(0,s.t)("Duration p50"),field:"p50(transaction.duration)"},{tooltip:x(e,m.P75),value:"p75()",label:(0,s.t)("Duration p75"),field:"p75(transaction.duration)",isLeftDefault:!0},{tooltip:x(e,m.P95),value:"p95()",label:(0,s.t)("Duration p95"),field:"p95(transaction.duration)"},{tooltip:x(e,m.P99),value:"p99()",label:(0,s.t)("Duration p99"),field:"p99(transaction.duration)"},{tooltip:x(e,m.TPM),value:"tpm()",label:(0,s.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:x(e,m.FAILURE_RATE),value:"failure_rate()",label:(0,s.t)("Failure Rate"),field:"failure_rate()"},{tooltip:x(e,m.DURATION_DISTRIBUTION),value:"duration_distribution",label:(0,s.t)("Duration Distribution"),field:"transaction.duration",isDistribution:!0,isRightDefault:!0},{tooltip:x(e,m.APDEX),value:"apdex()",label:(0,s.t)("Apdex"),field:"apdex()"}]}function y(e){return[{tooltip:x(e,m.APP_START_COLD),value:"p50(measurements.app_start_cold)",label:(0,s.t)("Cold Start Duration p50"),field:"p50(measurements.app_start_cold)"},{tooltip:x(e,m.APP_START_COLD),value:"p75(measurements.app_start_cold)",label:(0,s.t)("Cold Start Duration p75"),field:"p75(measurements.app_start_cold)",isLeftDefault:!0},{tooltip:x(e,m.APP_START_COLD),value:"p95(measurements.app_start_cold)",label:(0,s.t)("Cold Start Duration p95"),field:"p95(measurements.app_start_cold)"},{tooltip:x(e,m.APP_START_COLD),value:"p99(measurements.app_start_cold)",label:(0,s.t)("Cold Start Duration p99"),field:"p99(measurements.app_start_cold)"},{tooltip:x(e,m.DURATION_DISTRIBUTION),value:"app_start_cold_distribution",label:(0,s.t)("Cold Start Distribution"),field:"measurements.app_start_cold",isDistribution:!0,isRightDefault:!0},{tooltip:x(e,m.APP_START_WARM),value:"p50(measurements.app_start_warm)",label:(0,s.t)("Warm Start Duration p50"),field:"p50(measurements.app_start_warm)"},{tooltip:x(e,m.APP_START_WARM),value:"p75(measurements.app_start_warm)",label:(0,s.t)("Warm Start Duration p75"),field:"p75(measurements.app_start_warm)"},{tooltip:x(e,m.APP_START_WARM),value:"p95(measurements.app_start_warm)",label:(0,s.t)("Warm Start Duration p95"),field:"p95(measurements.app_start_warm)"},{tooltip:x(e,m.APP_START_WARM),value:"p99(measurements.app_start_warm)",label:(0,s.t)("Warm Start Duration p99"),field:"p99(measurements.app_start_warm)"},{tooltip:x(e,m.DURATION_DISTRIBUTION),value:"app_start_warm_distribution",label:(0,s.t)("Warm Start Distribution"),field:"measurements.app_start_warm",isDistribution:!0},{tooltip:x(e,m.TPM),value:"tpm()",label:(0,s.t)("Transactions Per Minute"),field:"tpm()"},{tooltip:x(e,m.FAILURE_RATE),value:"failure_rate()",label:(0,s.t)("Failure Rate"),field:"failure_rate()"}]}!function(e){e.APDEX="apdex",e.TPM="tpm",e.THROUGHPUT="throughput",e.FAILURE_RATE="failureRate",e.P50="p50",e.P75="p75",e.P95="p95",e.P99="p99",e.LCP="lcp",e.FCP="fcp",e.USER_MISERY="userMisery",e.STATUS_BREAKDOWN="statusBreakdown",e.DURATION_DISTRIBUTION="durationDistribution",e.USER_MISERY_NEW="userMiseryNew",e.APDEX_NEW="apdexNew",e.APP_START_COLD="appStartCold",e.APP_START_WARM="appStartWarm",e.SLOW_FRAMES="slowFrames",e.FROZEN_FRAMES="frozenFrames",e.STALL_PERCENTAGE="stallPercentage"}(m||(m={}));const v={apdex:()=>(0,s.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to performance settings."),tpm:()=>(0,s.t)("TPM is the number of recorded transaction events per minute."),throughput:()=>(0,s.t)("Throughput is the number of recorded transaction events per minute."),failureRate:()=>(0,s.t)("Failure rate is the percentage of recorded transactions that had a known and unsuccessful status."),p50:()=>(0,s.t)("p50 indicates the duration that 50% of transactions are faster than."),p75:()=>(0,s.t)("p75 indicates the duration that 75% of transactions are faster than."),p95:()=>(0,s.t)("p95 indicates the duration that 95% of transactions are faster than."),p99:()=>(0,s.t)("p99 indicates the duration that 99% of transactions are faster than."),lcp:()=>(0,s.t)("Largest contentful paint (LCP) is a web vital meant to represent user load times"),fcp:()=>(0,s.t)("First contentful paint (FCP) is a web vital meant to represent user load times"),userMisery:e=>(0,s.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x your organization's apdex threshold of %sms.",e.apdexThreshold),statusBreakdown:()=>(0,s.t)("The breakdown of transaction statuses. This may indicate what type of failure it is."),durationDistribution:()=>(0,s.t)("Distribution buckets counts of transactions at specifics times for your current date range"),userMiseryNew:()=>(0,s.t)("User Misery is a score that represents the number of unique users who have experienced load times 4x the project's configured threshold. Adjust project threshold in project performance settings."),apdexNew:()=>(0,s.t)("Apdex is the ratio of both satisfactory and tolerable response times to all response times. To adjust the tolerable threshold, go to project performance settings."),appStartCold:()=>(0,s.t)("Cold start is a measure of the application start up time from scratch."),appStartWarm:()=>(0,s.t)("Warm start is a measure of the application start up time while still in memory."),slowFrames:()=>(0,s.t)("The count of the number of slow frames in the transaction."),frozenFrames:()=>(0,s.t)("The count of the number of frozen frames in the transaction."),stallPercentage:()=>(0,s.t)("The percentage of the transaction duration in which the application is in a stalled state.")};function x(e,t){return v.hasOwnProperty(t)?v[t](e):""}function b(e,t,r,p=!1){const d=function(e,t){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,s.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,i.ro)(r.sort,"-tpm");const d=(0,i.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const h=o.ZP.fromNewQueryWithLocation(c,t);return h.additionalConditions.addFilterValues("event.type",["transaction"]),h}(0,t);if(p)return d;const m=(0,c.Q_)(t,r,d);switch(null==m?void 0:m.field){case c.BY.FRONTEND_PAGELOAD:return function(e,t){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,s.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","tpm()","p75(measurements.fcp)","p75(measurements.lcp)","p75(measurements.fid)","p75(measurements.cls)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,i.ro)(r.sort,"-tpm");const d=(0,i.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const h=o.ZP.fromNewQueryWithLocation(c,t);return h.additionalConditions.addFilterValues("event.type",["transaction"]).addFilterValues("transaction.op",["pageload"]),h}(0,t);case c.BY.FRONTEND_OTHER:return function(e,t){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,s.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","tpm()","p50(transaction.duration)","p75(transaction.duration)","p95(transaction.duration)","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,i.ro)(r.sort,"-tpm");const d=(0,i.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const h=o.ZP.fromNewQueryWithLocation(c,t);return h.additionalConditions.addFilterValues("event.type",["transaction"]).addFilterValues("!transaction.op",["pageload"]),h}(0,t);case c.BY.BACKEND:return function(e,t){const{query:r}=t,a=r.start&&r.end,c={id:void 0,name:(0,s.t)("Performance"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","transaction.op","http.method","tpm()","p50()","p95()","failure_rate()","apdex()","count_unique(user)","count_miserable(user)","user_misery()"],version:2},p=Array(c.fields.length).fill(n.z7);p[c.fields.length-1]="110",c.widths=p,r.statsPeriod||a||(c.range=u),c.orderby=(0,i.ro)(r.sort,"-tpm");const d=(0,i.ro)(r.query,""),m=new l.MY(d);m.hasFilter("transaction.duration")||m.setFilterValues("transaction.duration",["<15m"]),m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const h=o.ZP.fromNewQueryWithLocation(c,t);return h.additionalConditions.addFilterValues("event.type",["transaction"]),h}(0,t);case c.BY.MOBILE:return function(e,t,r,c){const{query:p}=t,d=["team_key_transaction","transaction","project","transaction.op","tpm()","p75(measurements.app_start_cold)","p75(measurements.app_start_warm)","p75(measurements.frames_slow_rate)","p75(measurements.frames_frozen_rate)"],m=c.project;if(m.length>0&&m[0]!==a.mP){const e=r.filter((e=>m.includes(parseInt(e.id,10))));e.length>0&&e.every((e=>"react-native"===e.platform))&&(d.pop(),d.pop(),d.push("p75(measurements.stall_percentage)"))}const h=p.start&&p.end,f={id:void 0,name:(0,s.t)("Performance"),query:"event.type:transaction",projects:[],fields:[...d,"count_unique(user)","count_miserable(user)","user_misery()"],version:2},g=Array(f.fields.length).fill(n.z7);g[f.fields.length-1]="110",f.widths=g,p.statsPeriod||h||(f.range=u),f.orderby=(0,i.ro)(p.sort,"-tpm");const _=(0,i.ro)(p.query,""),y=new l.MY(_);y.hasFilter("transaction.duration")||y.setFilterValues("transaction.duration",["<15m"]),y.freeText.length>0&&(y.setFilterValues("transaction",["*".concat(y.freeText.join(" "),"*")],!1),y.freeText=[]),f.query=y.formatString();const v=o.ZP.fromNewQueryWithLocation(f,t);return v.additionalConditions.addFilterValues("event.type",["transaction"]),v}(0,t,r,d);default:return d}}function Z(e,t){const{query:r}=t,n=(0,p.iF)(t),a=r.start&&r.end,c={id:void 0,name:(0,s.t)("Vitals Performance Details"),query:"event.type:transaction",projects:[],fields:["team_key_transaction","transaction","project","count_unique(user)","count()","p50(".concat(n,")"),"p75(".concat(n,")"),"p95(".concat(n,")"),(0,p.Ve)(n),(0,p.q4)(n)],version:2};r.statsPeriod||a||(c.range=u),c.orderby=(0,i.ro)(r.sort,"-count");const d=(0,i.ro)(r.query,""),m=new l.MY(d);m.freeText.length>0&&(m.setFilterValues("transaction",["*".concat(m.freeText.join(" "),"*")],!1),m.freeText=[]),c.query=m.formatString();const h=o.ZP.fromNewQueryWithLocation(c,t);return h.additionalConditions.addFilterValues("event.type",["transaction"]).addFilterValues("has",[n]),h}},"./app/views/performance/landing/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{Y1:()=>p,V:()=>u,BY:()=>d,Lx:()=>m,Q_:()=>h,NJ:()=>f,Oo:()=>g,hv:()=>_,Gd:()=>y});var n=r("../node_modules/react-router/es/index.js"),a=r("./app/locale.tsx"),s=r("./app/utils/formatters.tsx"),o=r("./app/utils/queryString.tsx"),i=r("./app/utils/tokenizeSearch.tsx"),l=r("./app/views/performance/data.tsx"),c=r("./app/views/performance/utils.tsx");const p="left",u="right";let d;!function(e){e.ALL="all",e.FRONTEND_PAGELOAD="frontend_pageload",e.FRONTEND_OTHER="frontend_other",e.BACKEND="backend",e.MOBILE="mobile"}(d||(d={}));const m=[{label:"All Transactions",field:d.ALL},{label:"Frontend (Pageload)",field:d.FRONTEND_PAGELOAD},{label:"Frontend (Other)",field:d.FRONTEND_OTHER},{label:"Backend",field:d.BACKEND},{label:"Mobile",field:d.MOBILE,isShown:e=>e.features.includes("performance-mobile-vitals"),badge:"new"}];function h(e,t,r){var n;const a=(0,o.ro)(null==e||null===(n=e.query)||void 0===n?void 0:n.landingDisplay),s=m.find((({field:e})=>e===a));if(s)return s;const i=g(t,r);return m.find((({field:e})=>e===i))||m[0]}function f(e,t){const r={...t.query};delete r[p],delete r[u];const a=(0,o.ro)(t.query.query,""),s=new i.MY(a);s.removeFilter("transaction.op"),n.browserHistory.push({pathname:t.pathname,query:{...r,query:s.formatString(),landingDisplay:e}})}function g(e,t){var r;if(!t)return d.ALL;const n=t.project;return null!==(r={[c.iy.ANY]:d.ALL,[c.iy.FRONTEND]:d.FRONTEND_PAGELOAD,[c.iy.BACKEND]:d.BACKEND,[c.iy.MOBILE]:d.MOBILE}[(0,c.Bh)(e,n)])&&void 0!==r?r:d.ALL}const _=e=>({"p75(transaction.duration)":{title:(0,a.t)("Duration (p75)"),tooltip:(0,l.$r)(e,l.V$.P75),formatter:e=>(0,s.g9)(e/1e3,e>=1e3?3:0,!0)},"tpm()":{title:(0,a.t)("Throughput"),tooltip:(0,l.$r)(e,l.V$.THROUGHPUT),formatter:s.Du},"failure_rate()":{title:(0,a.t)("Failure Rate"),tooltip:(0,l.$r)(e,l.V$.FAILURE_RATE),formatter:e=>(0,s.rl)(e,2)},"apdex()":{title:(0,a.t)("Apdex"),tooltip:(0,l.$r)(e,l.V$.APDEX_NEW),formatter:e=>(0,s.$1)(e,4)},"p75(measurements.frames_slow_rate)":{title:(0,a.t)("Slow Frames (p75)"),tooltip:(0,l.$r)(e,l.V$.SLOW_FRAMES),formatter:e=>(0,s.rl)(e,2)},"p75(measurements.frames_frozen_rate)":{title:(0,a.t)("Frozen Frames (p75)"),tooltip:(0,l.$r)(e,l.V$.FROZEN_FRAMES),formatter:e=>(0,s.rl)(e,2)},"p75(measurements.app_start_cold)":{title:(0,a.t)("Cold Start (p75)"),tooltip:(0,l.$r)(e,l.V$.APP_START_COLD),formatter:e=>(0,s.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.app_start_warm)":{title:(0,a.t)("Warm Start (p75)"),tooltip:(0,l.$r)(e,l.V$.APP_START_WARM),formatter:e=>(0,s.g9)(e/1e3,e>=1e3?3:0,!0)},"p75(measurements.stall_percentage)":{title:(0,a.t)("Stall Percentage (p75)"),tooltip:(0,l.$r)(e,l.V$.STALL_PERCENTAGE),formatter:e=>(0,s.rl)(e,2)}});function y(e,t){const r=e.find((e=>e.isLeftDefault))||e[0],n=e.find((e=>e.isRightDefault))||e[1];return{leftAxis:e.find((e=>e.value===t.query[p]))||r,rightAxis:e.find((e=>e.value===t.query[u]))||n}}},"./app/views/performance/trends/index.tsx":(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Ye});var n=r("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=r("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js")),o=r("./app/components/lightWeightNoProjectMessage.tsx"),i=r("./app/components/sentryDocumentTitle.tsx"),l=r("./app/locale.tsx"),c=r("./app/styles/organization.tsx"),p=r("./app/utils/withApi.tsx"),u=r("./app/utils/withGlobalSelection.tsx"),d=r("./app/utils/withOrganization.tsx"),m=r("./app/utils/withProjects.tsx"),h=r("./app/views/performance/data.tsx"),f=(r("../node_modules/core-js/modules/es.string.trim.js"),r("../node_modules/react-router/es/index.js")),g=r("./app/components/alert.tsx"),_=r("./app/components/breadcrumbs.tsx"),y=r("./app/components/dropdownControl.tsx"),v=r("./app/components/events/searchBar.tsx"),x=r("./app/components/layouts/thirds.tsx"),b=r("./app/components/organizations/globalSelectionHeader/index.tsx"),Z=r("./app/constants/index.tsx"),w=r("./app/icons/iconFlag.tsx"),T=r("./app/styles/space.tsx"),P=r("./app/utils/analytics.tsx"),S=r("./app/utils/discover/fields.tsx"),j=r("./app/utils/queryString.tsx"),D=r("./app/utils/tokenizeSearch.tsx"),E=r("./app/views/performance/utils.tsx"),C=r("./app/components/button.tsx"),R=r("./app/components/charts/styles.tsx"),F=r("./app/components/count.tsx"),L=r("./app/components/dropdownLink.tsx"),A=r("./app/components/duration.tsx"),N=r("./app/components/emptyStateWarning.tsx"),O=r("./app/components/idBadge/index.tsx"),q=r("./app/components/links/link.tsx"),I=r("./app/components/loadingIndicator.tsx"),k=r("./app/components/menuItem.tsx"),M=r("./app/components/pagination.tsx"),V=r("./app/components/panels/index.tsx"),z=r("./app/components/questionTooltip.tsx"),B=r("./app/components/radio.tsx"),W=r("./app/components/tooltip.tsx"),U=r("./app/icons/index.tsx"),G=r("./app/styles/overflowEllipsis.tsx"),H=r("./app/utils/formatters.tsx"),X=r("./app/utils/performance/trends/trendsDiscoverQuery.tsx"),Y=r("./app/views/settings/components/forms/controls/radioGroup.tsx"),$=r("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),Q=r("./app/views/performance/transactionSummary/utils.tsx"),K=r("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),J=r("./app/components/charts/chartZoom.tsx"),ee=r("./app/components/charts/lineChart.tsx"),te=r("./app/components/charts/releaseSeries.tsx"),re=r("./app/components/charts/transitionChart.tsx"),ne=r("./app/components/charts/transparentLoadingMask.tsx"),ae=r("./app/components/organizations/globalSelectionHeader/getParams.tsx"),se=r("./app/utils/dates.tsx"),oe=r("./app/utils/discover/charts.tsx"),ie=r("./app/utils/getDynamicText.tsx"),le=r("./app/views/releases/detail/overview/chart/releaseChartControls.tsx"),ce=r("./app/views/performance/trends/utils.tsx"),pe=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function ue(e){return{right:10,top:0,itemGap:12,align:"left",data:[{name:"Baseline",icon:"path://M180 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z, M810 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40zm, M1440 1000 l0 -40 200 0 200 0 0 40 0 40 -200 0 -200 0 0 -40z"},{name:"Releases",icon:"line"},{name:e,icon:"line"}]}}class de extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"handleLegendSelectChanged",(e=>{const{location:t,trendChangeType:r}=this.props,{selected:n}=e,a=Object.keys(n).filter((e=>!n[e])),s={...t.query};s[(0,ce.P4)(r)]=a;const o={...t,query:s};f.browserHistory.push(o)}))}render(){var e,t;const r=this.props,{theme:n,trendChangeType:a,router:s,statsPeriod:o,project:i,environment:c,transaction:p,statsData:u,isLoading:d,location:m,projects:h}=r,f=ce.es[a||""],g=u&&null!=p&&p.project&&null!=p&&p.transaction?u[[p.project,p.transaction].join(",")]:void 0,_=null!==(e=null==g?void 0:g.data)&&void 0!==e?e:[],y=(0,ce.CE)(m),v=(0,ce.IO)(m),x=(0,ce.ed)(y.field,v.column),b=function(e,t){return[{seriesName:t||"Current",data:e.map((([e,t])=>({name:1e3*e,value:t.reduce(((e,{count:t})=>e+t),0)})))}]}(_,x),{smoothedResults:Z,minValue:w,maxValue:T}=(0,ce.vq)(b,x),P=r.start?(0,se.hC)(r.start):null,S=r.end?(0,se.hC)(r.end):null,{utc:D}=(0,ae.Q)(m.query),E=(0,j.qP)(m.query[(0,ce.P4)(a)]).reduce(((e,t)=>(e[t]=!1,e)),{}),C={...ue(x),selected:E},R=d,F=d,L=parseInt((null===(t=h.find((({slug:e})=>(null==p?void 0:p.project)===e)))||void 0===t?void 0:t.id)||"",10),A=Math.max(T,(null==p?void 0:p.aggregate_range_2)||0,(null==p?void 0:p.aggregate_range_1)||0),N=Math.min(w,(null==p?void 0:p.aggregate_range_1)||Number.MAX_SAFE_INTEGER,(null==p?void 0:p.aggregate_range_2)||Number.MAX_SAFE_INTEGER),O=.1*(A-N),q={showTransactions:a,yAxis:le.B2.COUNT_DURATION},I={tooltip:{valueFormatter:(e,t)=>(0,oe.CX)(e,t)},yAxis:{min:Math.max(0,N-O),max:A+O,axisLabel:{color:n.chartLabel,formatter:e=>(0,oe.gu)(e,"p50()")}}};return(0,pe.tZ)(J.Z,{router:s,period:o,start:P,end:S,utc:"true"===D,children:e=>{const t=Z?Z.map((e=>({...e,color:f.default,lineStyle:{opacity:1}}))):[],r=function(e,t,r,n){if(!(n&&t.length&&t[0].data&&t[0].data.length))return[];const a=parseInt(t[0].data[0].name,0),s=parseInt(t[0].data.slice(-1)[0].name,0);if(s<a)return[];const o={data:[],color:e.textColor,markLine:{data:[],label:{},lineStyle:{normal:{color:e.textColor,type:"dashed",width:1}},symbol:["none","none"],tooltip:{show:!1}},seriesName:"Baseline"},i={fontSize:11,show:!0},c={...o,markLine:{...o.markLine},seriesName:"Baseline"},p={...o,markLine:{...o.markLine},seriesName:"Baseline"},u={...o,markLine:{...o.markLine},seriesName:"Period split"},d=.5*(s-a)+a;return c.markLine.data=[[{value:"Past",coord:[a,n.aggregate_range_1]},{coord:[d,n.aggregate_range_1]}]],c.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",'<span class="tooltip-label"><strong>'.concat((0,l.t)("Past Baseline"),"</strong></span>"),(0,oe.CX)(n.aggregate_range_1,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},p.markLine.data=[[{value:"Present",coord:[d,n.aggregate_range_2]},{coord:[s,n.aggregate_range_2]}]],p.markLine.tooltip={formatter:()=>['<div class="tooltip-series tooltip-series-solo">',"<div>",'<span class="tooltip-label"><strong>'.concat((0,l.t)("Present Baseline"),"</strong></span>"),(0,oe.CX)(n.aggregate_range_2,"p50()"),"</div>","</div>",'<div class="tooltip-arrow"></div>'].join("")},u.markLine={data:[{value:"Previous Period / This Period",xAxis:d}],label:{show:!1},lineStyle:{normal:{color:e.textColor,type:"solid",width:2}},symbol:["none","none"],tooltip:{show:!1}},c.markLine.label={...i,formatter:"Past",position:"insideStartBottom"},p.markLine.label={...i,formatter:"Present",position:"insideEndBottom"},[c,p,u]}(n,Z||[],0,p);return(0,pe.tZ)(te.Z,{start:P,end:S,queryExtra:q,period:o,utc:"true"===D,projects:isNaN(L)?i:[L],environments:c,memoized:!0,children:({releaseSeries:n})=>(0,pe.BX)(re.Z,{loading:R,reloading:F,children:[(0,pe.tZ)(ne.Z,{visible:F}),(0,ie.Z)({value:(0,pe.tZ)(ee.Z,{...e,...I,onLegendSelectChanged:this.handleLegendSelectChanged,series:[...t,...n,...r],seriesOptions:{showSymbol:!1},legend:C,toolBox:{show:!1},grid:{left:"10px",right:"10px",top:"40px",bottom:"0px"}}),fixed:"Duration Chart"})]})})}})}}de.displayName="Chart";const me=(0,K.b)((0,p.Z)((0,f.withRouter)(de)));var he,fe=r("./app/views/performance/trends/types.tsx");function ge(e,t,r){const n=(0,ce.j_)(t),a=(0,j.ro)(e.query[n]);if(!r)return;return r.find((e=>"".concat(e.transaction,"-").concat(e.project)===a))||(r.length>0?r[0]:void 0)}function _e(e,t){return function(r){const n=(0,ce.j_)(t),a={...e.query};r?a[n]=r?"".concat(r.transaction,"-").concat(r.project):void 0:delete a[n],f.browserHistory.push({pathname:e.pathname,query:a})}}function ye(e,t,r){const n=(0,ce.IO)(e).column,a=(0,j.ro)(e.query.query),s=new D.MY(null!=a?a:""),o=s.getFilterValues(n),i=r===he.GREATER_THAN_EQUALS?">":"<";o&&o.forEach((e=>{(e.startsWith(r)||e.startsWith(i))&&s.removeFilterValue(n,e)})),s.addFilterValues(n,["".concat(r).concat(t)]);const l=s.formatString();f.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(l).trim()}})}function ve(e){const{api:t,location:r,trendChangeType:n,previousTrendFunction:a,previousTrendColumn:o,organization:i,projects:c,setError:p}=e,u=e.trendView.clone(),d=function(e){switch(e){case fe.ER.IMPROVED:return(0,l.t)("Most Improved Transactions");case fe.ER.REGRESSION:return(0,l.t)("Most Regressed Transactions");default:throw new Error("No trend type passed")}}(n);(0,ce.kM)(u,r,n);const m=(e=>(t,r,n)=>{const a={};e===fe.ER.IMPROVED?a.improvedCursor=t:e===fe.ER.REGRESSION&&(a.regressionCursor=t),delete n[(0,ce.j_)(e)],f.browserHistory.push({pathname:r,query:{...n,...a}})})(n),h=(0,j.ro)(r.query[ce.vt[n]]);return(0,pe.tZ)(X.ZP,{eventView:u,orgSlug:i.slug,location:r,trendChangeType:n,cursor:h,limit:5,setError:p,children:({isLoading:p,trendsData:h,pageLinks:f})=>{const g=(0,ce.CE)(r),_=(0,ce.IO)(r),y=(0,ce.RP)(h&&h.events&&h.events.data||[]),v=ge(r,n,y),x=(null==h?void 0:h.stats)||{},b=y&&y.slice?y.slice(0,5):[],Z=p&&a?a:g.field,w=p&&o?o:_.column,T=(0,l.t)("This compares the baseline (%s) of the past with the present.",g.legendLabel);return(0,pe.BX)(Te,{children:[(0,pe.BX)(Pe,{children:[(0,pe.BX)(je,{children:[d,(0,pe.tZ)(z.Z,{size:"sm",position:"top",title:T})]}),p?(0,pe.tZ)(I.Z,{style:{margin:"237px auto"}}):(0,pe.tZ)(s.Fragment,{children:b.length?(0,pe.BX)(s.Fragment,{children:[(0,pe.tZ)(Se,{children:(0,pe.tZ)(me,{statsData:x,query:u.query,project:u.project,environment:u.environment,start:u.start,end:u.end,statsPeriod:u.statsPeriod,transaction:v,isLoading:p,...e})}),b.map(((a,s)=>(0,pe.tZ)(xe,{api:t,currentTrendFunction:Z,currentTrendColumn:w,trendView:e.trendView,organization:i,transaction:a,index:s,trendChangeType:n,transactions:b,location:r,projects:c,statsData:x,handleSelectTransaction:_e(r,n)},a.transaction)))]}):(0,pe.tZ)(Ce,{small:!0,children:(0,l.t)("No results")})})]}),(0,pe.tZ)(M.Z,{pageLinks:f,onCursor:m})]})}})}function xe(e){const{transaction:t,transactions:r,trendChangeType:n,currentTrendFunction:a,currentTrendColumn:o,index:i,location:c,projects:p,handleSelectTransaction:u}=e,d=ce.es[n].default,m=ge(c,n,r)===t,h=p.find((({slug:e})=>e===t.project)),g=t.aggregate_range_2,_=t.aggregate_range_1,y=(0,H.rl)(Math.abs(t.trend_percentage-1),0),v=(0,H.g9)(_/1e3,_<1e3&&_>10?0:2),x=(0,H.g9)(g/1e3,g<1e3&&g>10?0:2),b=(0,l.t)("Over this period, the %s for %s has %s %s from %s to %s",a,o,n===fe.ER.IMPROVED?(0,l.t)("decreased"):(0,l.t)("increased"),y,v,x),Z=n===fe.ER.IMPROVED?_:g,w=n===fe.ER.IMPROVED?v:x;return(0,pe.BX)(Re,{"data-test-id":"trends-list-item-"+n,children:[(0,pe.tZ)(Fe,{color:d,children:(0,pe.tZ)(W.Z,{title:(0,pe.BX)(Ie,{children:[(0,pe.tZ)("span",{children:(0,l.t)("Total Events")}),(0,pe.BX)("span",{children:[(0,pe.tZ)(F.Z,{value:t.count_range_1}),(0,pe.tZ)(ke,{direction:"right",size:"xs"}),(0,pe.tZ)(F.Z,{value:t.count_range_2})]})]}),disableForVisualTest:!0,children:(0,pe.tZ)(Y.V,{index:i,role:"radio",children:(0,pe.tZ)(B.Z,{checked:m,onChange:()=>u(t)})})})}),(0,pe.tZ)(we,{...e}),(0,pe.tZ)(Oe,{children:(0,pe.tZ)(W.Z,{title:b,children:(0,pe.BX)(s.Fragment,{children:[n===fe.ER.REGRESSION?"+":"",(0,H.rl)(t.trend_percentage-1,0)]})})}),(0,pe.BX)(L.Z,{caret:!1,anchorRight:!0,title:(0,pe.tZ)(De,{size:"xsmall",icon:(0,pe.tZ)(U.YR,{"data-test-id":"trends-item-action",size:"xs"})}),children:[(0,pe.tZ)(k.Z,{onClick:()=>ye(c,Z,he.LESS_THAN_EQUALS),children:(0,pe.tZ)(Ee,{children:(0,l.t)("Show ≤ %s",w)})}),(0,pe.tZ)(k.Z,{onClick:()=>ye(c,Z,he.GREATER_THAN_EQUALS),children:(0,pe.tZ)(Ee,{children:(0,l.t)("Show ≥ %s",w)})}),(0,pe.tZ)(k.Z,{onClick:()=>function(e,t){const r=(0,j.ro)(e.query.query),n=new D.MY(null!=r?r:"");n.addFilterValues("!transaction",[t]);const a=n.formatString();f.browserHistory.push({pathname:e.pathname,query:{...e.query,query:String(a).trim()}})}(c,t.transaction),children:(0,pe.tZ)(Ee,{children:(0,l.t)("Hide from list")})})]}),(0,pe.BX)(Ae,{children:[h&&(0,pe.tZ)(W.Z,{title:t.project,children:(0,pe.tZ)(O.Z,{avatarSize:16,project:h,hideName:!0})}),(0,pe.tZ)(be,{...e})]}),(0,pe.tZ)(qe,{color:d,children:(0,pe.tZ)(Ze,{...e})})]})}!function(e){e.GREATER_THAN_EQUALS=">=",e.LESS_THAN_EQUALS="<="}(he||(he={})),ve.displayName="ChangedTransactions",xe.displayName="TrendsListItem";const be=({transaction:e})=>{const{fromSeconds:t,toSeconds:r,showDigits:n}=(0,ce.Kt)(e.aggregate_range_1,e.aggregate_range_2);return(0,pe.BX)(Ne,{children:[(0,pe.tZ)(A.Z,{seconds:t,fixedDigits:n?1:0,abbreviation:!0}),(0,pe.tZ)(ke,{direction:"right",size:"xs"}),(0,pe.tZ)(A.Z,{seconds:r,fixedDigits:n?1:0,abbreviation:!0})]})};be.displayName="CompareDurations";const Ze=({transaction:e,trendChangeType:t})=>{const{seconds:r,fixedDigits:n,changeLabel:a}=(0,ce.wx)(e.trend_difference,t);return(0,pe.BX)("span",{children:[(0,pe.tZ)(A.Z,{seconds:r,fixedDigits:n,abbreviation:!0})," ",a]})};Ze.displayName="ValueDelta";const we=e=>{const{organization:t,trendView:r,transaction:n,projects:a,currentTrendFunction:s,currentTrendColumn:o}=e,i=r.clone(),l=(0,ce._H)(n,a),c=(0,Q.e1)({orgSlug:t.slug,transaction:String(n.transaction),query:i.generateQueryStringObject(),projectID:l,display:$.D.TREND,trendFunction:s,trendColumn:o});return(0,pe.tZ)(Le,{to:c,children:n.transaction})};we.displayName="TransactionSummaryLink";const Te=(0,a.Z)("div",{target:"e11bn3w115"})({name:"1fttcpj",styles:"display:flex;flex-direction:column"}),Pe=(0,a.Z)(V.s_,{target:"e11bn3w114"})({name:"154zghl",styles:"margin:0;flex-grow:1"}),Se=(0,a.Z)("div",{target:"e11bn3w113"})("padding:",(0,T.Z)(3),";"),je=(0,a.Z)(R.ws,{target:"e11bn3w112"})("border-radius:",(e=>e.theme.borderRadius),";margin:",(0,T.Z)(2)," ",(0,T.Z)(3),";"),De=(0,a.Z)(C.ZP,{target:"e11bn3w111"})({name:"1989ovb",styles:"vertical-align:middle"}),Ee=(0,a.Z)("div",{target:"e11bn3w110"})("white-space:nowrap;color:",(e=>e.theme.textColor),";"),Ce=(0,a.Z)(N.Z,{target:"e11bn3w19"})({name:"1t1oqhu",styles:"min-height:300px;justify-content:center"}),Re=(0,a.Z)("div",{target:"e11bn3w18"})("display:grid;grid-template-columns:24px auto 100px 30px;grid-template-rows:repeat(2, auto);grid-column-gap:",(0,T.Z)(1),";border-top:1px solid ",(e=>e.theme.border),";padding:",(0,T.Z)(1)," ",(0,T.Z)(2),";"),Fe=(0,a.Z)("div",{target:"e11bn3w17"})("grid-row:1/3;input{cursor:pointer;}input:checked::after{background-color:",(e=>e.color),";}"),Le=(0,a.Z)(q.Z,{target:"e11bn3w16"})("font-size:",(e=>e.theme.fontSizeMedium),";margin-right:",(0,T.Z)(1),";",G.Z,";"),Ae=(0,a.Z)("div",{target:"e11bn3w15"})("display:flex;align-items:center;font-size:",(e=>e.theme.fontSizeSmall),";"),Ne=(0,a.Z)("span",{target:"e11bn3w14"})("color:",(e=>e.theme.gray300),";margin:0 ",(0,T.Z)(1),";"),Oe=(0,a.Z)("div",{target:"e11bn3w13"})("text-align:right;font-size:",(e=>e.theme.fontSizeMedium),";"),qe=(0,a.Z)("div",{target:"e11bn3w12"})("color:",(e=>e.color),";text-align:right;font-size:",(e=>e.theme.fontSizeSmall),";"),Ie=(0,a.Z)("div",{target:"e11bn3w11"})({name:"zigog8",styles:"display:flex;flex-direction:column;align-items:center"}),ke=(0,a.Z)(U.CC,{target:"e11bn3w10"})("margin:0 ",(0,T.Z)(1),";"),Me=(0,p.Z)((0,m.Z)((0,d.Z)(ve)));class Ve extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{}),(0,n.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,r=(0,ce.Ws)();f.browserHistory.push({pathname:t.pathname,query:{...t.query,...r,query:String(e).trim()||void 0}})})),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})})),(0,n.Z)(this,"handleTrendFunctionChange",(e=>{const{organization:t,location:r}=this.props,n={};Object.values(fe.ER).forEach((e=>{const t=(0,ce.j_)(e);n[t]=void 0})),(0,P.ec)({eventKey:"performance_views.trends.change_function",eventName:"Performance Views: Change Function",organization_id:parseInt(t.id,10),function_name:e}),this.setState({previousTrendFunction:(0,ce.CE)(r).field});const a=(0,ce.Ws)();f.browserHistory.push({pathname:r.pathname,query:{...r.query,...n,...a,trendFunction:e}})})),(0,n.Z)(this,"handleParameterChange",(e=>{const{organization:t,location:r}=this.props,n=(0,ce.Ws)();(0,P.ec)({eventKey:"performance_views.trends.change_parameter",eventName:"Performance Views: Change Parameter",organization_id:parseInt(t.id,10),parameter_name:e}),f.browserHistory.push({pathname:r.pathname,query:{...r.query,...n,trendParameter:e}})}))}renderError(){const{error:e}=this.state;return e?(0,pe.tZ)(g.Z,{type:"error",icon:(0,pe.tZ)(w.G,{size:"md"}),children:e}):null}getPerformanceLink(){const{location:e}=this.props,t={...e.query},r=(0,j.ro)(e.query.query,""),n=new D.MY(r);return n.removeFilter("tpm()"),n.removeFilter("confidence()"),n.removeFilter("transaction.duration"),t.query=n.formatString(),{pathname:(0,E.de)(this.props.organization),query:t}}render(){const{organization:e,eventView:t,location:r}=this.props,{previousTrendFunction:n}=this.state,a=t.clone();(0,ce.iF)(a,r);const s=(0,S.db)(e,[{field:"absolute_correlation()"},{field:"trend_percentage()"},{field:"trend_difference()"},{field:"count_percentage()"},{field:"tpm()"},{field:"tps()"}],["epm()","eps()"]),o=(0,ce.CE)(r),i=(0,ce.IO)(r),c=(0,E.Ov)(r),p=(0,ce.te)({canSeeSpanOpTrends:e.features.includes("performance-ops-breakdown")});return(0,pe.BX)(b.Z,{defaultSelection:{datetime:{start:null,end:null,utc:!1,period:ce._1}},children:[(0,pe.tZ)(x.h4,{children:(0,pe.BX)(x.oB,{children:[(0,pe.tZ)(_.Z,{crumbs:[{label:"Performance",to:this.getPerformanceLink()},{label:"Trends"}]}),(0,pe.tZ)(x.Dx,{children:(0,l.t)("Trends")})]})}),(0,pe.tZ)(x.uT,{children:(0,pe.tZ)(x.or,{fullWidth:!0,children:(0,pe.BX)(ze,{location:r,eventView:t,children:[(0,pe.BX)(Ue,{children:[(0,pe.tZ)(Be,{searchSource:"trends",organization:e,projectIds:a.project,query:c,fields:s,onSearch:this.handleSearch,maxQueryLength:Z.dI}),(0,pe.tZ)(We,{children:(0,pe.tZ)(y.ZP,{buttonProps:{prefix:(0,l.t)("Percentile")},label:o.label,children:ce.T1.map((({label:e,field:t})=>(0,pe.tZ)(y.hP,{onSelect:this.handleTrendFunctionChange,eventKey:t,"data-test-id":t,isActive:t===o.field,children:e},t)))})}),(0,pe.tZ)(We,{children:(0,pe.tZ)(y.ZP,{buttonProps:{prefix:(0,l.t)("Parameter")},label:i.label,children:p.map((({label:e})=>(0,pe.tZ)(y.hP,{onSelect:this.handleParameterChange,eventKey:e,"data-test-id":e,isActive:e===i.label,children:e},e)))})})]}),(0,pe.BX)(Ge,{children:[(0,pe.tZ)(Me,{trendChangeType:fe.ER.IMPROVED,previousTrendFunction:n,trendView:a,location:r,setError:this.setError}),(0,pe.tZ)(Me,{trendChangeType:fe.ER.REGRESSION,previousTrendFunction:n,trendView:a,location:r,setError:this.setError})]})]})})})]})}}Ve.displayName="TrendsContent";class ze extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"hasPushedDefaults",!1)}render(){const{children:e,location:t,eventView:r}=this.props,n=(0,j.ro)(t.query.query),a=(0,ce.IO)(t),o=new D.MY(n||"");if(n||this.hasPushedDefaults)return this.hasPushedDefaults=!0,(0,pe.tZ)(s.Fragment,{children:e});this.hasPushedDefaults=!0,o.setFilterValues("tpm()",[">0.01"]),o.setFilterValues(a.column,[">0","<".concat(ce.bg)]);const i=o.formatString();return r.query=i,f.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:String(i).trim()||void 0}}),null}}ze.displayName="DefaultTrends";const Be=(0,a.Z)(v.Z,{target:"e1yf76wj3"})("flex-grow:1;margin-bottom:",(0,T.Z)(2),";"),We=(0,a.Z)("div",{target:"e1yf76wj2"})("margin-left:",(0,T.Z)(1),";flex-grow:0;"),Ue=(0,a.Z)("div",{target:"e1yf76wj1"})({name:"zjik7",styles:"display:flex"}),Ge=(0,a.Z)("div",{target:"e1yf76wj0"})("display:grid;grid-gap:",(0,T.Z)(2),";@media (min-width: ",(e=>e.theme.breakpoints[1]),"){grid-template-columns:repeat(2, minmax(0, 1fr));align-items:stretch;}"),He=(0,u.Z)(Ve);class Xe extends s.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{eventView:(0,h.C)(this.props.organization,this.props.location,this.props.projects,!0),error:void 0}),(0,n.Z)(this,"setError",(e=>{this.setState({error:e})}))}static getDerivedStateFromProps(e,t){return{...t,eventView:(0,h.C)(e.organization,e.location,e.projects,!0)}}getDocumentTitle(){return[(0,l.t)("Trends"),(0,l.t)("Performance")].join(" - ")}renderContent(){const{organization:e,location:t}=this.props,{eventView:r}=this.state;return(0,pe.tZ)(He,{organization:e,location:t,eventView:r})}render(){const{organization:e}=this.props;return(0,pe.tZ)(i.Z,{title:this.getDocumentTitle(),orgSlug:e.slug,children:(0,pe.tZ)($e,{children:(0,pe.tZ)(o.Z,{organization:e,children:this.renderContent()})})})}}Xe.displayName="TrendsSummary";const Ye=(0,d.Z)((0,m.Z)((0,u.Z)((0,p.Z)(Xe)))),$e=(0,a.Z)(c.JH,{target:"e183k9ay0"})({name:"1hcx8jb",styles:"padding:0"})},"./app/views/performance/vitalDetail/utils.tsx":(e,t,r)=>{"use strict";r.d(t,{eE:()=>i,MN:()=>l,SP:()=>c,fL:()=>p,Np:()=>u,i4:()=>d,iF:()=>m,Ve:()=>h,q4:()=>f,jo:()=>g,il:()=>_,a7:()=>y,vk:()=>v}),r("../node_modules/core-js/modules/web.dom-collections.iterator.js"),r("../node_modules/react/index.js");var n=r("./app/icons/index.tsx"),a=r("./app/utils/discover/fields.tsx"),s=r("./app/utils/queryString.tsx"),o=r("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const i={[a.Zl.FP]:3e3,[a.Zl.FCP]:3e3,[a.Zl.LCP]:4e3,[a.Zl.FID]:300,[a.Zl.CLS]:.25},l={[a.Zl.FP]:1e3,[a.Zl.FCP]:1e3,[a.Zl.LCP]:2500,[a.Zl.FID]:100,[a.Zl.CLS]:.1};let c;!function(e){e.POOR="Poor",e.MEH="Meh",e.GOOD="Good"}(c||(c={}));const p={[c.POOR]:"red300",[c.MEH]:"yellow300",[c.GOOD]:"green300"},u={[c.POOR]:(0,o.tZ)(n.zC,{color:p[c.POOR]}),[c.MEH]:(0,o.tZ)(n.FC,{color:p[c.MEH]}),[c.GOOD]:(0,o.tZ)(n.DL,{color:p[c.GOOD],isCircled:!0})};function d({orgSlug:e,vitalName:t,projectID:r,query:n}){return{pathname:function({orgSlug:e}){return"/organizations/".concat(e,"/performance/vitaldetail/")}({orgSlug:e}),query:{vitalName:t,project:r,environment:n.environment,statsPeriod:n.statsPeriod,start:n.start,end:n.end,query:n.query}}}function m(e){const t=(0,s.ro)(e.query.vitalName);return Object.values(a.Zl).find((e=>e===t))||a.Zl.LCP}function h(e){const t=i[e];return"compare_numeric_aggregate(".concat((0,a.LY)("p75(".concat(e,")")),",greater,").concat(t,")")}function f(e){const t=l[e];return"compare_numeric_aggregate(".concat((0,a.LY)("p75(".concat(e,")")),",greater,").concat(t,")")}const g={[a.Zl.FCP]:"First Contentful Paint",[a.Zl.CLS]:"Cumulative Layout Shift",[a.Zl.FID]:"First Input Delay",[a.Zl.LCP]:"Largest Contentful Paint"},_={[a.Zl.FCP]:"First Contentful Paint (FCP) measures the amount of time the first content takes to render in the viewport. Like FP, this could also show up in any form from the document object model (DOM), such as images, SVGs, or text blocks.",[a.Zl.CLS]:"Cumulative Layout Shift (CLS) is the sum of individual layout shift scores for every unexpected element shift during the rendering process. Imagine navigating to an article and trying to click a link before the page finishes loading. Before your cursor even gets there, the link may have shifted down due to an image rendering. Rather than using duration for this Web Vital, the CLS score represents the degree of disruptive and visually unstable shifts.",[a.Zl.FID]:"First Input Delay measures the response time when the user tries to interact with the viewport. Actions maybe include clicking a button, link or other custom Javascript controller. It is key in helping the user determine if a page is usable or not.",[a.Zl.LCP]:"Largest Contentful Paint (LCP) measures the render time for the largest content to appear in the viewport. This may be in any form from the document object model (DOM), such as images, SVGs, or text blocks. It’s the largest pixel area in the viewport, thus most visually defining. LCP helps developers understand how long it takes to see the main content on the page."},y={[a.Zl.FCP]:"FCP",[a.Zl.CLS]:"CLS",[a.Zl.FID]:"FID",[a.Zl.LCP]:"LCP"};function v(e){let t=-1/0;for(const{data:r}of e)for(const e of r)t=Math.max(t,e.value);return t}},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,r)=>{var n=r("../node_modules/lodash/_baseIteratee.js"),a=r("../node_modules/lodash/negate.js"),s=r("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return s(e,a(n(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_trends_index_tsx-node_modules_lodash_omitBy_js.616a9f940f4fe27bd8a955e6ff22777d.js.map