"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_forms_teamSelector_tsx"],{"./app/components/forms/teamSelector.tsx":(e,t,s)=>{s.d(t,{Z:()=>_});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),a=s("./app/actionCreators/projects.tsx"),i=s("./app/components/button.tsx"),l=s("./app/components/forms/selectControl.tsx"),r=s("./app/components/idBadge/index.tsx"),c=s("./app/components/tooltip.tsx"),d=s("./app/icons/index.tsx"),p=s("./app/locale.tsx"),u=s("./app/styles/space.tsx"),m=s("./app/utils/useApi.tsx"),g=s("./app/utils/withOrganization.tsx"),b=s("./app/utils/withTeams.tsx"),f=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Z=(0,n.Z)("div",{target:"e1bme5454"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),h=(0,n.Z)(d.qO,{target:"e1bme5453"})("margin-left:",(0,u.Z)(.25),";margin-right:",(0,u.Z)(1),";color:",(e=>e.theme.gray400),";"),x={value:null,label:(0,f.BX)(Z,{children:[(0,f.tZ)(h,{size:"20px"}),(0,p.t)("Unassigned")]}),searchKey:"unassigned",actor:null,disabled:!1},y={option:(e,t)=>({...e,svg:{color:t.isSelected&&t.theme.white}})},v={input:(e,t)=>({...e,display:"grid",gridTemplateColumns:"max-content 1fr",alignItems:"center",gridGap:(0,u.Z)(1),":before":{backgroundColor:t.theme.backgroundSecondary,height:24,width:24,borderRadius:3,content:'""',display:"block"}}),placeholder:e=>({...e,paddingLeft:32})};function j(e){const{includeUnassigned:t,styles:s,...n}=e,{teams:i,teamFilter:u,organization:g,project:b,multiple:Z,value:h,useId:j,onChange:_}=e,z=(0,m.Z)(),[S,O]=(0,o.useState)([]),B=(0,o.useRef)(null),R=e=>({value:j?e.id:e.slug,label:(0,f.tZ)(r.Z,{team:e}),searchKey:"#".concat(e.slug),actor:{type:"team",id:e.id,name:e.slug}});function T(){if(!B.current)return;const e=B.current.select.inputRef;e&&e.blur()}function A(e){const t=g.access.includes("project:write");return{...R(e),disabled:!0,label:(0,f.BX)(w,{children:[(0,f.tZ)(k,{children:(0,f.tZ)(c.Z,{position:"left",title:(0,p.t)("%s is not a member of project","#".concat(e.slug)),children:(0,f.tZ)(r.Z,{team:e})})}),(0,f.tZ)(c.Z,{title:t?(0,p.t)("Add %s to project","#".concat(e.slug)):(0,p.t)("You do not have permission to add team to project."),children:(0,f.tZ)(C,{type:"button",size:"zero",borderless:!0,disabled:!t,onClick:()=>async function(e){if(!b)return void T();const t=Z?[...null!=h?h:[]]:{value:h};null==_||_(R(e));try{await(0,a.Oe)(z,g.slug,b.slug,e);const t=S.map((t=>{var s;return(null===(s=t.actor)||void 0===s?void 0:s.id)===e.id&&(t.disabled=!1,t.label=(0,f.tZ)(r.Z,{team:e})),t}));O(t)}catch(e){null==_||_(t)}T()}(e),icon:(0,f.tZ)(d.N_,{isCircled:!0})})})]})}}return(0,o.useEffect)((()=>{O(function(){const e=u?i.filter(u):i;if(b){const s=new Set(b.teams.map((e=>e.id))),n=e.filter((e=>s.has(e.id))),o=e.filter((e=>!s.has(e.id)));return[...n.map(R),...o.map(A),...t?[x]:[]]}return[...e.map(R),...t?[x]:[]]}())}),[i,u,b,t]),(0,f.tZ)(l.Z,{ref:B,options:S,isOptionDisabled:e=>!!e.disabled,styles:{...null!=s?s:{},...t?y:{},...v},...n})}j.displayName="TeamSelector";const w=(0,n.Z)("div",{target:"e1bme5452"})({name:"1laz9o6",styles:"display:flex;justify-content:space-between;align-items:flex-end"}),k=(0,n.Z)("div",{target:"e1bme5451"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"}),C=(0,n.Z)(i.ZP,{target:"e1bme5450"})({name:"ozd7xs",styles:"flex-shrink:0"}),_=(0,b.Z)((0,g.Z)(j))}}]);
//# sourceMappingURL=../sourcemaps/app_components_forms_teamSelector_tsx.ed004351a7f8dfc2b331c653f2dfe5ef.js.map