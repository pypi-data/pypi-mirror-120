"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_projectSourceMaps_detail_index_tsx"],{"./app/components/acl/role.tsx":(t,e,s)=>{s.d(e,{Z:()=>l});var a=s("../node_modules/react/index.js"),i=s("./app/stores/configStore.tsx"),r=s("./app/utils/isActiveSuperuser.tsx"),n=s("./app/utils/isRenderFunc.tsx"),o=s("./app/utils/withOrganization.tsx");class c extends a.Component{hasRole(){var t;const e=i.Z.get("user"),{organization:s,role:a}=this.props,{availableRoles:n}=s,o=null!==(t=s.role)&&void 0!==t?t:"";if(!e)return!1;if((0,r.M)())return!0;if(!Array.isArray(n))return!1;const c=n.map((t=>t.id));if(!c.includes(a)||!c.includes(o))return!1;const l=c.indexOf(a);return c.indexOf(o)>=l}render(){const{children:t}=this.props,e=this.hasRole();return(0,n.l)(t)?t({hasRole:e}):e&&t?t:null}}c.displayName="Role";const l=(0,o.Z)(c)},"./app/components/fileSize.tsx":(t,e,s)=>{s.d(e,{Z:()=>o});var a=s("./app/utils.tsx"),i=s("./app/utils/getDynamicText.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n(t){const{className:e,bytes:s}=t;return(0,r.tZ)("span",{className:e,children:(0,i.Z)({value:(0,a.F)(s),fixed:"xx KB"})})}n.displayName="FileSize";const o=n},"./app/utils/isActiveSuperuser.tsx":(t,e,s)=>{s.d(e,{M:()=>n});var a=s("../node_modules/js-cookie/src/js.cookie.js"),i=s.n(a),r=s("./app/stores/configStore.tsx");function n(){const{isSuperuser:t}=r.Z.get("user")||{};return!(!t||(i().set("su","test"),void 0!==i().get("su")))}},"./app/utils/routeTitle.tsx":(t,e,s)=>{s.d(e,{Z:()=>a});const a=function(t,e,s=!0,a){const i="".concat(t," - ").concat(e),r=a?"".concat(i," - ").concat(a):i;return s?"".concat(r," - Sentry"):r}},"./app/views/asyncView.tsx":(t,e,s)=>{s.d(e,{Z:()=>o}),s("../node_modules/react/index.js");var a=s("../node_modules/react-document-title/index.js"),i=s.n(a),r=s("./app/components/asyncComponent.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends r.Z{getTitle(){return""}render(){const t=this.getTitle();return(0,n.tZ)(i(),{title:"".concat(t?"".concat(t," - "):"","Sentry"),children:this.renderComponent()})}}o.displayName="AsyncView"},"./app/views/settings/projectSourceMaps/detail/index.tsx":(t,e,s)=>{s.r(e),s.d(e,{default:()=>V});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/actionCreators/indicator.tsx"),o=s("./app/components/acl/access.tsx"),c=s("./app/components/button.tsx"),l=s("./app/components/buttonBar.tsx"),d=s("./app/components/confirm.tsx"),p=s("./app/components/pagination.tsx"),m=s("./app/components/panels/index.tsx"),u=s("./app/components/searchBar.tsx"),h=s("./app/components/textOverflow.tsx"),g=s("./app/components/tooltip.tsx"),x=s("./app/components/version.tsx"),Z=s("./app/icons/index.tsx"),f=s("./app/locale.tsx"),y=s("./app/styles/space.tsx"),v=s("./app/utils/formatters.tsx"),j=s("./app/utils/queryString.tsx"),w=s("./app/utils/routeTitle.tsx"),b=s("./app/views/asyncView.tsx"),A=s("./app/views/settings/components/settingsPageHeader.tsx"),S=s("./app/components/acl/role.tsx"),z=s("./app/components/fileSize.tsx"),R=s("./app/components/tag.tsx"),q=s("./app/components/timeSince.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const D=({artifact:t,onDelete:e,downloadUrl:s,downloadRole:a})=>{const{name:i,size:n,dateCreated:p,id:m,dist:u}=t,h=()=>{e(m)};return(0,_.BX)(r.Fragment,{children:[(0,_.BX)(k,{children:[(0,_.tZ)(E,{children:i||"(".concat((0,f.t)("empty"),")")}),(0,_.BX)(T,{children:[(0,_.BX)(C,{children:[(0,_.tZ)(Z.jo,{size:"sm"}),(0,_.tZ)(q.Z,{date:p})]}),(0,_.tZ)(U,{type:u?"info":void 0,tooltipText:u?void 0:(0,f.t)("No distribution set"),children:null!=u?u:(0,f.t)("none")})]})]}),(0,_.tZ)(B,{children:(0,_.tZ)(z.Z,{bytes:n})}),(0,_.tZ)(P,{children:(0,_.BX)(l.ZP,{gap:.5,children:[(0,_.tZ)(S.Z,{role:a,children:({hasRole:t})=>(0,_.tZ)(g.Z,{title:(0,f.t)("You do not have permission to download artifacts."),disabled:t,children:(0,_.tZ)(c.ZP,{size:"small",icon:(0,_.tZ)(Z.Dj,{size:"sm"}),disabled:!t,href:s,title:t?(0,f.t)("Download Artifact"):void 0})})}),(0,_.tZ)(o.Z,{access:["project:releases"],children:({hasAccess:t})=>(0,_.tZ)(g.Z,{disabled:t,title:(0,f.t)("You do not have permission to delete artifacts."),children:(0,_.tZ)(d.Z,{message:(0,f.t)("Are you sure you want to remove this artifact?"),onConfirm:h,disabled:!t,children:(0,_.tZ)(c.ZP,{size:"small",icon:(0,_.tZ)(Z.Fz,{size:"sm"}),title:t?(0,f.t)("Remove Artifact"):void 0,label:(0,f.t)("Remove Artifact"),disabled:!t})})})})]})})]})};D.displayName="SourceMapsArtifactRow";const k=(0,i.Z)("div",{target:"e2h2xmi6"})({name:"1ij1o5n",styles:"display:flex;flex-direction:column;align-items:flex-start;justify-content:center"}),B=(0,i.Z)("div",{target:"e2h2xmi5"})({name:"ivtwc8",styles:"display:flex;justify-content:flex-end;text-align:right;align-items:center"}),P=(0,i.Z)(B,{target:"e2h2xmi4"})(""),E=(0,i.Z)("div",{target:"e2h2xmi3"})("padding-right:",(0,y.Z)(4),";overflow-wrap:break-word;word-break:break-all;"),T=(0,i.Z)("div",{target:"e2h2xmi2"})("width:100%;display:flex;margin-top:",(0,y.Z)(1),";align-items:center;"),C=(0,i.Z)("div",{target:"e2h2xmi1"})("display:grid;grid-gap:",(0,y.Z)(.5),";grid-template-columns:min-content 1fr;font-size:",(t=>t.theme.fontSizeMedium),";align-items:center;color:",(t=>t.theme.subText),";"),U=(0,i.Z)(R.Z,{target:"e2h2xmi0"})("margin-left:",(0,y.Z)(1),";"),F=D;class I extends b.Z{constructor(...t){super(...t),(0,a.Z)(this,"handleSearch",(t=>{const{location:e,router:s}=this.props;s.push({...e,query:{...e.query,cursor:void 0,query:t}})})),(0,a.Z)(this,"handleArtifactDelete",(async t=>{(0,n.E3)((0,f.t)("Removing artifact…"));try{await this.api.requestPromise("".concat(this.getArtifactsUrl()).concat(t,"/"),{method:"DELETE"}),this.fetchData(),(0,n.S9)((0,f.t)("Artifact removed."))}catch{(0,n.Iw)((0,f.t)("Unable to remove artifact. Please try again."))}})),(0,a.Z)(this,"handleArchiveDelete",(async()=>{const{orgId:t,projectId:e,name:s}=this.props.params;(0,n.E3)((0,f.t)("Removing artifacts…"));try{await this.api.requestPromise("/projects/".concat(t,"/").concat(e,"/files/source-maps/"),{method:"DELETE",query:{name:s}}),this.fetchData(),(0,n.S9)((0,f.t)("Artifacts removed."))}catch{(0,n.Iw)((0,f.t)("Unable to remove artifacts. Please try again."))}}))}getTitle(){const{projectId:t,name:e}=this.props.params;return(0,w.Z)((0,f.t)("Archive %s",(0,v.ko)(e)),t,!1)}getDefaultState(){return{...super.getDefaultState(),artifacts:[]}}getEndpoints(){return[["artifacts",this.getArtifactsUrl(),{query:{query:this.getQuery()}}]]}getArtifactsUrl(){const{orgId:t,projectId:e,name:s}=this.props.params;return"/projects/".concat(t,"/").concat(e,"/releases/").concat(encodeURIComponent(s),"/files/")}getQuery(){const{query:t}=this.props.location.query;return(0,j.ro)(t)}getEmptyMessage(){return this.getQuery()?(0,f.t)("There are no artifacts that match your search."):(0,f.t)("There are no artifacts in this archive.")}renderLoading(){return this.renderBody()}renderArtifacts(){const{organization:t}=this.props,{artifacts:e}=this.state,s=this.api.baseUrl+this.getArtifactsUrl();return e.length?e.map((e=>(0,_.tZ)(F,{artifact:e,onDelete:this.handleArtifactDelete,downloadUrl:"".concat(s).concat(e.id,"/?download=1"),downloadRole:t.debugFilesRole},e.id))):null}renderBody(){const{loading:t,artifacts:e,artifactsPageLinks:s}=this.state,{name:a,orgId:i}=this.props.params,{project:n}=this.props;return(0,_.BX)(r.Fragment,{children:[(0,_.tZ)(M,{title:(0,_.BX)(X,{children:[(0,f.t)("Archive")," ",(0,_.tZ)(h.Z,{children:(0,_.tZ)(x.Z,{version:a,tooltipRawVersion:!0,anchor:!1,truncate:!0})})]}),action:(0,_.BX)(N,{gap:1,children:[(0,_.tZ)(O,{to:"/organizations/".concat(i,"/releases/").concat(encodeURIComponent(a),"/?project=").concat(n.id),children:(0,f.t)("Go to Release")}),(0,_.tZ)(o.Z,{access:["project:releases"],children:({hasAccess:t})=>(0,_.tZ)(g.Z,{disabled:t,title:(0,f.t)("You do not have permission to delete artifacts."),children:(0,_.tZ)(d.Z,{message:(0,f.t)("Are you sure you want to remove all artifacts in this archive?"),onConfirm:this.handleArchiveDelete,disabled:!t,children:(0,_.tZ)(c.ZP,{icon:(0,_.tZ)(Z.Fz,{size:"sm"}),title:(0,f.t)("Remove All Artifacts"),label:(0,f.t)("Remove All Artifacts"),disabled:!t})})})}),(0,_.tZ)(u.Z,{placeholder:(0,f.t)("Filter artifacts"),onSearch:this.handleSearch,query:this.getQuery()})]})}),(0,_.tZ)(L,{headers:[(0,f.t)("Artifact"),(0,_.tZ)(Q,{children:(0,f.t)("File Size")},"size"),""],emptyMessage:this.getEmptyMessage(),isEmpty:0===e.length,isLoading:t,children:this.renderArtifacts()}),(0,_.tZ)(p.Z,{pageLinks:s})]})}}const M=(0,i.Z)(A.Z,{target:"e1qrdj7c5"})(">div{@media (max-width: ",(t=>t.theme.breakpoints[2]),"){display:block;}}"),X=(0,i.Z)("div",{target:"e1qrdj7c4"})({name:"s5xdrg",styles:"display:flex;align-items:center"}),N=(0,i.Z)(l.ZP,{target:"e1qrdj7c3"})({name:"11g6mpt",styles:"justify-content:flex-start"}),L=(0,i.Z)(m.KB,{target:"e1qrdj7c2"})({name:"qc2mzu",styles:"grid-template-columns:minmax(220px, 1fr) max-content 120px"}),O=(0,i.Z)(c.ZP,{target:"e1qrdj7c1"})({name:"1bmnxg7",styles:"white-space:nowrap"}),Q=(0,i.Z)("div",{target:"e1qrdj7c0"})({name:"2qga7i",styles:"text-align:right"}),V=I}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_projectSourceMaps_detail_index_tsx.53458a68660f62699f4193a8d2d4ce6f.js.map