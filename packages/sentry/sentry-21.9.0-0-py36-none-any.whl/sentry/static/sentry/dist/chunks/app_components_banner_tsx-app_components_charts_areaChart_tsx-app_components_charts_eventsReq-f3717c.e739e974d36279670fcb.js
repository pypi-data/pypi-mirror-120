(self.webpackChunk=self.webpackChunk||[]).push([["app_components_banner_tsx-app_components_charts_areaChart_tsx-app_components_charts_eventsReq-f3717c","app_components_sentryDocumentTitle_tsx"],{"./app/actionCreators/discoverSavedQueries.tsx":(e,t,a)=>{"use strict";a.d(t,{Yi:()=>n,GH:()=>i,M6:()=>d,EQ:()=>c,qF:()=>u}),a("../node_modules/core-js/modules/es.string.trim.js");var s=a("./app/actionCreators/indicator.tsx"),r=a("./app/api.tsx"),o=a("./app/locale.tsx");function n(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(a,"/"),{method:"GET"});return r.catch((()=>{(0,s.Iw)((0,o.t)("Unable to load saved query"))})),r}function i(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/"),{method:"POST",data:a});return r.catch((()=>{(0,s.Iw)((0,o.t)("Unable to create your saved query"))})),r}function d(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(a.id,"/"),{method:"PUT",data:a});return r.catch((()=>{(0,s.Iw)((0,o.t)("Unable to update your saved query"))})),r}function c(e,t){return(new r.KU).requestPromise("/organizations/".concat(e,"/discover/saved/").concat(t,"/visit/"),{method:"POST"})}function u(e,t,a){const r=e.requestPromise("/organizations/".concat(t,"/discover/saved/").concat(a,"/"),{method:"DELETE"});return r.catch((()=>{(0,s.Iw)((0,o.t)("Unable to delete the saved query"))})),r}},"./app/components/banner.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>x});var s=a("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react/index.js")),o=a("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),n=a("./app/components/button.tsx"),i=a("./app/components/buttonBar.tsx"),d=a("./app/icons/index.tsx"),c=a("./app/locale.tsx"),u=a("./app/styles/space.tsx"),l=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const m=e=>"".concat(e,"-banner-dismissed");function p(e){localStorage.setItem(m(e),"true")}const v=({title:e,subtitle:t,isDismissable:a=!0,dismissKey:s="generic-banner",className:o,backgroundImg:n,backgroundComponent:i,children:d})=>{const[u,v]=function(e){const t=m(e),[a,s]=r.useState(localStorage.getItem(t));return["true"===a,()=>{s("true"),p(e)}]}(s);return u?null:(0,l.BX)(h,{backgroundImg:n,className:o,children:[i,a?(0,l.tZ)(q,{onClick:v,"aria-label":(0,c.t)("Close")}):null,(0,l.BX)(g,{children:[(0,l.tZ)(y,{children:e}),(0,l.tZ)(_,{children:t}),(0,l.tZ)(f,{gap:1,children:d})]})]})};v.displayName="Banner",v.dismiss=p;const h=(0,s.Z)("div",{target:"e8az5815"})((e=>e.backgroundImg?(0,o.iv)("background:url(",e.backgroundImg,");background-repeat:no-repeat;background-size:cover;background-position:center center;",""):(0,o.iv)("background-color:",e.theme.gray500,";",""))," display:flex;overflow:hidden;align-items:center;justify-content:center;position:relative;margin-bottom:",(0,u.Z)(2),";box-shadow:",(e=>e.theme.dropShadowLight),";border-radius:",(e=>e.theme.borderRadius),";height:180px;color:",(e=>e.theme.white),";@media (min-width: ",(e=>e.theme.breakpoints[0]),"){height:220px;}"),g=(0,s.Z)("div",{target:"e8az5814"})("position:absolute;display:grid;justify-items:center;grid-template-rows:repeat(3, max-content);text-align:center;padding:",(0,u.Z)(4),";"),y=(0,s.Z)("h1",{target:"e8az5813"})("margin:0;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){font-size:40px;}"),_=(0,s.Z)("div",{target:"e8az5812"})("margin:0;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){font-size:",(e=>e.theme.fontSizeExtraLarge),";}"),f=(0,s.Z)(i.ZP,{target:"e8az5811"})("margin-top:",(0,u.Z)(2),";width:fit-content;"),q=(0,s.Z)(n.ZP,{target:"e8az5810"})("position:absolute;display:block;top:",(0,u.Z)(2),";right:",(0,u.Z)(2),";color:",(e=>e.theme.white),";cursor:pointer;z-index:1;");q.defaultProps={icon:(0,l.tZ)(d.bM,{}),label:(0,c.t)("Close"),priority:"link",borderless:!0,size:"xsmall"};const x=v},"./app/components/charts/areaChart.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>d});var s=a("../node_modules/react/index.js"),r=a("./app/components/charts/series/lineSeries.tsx"),o=a("./app/components/charts/baseChart.tsx"),n=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends s.Component{render(){const{series:e,stacked:t,colors:a,...s}=this.props;return(0,n.tZ)(o.Z,{...s,colors:a,series:e.map((({seriesName:e,data:s,...o},n)=>function(e={}){return(0,r.Z)({...e})}({stack:t?"area":void 0,name:e,data:s.map((({name:e,value:t})=>[e,t])),lineStyle:{color:null==a?void 0:a[n],opacity:1,width:.4},areaStyle:{color:null==a?void 0:a[n],opacity:1},animation:!1,animationThreshold:1,animationDuration:0,...o})))})}}i.displayName="AreaChart";const d=i},"./app/components/charts/eventsRequest.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>_});var s=a("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=(a("../node_modules/core-js/modules/web.dom-collections.iterator.js"),a("../node_modules/react/index.js")),o=a("../node_modules/lodash/isEqual.js"),n=a.n(o),i=a("../node_modules/lodash/omitBy.js"),d=a.n(i),c=a("./app/actionCreators/events.tsx"),u=a("./app/actionCreators/indicator.tsx"),l=a("./app/components/charts/loadingPanel.tsx"),m=a("./app/components/charts/utils.tsx"),p=a("./app/locale.tsx"),v=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const h=["api","children","organization","loading"],g=e=>d()(e,((e,t)=>h.includes(t)));class y extends r.PureComponent{constructor(...e){super(...e),(0,s.Z)(this,"state",{reloading:!!this.props.loading,errored:!1,timeseriesData:null,fetchedWithPrevious:!1}),(0,s.Z)(this,"unmounting",!1),(0,s.Z)(this,"fetchData",(async()=>{const{api:e,confirmedQuery:t,expired:a,name:s,hideError:r,...o}=this.props;let n=null;if(!1!==t){if(this.setState((e=>({reloading:null!==e.timeseriesData,errored:!1}))),a)(0,u.Iw)((0,p.t)("%s has an invalid date range. Please try a more recent date range.",s),{append:!0}),this.setState({errored:!0});else try{e.clear(),n=await(0,c.lI)(e,o)}catch(e){r||(e&&e.responseJSON&&e.responseJSON.detail?(0,u.Iw)(e.responseJSON.detail):(0,u.Iw)((0,p.t)("Error loading chart data"))),this.setState({errored:!0})}this.unmounting||this.setState({reloading:!1,timeseriesData:n,fetchedWithPrevious:o.includePrevious})}})),(0,s.Z)(this,"getData",(e=>{const{fetchedWithPrevious:t}=this.state,{period:a,includePrevious:s}=this.props,r=t||(0,m.Sw)(s,a),o=Math.floor(e.length/2);return{current:r?e.slice(o):e,previous:r?e.slice(0,o):null}}))}componentDidMount(){this.fetchData()}componentDidUpdate(e){n()(g(e),g(this.props))||this.fetchData()}componentWillUnmount(){this.unmounting=!0}calculateTotalsPerTimestamp(e,t=(e=>1e3*e)){return e.map((([e,a],s)=>({name:t(e,a,s),value:a.reduce(((e,{count:t})=>e+t),0)})))}transformPreviousPeriodData(e,t){var a;return t?{seriesName:null!==(a=this.props.previousSeriesName)&&void 0!==a?a:"Previous",data:this.calculateTotalsPerTimestamp(t,((t,a,s)=>1e3*e[s][0]))}:null}transformAggregatedTimeseries(e,t=""){return{seriesName:t,data:this.calculateTotalsPerTimestamp(e)}}transformTimeseriesData(e,t){return[{seriesName:t||"Current",data:e.map((([e,t])=>({name:1e3*e,value:t.reduce(((e,{count:t})=>e+t),0)})))}]}processData(e){if(!e)return{};const{data:t,totals:a}=e,{includeTransformedData:s,includeTimeAggregation:r,timeAggregationSeriesName:o}=this.props,{current:n,previous:i}=this.getData(t);return{data:s?this.transformTimeseriesData(n,this.props.currentSeriesName):[],allData:t,originalData:n,totals:a,originalPreviousData:i,previousData:s?this.transformPreviousPeriodData(n,i):null,timeAggregatedData:r?this.transformAggregatedTimeseries(n,o||""):{},timeframe:e.start&&e.end?i?{start:500*(e.start+e.end),end:1e3*e.end}:{start:1e3*e.start,end:1e3*e.end}:void 0}}render(){const{children:e,showLoading:t,...a}=this.props,{timeseriesData:s,reloading:r,errored:o}=this.state,n=this.props.loading||null===s;if(t&&n)return(0,v.tZ)(l.Z,{"data-test-id":"events-request-loading"});if((0,m.Xe)(s)){let t;return e({loading:n,reloading:r,errored:o,results:Object.keys(s).map((e=>{const a=s[e];a.start&&a.end&&!t&&(t={start:1e3*a.start,end:1e3*a.end});const r=this.transformTimeseriesData(a.data,e)[0];return[a.order||0,r]})).sort(((e,t)=>e[0]-t[0])).map((e=>e[1])),timeframe:t,...a})}const{data:i,allData:d,originalData:c,totals:u,originalPreviousData:p,previousData:h,timeAggregatedData:g,timeframe:y}=this.processData(s);return e({loading:n,reloading:r,errored:o,timeseriesData:i,allTimeseriesData:d,originalTimeseriesData:c,timeseriesTotals:u,originalPreviousTimeseriesData:p,previousTimeseriesData:h,timeAggregatedData:g,timeframe:y,...a})}}y.displayName="EventsRequest",(0,s.Z)(y,"defaultProps",{period:void 0,start:null,end:null,interval:"1d",limit:15,query:"",includePrevious:!0,includeTransformedData:!0});const _=y},"./app/components/sentryDocumentTitle.tsx":(e,t,a)=>{"use strict";a.d(t,{Z:()=>i}),a("../node_modules/react/index.js");var s=a("../node_modules/react-document-title/index.js"),r=a.n(s),o=a("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n({title:e,orgSlug:t,projectSlug:a,children:s}){const n=t||a?t&&a?"".concat(e," - ").concat(t," - ").concat(a):t?"".concat(e," - ").concat(t):"".concat(e," - ").concat(a):e;return(0,o.tZ)(r(),{title:"".concat(n," - Sentry"),children:s})}n.displayName="SentryDocumentTitle";const i=n},"./app/views/eventsV2/savedQuery/utils.tsx":(e,t,a)=>{"use strict";a.d(t,{b2:()=>i,O$:()=>u,pb:()=>l,Uc:()=>m});var s=a("./app/actionCreators/discoverSavedQueries.tsx"),r=a("./app/actionCreators/indicator.tsx"),o=a("./app/locale.tsx"),n=a("./app/utils/analytics.tsx");function i(e,t,a,i=!0){const d=a.toNewQuery();(0,n.ec)({...p(i,"request"),organization_id:parseInt(t.id,10),...v(d)});const c=(0,s.GH)(e,t.slug,d);return c.then((e=>((0,r.S9)((0,o.t)("Query saved")),(0,n.ec)({...p(i,"success"),organization_id:parseInt(t.id,10),...v(d)}),e))).catch((e=>{(0,r.Iw)((0,o.t)("Query not saved")),(0,n.ec)({...p(i,"failed"),organization_id:parseInt(t.id,10),...v(d),error:e&&e.message||"Could not save a ".concat(i?"new":"existing"," query")})})),c}const d={request:"Discoverv2: Request to save a saved query as a new query",success:"Discoverv2: Successfully saved a saved query as a new query",failed:"Discoverv2: Failed to save a saved query as a new query"},c={request:"Discoverv2: Request to save a new query",success:"Discoverv2: Successfully saved a new query",failed:"Discoverv2: Failed to save a new query"};function u(e,t,a){const i=a.toNewQuery();if(!a.name)return(0,r.Iw)((0,o.t)("Please name your query")),Promise.reject();(0,n.ec)({eventKey:"discover_v2.update_query_request",eventName:"Discoverv2: Request to update a saved query",organization_id:parseInt(t.id,10),...v(i)});const d=(0,s.M6)(e,t.slug,i);return d.then((e=>((0,r.S9)((0,o.t)("Query updated")),(0,n.ec)({eventKey:"discover_v2.update_query_success",eventName:"Discoverv2: Successfully updated a saved query",organization_id:parseInt(t.id,10),...v(i)}),e))).catch((e=>{(0,r.Iw)((0,o.t)("Query not updated")),(0,n.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query",organization_id:parseInt(t.id,10),...v(i),error:e&&e.message||"Failed to update a query"})})),d}function l(e,t,a){const i=a.toNewQuery();(0,n.ec)({eventKey:"discover_v2.update_query_name_request",eventName:"Discoverv2: Request to update a saved query's name",organization_id:parseInt(t.id,10),...v(i)});const d=(0,s.M6)(e,t.slug,i);return d.then((e=>{(0,r.S9)((0,o.t)("Query name saved")),(0,n.ec)({eventKey:"discover_v2.update_query_name_success",eventName:"Discoverv2: Successfully updated a saved query's name",organization_id:parseInt(t.id,10),...v(i)})})).catch((e=>{(0,r.Iw)((0,o.t)("Query name not saved")),(0,n.ec)({eventKey:"discover_v2.update_query_failed",eventName:"Discoverv2: Failed to update a saved query's name",organization_id:parseInt(t.id,10),...v(i),error:e&&e.message||"Failed to update a query name"})})),d}function m(e,t,a){(0,n.ec)({eventKey:"discover_v2.delete_query_request",eventName:"Discoverv2: Request to delete a saved query",organization_id:parseInt(t.id,10),...v(a.toNewQuery())});const i=(0,s.qF)(e,t.slug,a.id);return i.then((()=>{(0,r.S9)((0,o.t)("Query deleted")),(0,n.ec)({eventKey:"discover_v2.delete_query_success",eventName:"Discoverv2: Successfully deleted a saved query",organization_id:parseInt(t.id,10),...v(a.toNewQuery())})})).catch((e=>{(0,r.Iw)((0,o.t)("Query not deleted")),(0,n.ec)({eventKey:"discover_v2.delete_query_failed",eventName:"Discoverv2: Failed to delete a saved query",organization_id:parseInt(t.id,10),...v(a.toNewQuery()),error:e&&e.message||"Failed to delete query"})})),i}function p(e,t){return{eventKey:e?"discover_v2.save_new_query_"+t:"discover_v2.save_existing_query_"+t,eventName:e?c[t]:d[t]}}function v(e){const{projects:t,fields:a,query:s}=e;return{projects:t,fields:a,query:s}}},"../node_modules/lodash/negate.js":e=>{e.exports=function(e){if("function"!=typeof e)throw new TypeError("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}},"../node_modules/lodash/omitBy.js":(e,t,a)=>{var s=a("../node_modules/lodash/_baseIteratee.js"),r=a("../node_modules/lodash/negate.js"),o=a("../node_modules/lodash/pickBy.js");e.exports=function(e,t){return o(e,r(s(t)))}}}]);
//# sourceMappingURL=../sourcemaps/app_components_banner_tsx-app_components_charts_areaChart_tsx-app_components_charts_eventsReq-f3717c.04269eb803cf36e178106d98c377f3de.js.map