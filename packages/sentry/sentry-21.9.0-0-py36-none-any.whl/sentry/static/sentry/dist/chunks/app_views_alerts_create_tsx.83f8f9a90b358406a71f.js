"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_alerts_create_tsx"],{"./app/views/alerts/create.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>C});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),i=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),a=s("../node_modules/react-router/es/index.js"),n=s("./app/components/layouts/thirds.tsx"),l=s("./app/components/sentryDocumentTitle.tsx"),c=s("./app/locale.tsx"),p=s("./app/styles/space.tsx"),d=s("./app/utils/analytics.tsx"),u=s("./app/utils/discover/eventView.tsx"),m=s("./app/utils/guid.tsx"),h=s("./app/views/alerts/builder/builderBreadCrumbs.tsx"),g=s("./app/utils/withTeams.tsx"),w=s("./app/views/alerts/incidentRules/constants.tsx"),v=s("./app/views/alerts/incidentRules/ruleForm/index.tsx"),x=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class j extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"handleSubmitSuccess",(()=>{const{router:e}=this.props,{orgId:t}=this.props.params;d.oF.endTransaction({name:"saveAlertRule"}),e.push("/organizations/".concat(t,"/alerts/rules/"))}))}render(){var e;const{project:t,eventView:s,wizardTemplate:r,sessionId:i,teams:o,...a}=this.props,n=s?(0,w.H9)(s):r?(0,w.Q6)(r):(0,w.ep)(),l=o.filter((({isMember:e})=>e)).map((({id:e})=>e)),c=new Set(t.teams.map((({id:e})=>e))),p=null!==(e=l.find((e=>c.has(e))))&&void 0!==e?e:null;return n.owner=p&&"team:".concat(p),(0,x.tZ)(v.Z,{onSubmitSuccess:this.handleSubmitSuccess,rule:{...n,projects:[t.slug]},sessionId:i,project:t,userTeamIds:l,...a})}}j.displayName="IncidentRulesCreate";const y=(0,g.Z)(j);var b=s("./app/views/alerts/issueRuleEditor/index.tsx"),Z=s("./app/views/alerts/wizard/options.tsx"),_=s("./app/views/alerts/wizard/utils.tsx");class S extends o.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",this.getInitialState()),(0,r.Z)(this,"sessionId",(0,m.E)())}getInitialState(){var e;const{organization:t,location:s,project:r}=this.props,{createFromDiscover:i,createFromWizard:o,aggregate:n,dataset:l,eventTypes:c}=null!==(e=null==s?void 0:s.query)&&void 0!==e?e:{};let p="issue";return i?p="metric":o?p=n&&l&&c?"metric":"issue":a.browserHistory.replace("/organizations/".concat(t.slug,"/alerts/").concat(r.slug,"/wizard")),{alertType:p}}componentDidMount(){const{organization:e,project:t}=this.props;(0,d.ec)({eventKey:"new_alert_rule.viewed",eventName:"New Alert Rule: Viewed",organization_id:e.id,project_id:t.id,session_id:this.sessionId,alert_type:this.state.alertType})}render(){var e;const{hasMetricAlerts:t,organization:s,project:r,params:{projectId:i},location:a,routes:p}=this.props,{alertType:d}=this.state,{aggregate:m,dataset:g,eventTypes:w,createFromWizard:v,createFromDiscover:j}=null!==(e=null==a?void 0:a.query)&&void 0!==e?e:{},S={aggregate:m,dataset:g,eventTypes:w},C=j?u.ZP.fromLocation(a):void 0;let f;v&&"metric"===d&&(f=S?(0,_.k)(S):"issues");const F=(0,c.t)("New Alert Rule");return(0,x.BX)(o.Fragment,{children:[(0,x.tZ)(l.Z,{title:F,projectSlug:i}),(0,x.tZ)(n.h4,{children:(0,x.BX)(I,{children:[(0,x.tZ)(h.Z,{orgSlug:s.slug,alertName:(0,c.t)("Set Conditions"),title:f?(0,c.t)("Select Alert"):F,projectSlug:i,routes:p,location:a,canChangeProject:!0}),(0,x.tZ)(n.Dx,{children:f?"".concat((0,c.t)("Set Conditions for")," ").concat(Z.gb[f]):F})]})}),(0,x.tZ)(z,{children:(0,x.BX)(T,{fullWidth:!0,children:[(!t||"issue"===d)&&(0,x.tZ)(b.Z,{...this.props,project:r}),t&&"metric"===d&&(0,x.tZ)(y,{...this.props,eventView:C,wizardTemplate:S,sessionId:this.sessionId,project:r,isCustomMetric:"custom"===f})]})})]})}}S.displayName="Create";const z=(0,i.Z)(n.uT,{target:"ew02uqt2"})("margin-bottom:-",(0,p.Z)(3),";"),T=(0,i.Z)(n.or,{target:"ew02uqt1"})({name:"1rxb0gn",styles:"max-width:1000px"}),I=(0,i.Z)(n.oB,{target:"ew02uqt0"})({name:"1h8nup8",styles:"overflow:visible"}),C=S}}]);
//# sourceMappingURL=../sourcemaps/app_views_alerts_create_tsx.b261b315f93ea34bd2f19767fc0dfe91.js.map