"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_components_projects_missingProjectMembership_tsx"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{eM:()=>m,z_:()=>d,fs:()=>l,um:()=>u,s:()=>p,Cm:()=>h,tT:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("./app/actionCreators/indicator.tsx"),a=s("./app/actions/teamActions.tsx"),r=s("./app/locale.tsx"),n=s("./app/utils/callIfFunction.tsx"),i=s("./app/utils/guid.tsx");const c=(e={},t,...s)=>{(0,n.g)(e[t],...s)};function m(e,t,s){return a.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:e=>{a.Z.fetchDetailsSuccess(t.teamId,e),c(s,"success",e)},error:e=>{a.Z.fetchDetailsError(t.teamId,e),c(s,"error",e)}})}function d(e,t){a.Z.updateSuccess(e,t)}function l(e,t,s){const o="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return a.Z.update(t.teamId,t.data),e.request(o,{method:"PUT",data:t.data,success:e=>{d(t.teamId,e),c(s,"success",e)},error:e=>{a.Z.updateError(t.teamId,e),c(s,"error",e)}})}function u(e,t,s){var o;const r="/organizations/".concat(t.orgId,"/members/").concat(null!==(o=t.memberId)&&void 0!==o?o:"me","/teams/").concat(t.teamId,"/"),n=(0,i.E)();return a.Z.update(n,t.teamId),e.request(r,{method:"POST",success:e=>{a.Z.updateSuccess(t.teamId,e),c(s,"success",e)},error:e=>{a.Z.updateError(n,t.teamId,e),c(s,"error",e)}})}function p(e,t,s){const o="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),r=(0,i.E)();return a.Z.update(r,t.teamId),e.request(o,{method:"DELETE",success:e=>{a.Z.updateSuccess(t.teamId,e),c(s,"success",e)},error:e=>{a.Z.updateError(r,t.teamId,e),c(s,"error",e)}})}function h(e,t,s){return a.Z.createTeam(t),e.requestPromise("/organizations/".concat(s.orgId,"/teams/"),{method:"POST",data:t}).then((e=>(a.Z.createTeamSuccess(e),(0,o.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:s.orgId})),e)),(e=>{throw a.Z.createTeamError(t.slug,e),(0,o.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:s.orgId})),e}))}function g(e,t){return a.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((e=>(a.Z.removeTeamSuccess(t.teamId,e),(0,o.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e)),(e=>{throw a.Z.removeTeamError(t.teamId,e),(0,o.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/components/projects/missingProjectMembership.tsx":(e,t,s)=>{s.d(t,{Z:()=>j});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/actionCreators/indicator.tsx"),i=s("./app/actionCreators/teams.tsx"),c=s("./app/components/button.tsx"),m=s("./app/components/forms/selectControl.tsx"),d=s("./app/components/panels/index.tsx"),l=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),p=s("./app/stores/teamStore.tsx"),h=s("./app/styles/space.tsx"),g=s("./app/utils/withApi.tsx"),Z=s("./app/views/settings/components/emptyMessage.tsx"),I=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends r.Component{constructor(e){var t;super(e),(0,o.Z)(this,"getPendingTeamOption",(e=>({value:e,label:(0,I.tZ)(v,{children:(0,u.t)("#".concat(e))})})));const{organization:s,projectSlug:a}=this.props,r=null===(t=s.projects)||void 0===t?void 0:t.find((e=>e.slug===a));this.state={loading:!1,error:!1,project:r,team:""}}joinTeam(e){this.setState({loading:!0}),(0,i.um)(this.props.api,{orgId:this.props.organization.slug,teamId:e},{success:()=>{this.setState({loading:!1,error:!1}),(0,n.S9)((0,u.t)("Request to join team sent."))},error:()=>{this.setState({loading:!1,error:!0}),(0,n.Iw)((0,u.t)("There was an error while trying to request access."))}})}renderJoinTeam(e,t){const s=p.Z.getBySlug(e);return s?this.state.loading?t.has("open-membership")?(0,I.tZ)(c.ZP,{busy:!0,children:(0,u.t)("Join Team")}):(0,I.tZ)(c.ZP,{busy:!0,children:(0,u.t)("Request Access")}):null!=s&&s.isPending?(0,I.tZ)(c.ZP,{disabled:!0,children:(0,u.t)("Request Pending")}):t.has("open-membership")?(0,I.tZ)(c.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,u.t)("Join Team")}):(0,I.tZ)(c.ZP,{priority:"primary",type:"button",onClick:this.joinTeam.bind(this,e),children:(0,u.t)("Request Access")}):null}getTeamsForAccess(){var e,t;const s=[],o=[];return(null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[]).forEach((({slug:e})=>{const t=p.Z.getBySlug(e);t&&(t.isPending?o.push(t.slug):s.push(t.slug))})),[s,o]}render(){var e,t;const{organization:s}=this.props,o=this.state.team,a=null!==(e=null===(t=this.state.project)||void 0===t?void 0:t.teams)&&void 0!==e?e:[],r=new Set(s.features),n=[{label:(0,u.t)("Request Access"),options:this.getTeamsForAccess()[0].map((e=>({value:e,label:(0,u.t)("#".concat(e))})))},{label:(0,u.t)("Pending Requests"),options:this.getTeamsForAccess()[1].map((e=>this.getPendingTeamOption(e)))}];return(0,I.tZ)(y,{children:a.length?(0,I.tZ)(Z.Z,{icon:(0,I.tZ)(l.Gy,{size:"xl"}),title:(0,u.t)("You're not a member of this project."),description:(0,u.t)("You'll need to join a team with access before you can view this data."),action:(0,I.BX)(f,{children:[(0,I.tZ)(x,{name:"select",placeholder:(0,u.t)("Select a Team"),options:n,onChange:e=>{const t=e?e.value:null;this.setState({team:t})}}),o?this.renderJoinTeam(o,r):(0,I.tZ)(c.ZP,{disabled:!0,children:(0,u.t)("Select a Team")})]})}):(0,I.tZ)(Z.Z,{icon:(0,I.tZ)(l.Gy,{size:"xl"}),children:(0,u.t)("No teams have access to this project yet. Ask an admin to add your team to this project.")})})}}b.displayName="MissingProjectMembership";const y=(0,a.Z)(d.s_,{target:"e1cfryqt3"})("margin:",(0,h.Z)(2)," 0;"),f=(0,a.Z)("div",{target:"e1cfryqt2"})("display:grid;grid-auto-flow:column;gap:",(0,h.Z)(2),";text-align:left;"),x=(0,a.Z)(m.Z,{target:"e1cfryqt1"})({name:"xu0q36",styles:"width:250px"}),v=(0,a.Z)("div",{target:"e1cfryqt0"})({name:"v6ye5b",styles:"display:flex;opacity:0.5;overflow:hidden"}),j=(0,g.Z)(b)}}]);
//# sourceMappingURL=../sourcemaps/app_components_projects_missingProjectMembership_tsx.485a385a599a96fd08f5e2b747a77eb9.js.map