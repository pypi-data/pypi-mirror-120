"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_dashboardsV2_index_tsx","app_components_sentryDocumentTitle_tsx","app_views_dashboardsV2_view_tsx"],{"./app/components/sentryDocumentTitle.tsx":(s,a,e)=>{e.d(a,{Z:()=>d}),e("../node_modules/react/index.js");var o=e("../node_modules/react-document-title/index.js"),t=e.n(o),r=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function n({title:s,orgSlug:a,projectSlug:e,children:o}){const n=a||e?a&&e?"".concat(s," - ").concat(a," - ").concat(e):a?"".concat(s," - ").concat(a):"".concat(s," - ").concat(e):s;return(0,r.tZ)(t(),{title:"".concat(n," - Sentry"),children:o})}n.displayName="SentryDocumentTitle";const d=n},"./app/views/dashboardsV2/index.tsx":(s,a,e)=>{e.r(a),e.d(a,{default:()=>m});var o=e("../node_modules/react/index.js"),t=e("./app/components/errors/notFound.tsx"),r=e("./app/components/loadingIndicator.tsx"),n=e("./app/utils/withApi.tsx"),d=e("./app/utils/withOrganization.tsx"),i=e("./app/views/dashboardsV2/detail.tsx"),p=e("./app/views/dashboardsV2/orgDashboards.tsx"),c=e("./app/views/dashboardsV2/types.tsx"),l=e("./app/views/dashboardsV2/view.tsx"),h=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends o.Component{render(){const{organization:s,params:a,api:e,location:o,children:n}=this.props;return s.features.includes("dashboards-edit")?n:(0,h.tZ)(l.DashboardBasicFeature,{organization:s,children:(0,h.tZ)(p.Z,{api:e,location:o,params:a,organization:s,children:({dashboard:s,dashboards:a,error:e,reloadData:o})=>e?(0,h.tZ)(t.Z,{}):s?(0,h.tZ)(i.Z,{...this.props,initialState:c.n.VIEW,dashboard:s,dashboards:a,reloadData:o}):(0,h.tZ)(r.Z,{})})})}}u.displayName="DashboardsV2Container";const m=(0,n.Z)((0,d.Z)(u))},"./app/views/dashboardsV2/orgDashboards.tsx":(s,a,e)=>{e.d(a,{Z:()=>m});var o=e("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),t=(e("../node_modules/core-js/modules/web.dom-collections.iterator.js"),e("../node_modules/core-js/modules/es.string.replace.js"),e("../node_modules/react/index.js"),e("../node_modules/react-router/es/index.js")),r=e("../node_modules/lodash/isEqual.js"),n=e.n(r),d=e("./app/components/asyncComponent.tsx"),i=e("./app/components/errors/notFound.tsx"),p=e("./app/components/sentryDocumentTitle.tsx"),c=e("./app/locale.tsx"),l=e("./app/utils/analytics.tsx"),h=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends d.Z{constructor(...s){super(...s),(0,o.Z)(this,"state",{loading:!0,reloading:!1,error:!1,errors:{},dashboards:[],selectedDashboard:null})}componentDidUpdate(s){n()(s.params.dashboardId,this.props.params.dashboardId)||this.remountComponent()}getEndpoints(){const{organization:s,params:a}=this.props,e="/organizations/".concat(s.slug,"/dashboards/"),o=[["dashboards",e]];return a.dashboardId&&(o.push(["selectedDashboard","".concat(e).concat(a.dashboardId,"/")]),(0,l.ec)({eventKey:"dashboards2.view",eventName:"Dashboards2: View dashboard",organization_id:parseInt(this.props.organization.id,10),dashboard_id:parseInt(a.dashboardId,10)})),o}getDashboards(){const{dashboards:s}=this.state;return Array.isArray(s)?s:[]}onRequestSuccess({stateKey:s,data:a}){const{params:e,organization:o,location:r}=this.props;if(e.dashboardId||"selectedDashboard"===s)return;const n=a.length?a[0].id:"default-overview",d="/organizations/".concat(o.slug,"/dashboard/").concat(n,"/");t.browserHistory.replace({pathname:d,query:{...r.query}})}renderBody(){const{children:s}=this.props,{selectedDashboard:a,error:e}=this.state;return s({error:e,dashboard:a,dashboards:this.getDashboards(),reloadData:this.reloadData.bind(this)})}renderError(s){return Object.values(this.state.errors).find((s=>s&&404===s.status))?(0,h.tZ)(i.Z,{}):super.renderError(s,!0,!0)}renderComponent(){const{organization:s,location:a}=this.props;return s.features.includes("dashboards-basic")?(0,h.tZ)(p.Z,{title:(0,c.t)("Dashboards"),orgSlug:s.slug,children:super.renderComponent()}):(t.browserHistory.replace({pathname:"/organizations/".concat(s.slug,"/dashboards/"),query:{...a.query}}),null)}}const m=u},"./app/views/dashboardsV2/view.tsx":(s,a,e)=>{e.r(a),e.d(a,{default:()=>j,DashboardBasicFeature:()=>_}),e("../node_modules/core-js/modules/web.dom-collections.iterator.js"),e("../node_modules/core-js/modules/es.string.replace.js");var o=e("../node_modules/react/index.js"),t=e("../node_modules/react-router/es/index.js"),r=e("./app/actionCreators/dashboards.tsx"),n=e("./app/components/acl/feature.tsx"),d=e("./app/components/alert.tsx"),i=e("./app/components/errors/notFound.tsx"),p=e("./app/components/loadingIndicator.tsx"),c=e("./app/locale.tsx"),l=e("./app/styles/organization.tsx"),h=e("./app/utils/withApi.tsx"),u=e("./app/utils/withOrganization.tsx"),m=e("./app/views/dashboardsV2/detail.tsx"),b=e("./app/views/dashboardsV2/orgDashboards.tsx"),x=e("./app/views/dashboardsV2/types.tsx"),g=e("./app/views/dashboardsV2/utils.tsx"),w=e("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function Z(s){const{api:a,organization:e,params:n,location:d}=s,c=n.dashboardId,l=e.slug,[h,u]=(0,o.useState)();return(0,o.useEffect)((()=>{c&&"default-overview"!==c&&(0,r.a_)(a,l,c);const s=(0,g.y1)(d.query);u(s),s&&t.browserHistory.replace(d.pathname)}),[a,l,c]),(0,w.tZ)(_,{organization:e,children:(0,w.tZ)(b.Z,{api:a,location:d,params:n,organization:e,children:({dashboard:a,dashboards:e,error:o,reloadData:t})=>o?(0,w.tZ)(i.Z,{}):a?(0,w.tZ)(m.Z,{...s,initialState:h?x.n.EDIT:x.n.VIEW,dashboard:a,dashboards:e,reloadData:(...s)=>(h&&u(void 0),t(...s)),newWidget:h}):(0,w.tZ)(p.Z,{})})})}Z.displayName="ViewEditDashboard";const j=(0,h.Z)((0,u.Z)(Z)),_=({organization:s,children:a})=>(0,w.tZ)(n.Z,{hookName:"feature-disabled:dashboards-page",features:["organizations:dashboards-basic"],organization:s,renderDisabled:()=>(0,w.tZ)(l.JH,{children:(0,w.tZ)(d.Z,{type:"warning",children:(0,c.t)("You don't have access to this feature")})}),children:a});_.displayName="DashboardBasicFeature"}}]);
//# sourceMappingURL=../sourcemaps/app_views_dashboardsV2_index_tsx.3cf846b02e9b03e4c7ea2dd2fdac3238.js.map