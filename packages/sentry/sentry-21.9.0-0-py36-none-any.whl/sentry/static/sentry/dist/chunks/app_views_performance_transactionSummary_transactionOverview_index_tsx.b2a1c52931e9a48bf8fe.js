"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_performance_transactionSummary_transactionOverview_index_tsx","app_components_globalSdkUpdateAlert_tsx"],{"./app/components/globalSdkUpdateAlert.tsx":(e,t,n)=>{n.d(t,{Z:()=>z});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),r=n("./app/actionCreators/prompts.tsx"),o=n("./app/actions/sidebarPanelActions.tsx"),l=n("./app/components/alert.tsx"),c=n("./app/constants/globalSelectionHeader.tsx"),p=n("./app/icons/index.tsx"),d=n("./app/locale.tsx"),u=n("./app/styles/space.tsx"),m=n("./app/utils/analytics.tsx"),h=n("./app/utils/promptIsDismissed.tsx"),g=n("./app/utils/withApi.tsx"),v=n("./app/utils/withGlobalSelection.tsx"),f=n("./app/utils/withOrganization.tsx"),x=n("./app/utils/withSdkUpdates.tsx"),Z=n("./app/components/sidebar/types.tsx"),y=n("./app/components/button.tsx"),w=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class b extends s.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{isDismissed:null}),(0,i.Z)(this,"snoozePrompt",(()=>{const{api:e,organization:t}=this.props;(0,r.Xt)(e,{organizationId:t.id,feature:"sdk_updates",status:"snoozed"}),this.setState({isDismissed:!0}),(({organization:e})=>{(0,m.ec)({eventKey:"sdk_updates.snoozed",eventName:"SDK Updates: Snoozed",organization_id:e.id})})({organization:this.props.organization})}))}componentDidMount(){this.promptsCheck(),(({organization:e})=>{(0,m.ec)({eventKey:"sdk_updates.seen",eventName:"SDK Updates: Seen",organization_id:e.id})})({organization:this.props.organization})}async promptsCheck(){const{api:e,organization:t}=this.props,n=await(0,r.vu)(e,{organizationId:t.id,feature:"sdk_updates"});this.setState({isDismissed:(0,h.I)(n)})}render(){const{api:e,selection:t,sdkUpdates:n,organization:i,Wrapper:a,...s}=this.props,{isDismissed:r}=this.state;if(!n||null===r||r)return null;if(0===(u=0===(null==t?void 0:t.projects.length)||(null==t?void 0:t.projects)===[c.mP]?n:n.filter((e=>{var n;return null==t||null===(n=t.projects)||void 0===n?void 0:n.includes(parseInt(e.projectId,10))})),u.reduce(((e,t)=>[...e,...t.suggestions]),[])).length)return null;var u;const h=(0,w.tZ)(y.ZP,{priority:"link",onClick:()=>{o.Z.activatePanel(Z.z.Broadcasts),(({organization:e})=>{(0,m.ec)({eventKey:"sdk_updates.clicked",eventName:"SDK Updates: Clicked",organization_id:e.id})})({organization:i})},children:(0,d.t)("Review updates")}),g=(0,w.tZ)(l.Z,{type:"info",icon:(0,w.tZ)(p.XK,{}),...s,children:(0,w.BX)(k,{children:[(0,d.t)("You have outdated SDKs in your projects. Update them for important fixes and features."),(0,w.BX)(S,{children:[(0,w.tZ)(y.ZP,{priority:"link",title:(0,d.t)("Dismiss for the next two weeks"),onClick:this.snoozePrompt,children:(0,d.t)("Remind me later")}),"|",h]})]})});return a?(0,w.tZ)(a,{children:g}):g}}b.displayName="InnerGlobalSdkSuggestions";const k=(0,a.Z)("div",{target:"e13jrk6t1"})("display:flex;flex-wrap:wrap;@media (min-width: ",(e=>e.theme.breakpoints[0]),"){justify-content:space-between;}"),S=(0,a.Z)("div",{target:"e13jrk6t0"})("display:grid;grid-template-columns:repeat(3, max-content);grid-gap:",(0,u.Z)(1),";"),z=(0,f.Z)((0,x.Z)((0,v.Z)((0,g.Z)(b))))},"./app/views/eventsV2/tags.tsx":(e,t,n)=>{n.d(t,{Z:()=>S});var i=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),s=(n("../node_modules/core-js/modules/web.dom-collections.iterator.js"),n("../node_modules/react/index.js")),r=n("../node_modules/@sentry/minimal/esm/index.js"),o=n("./app/actionCreators/events.tsx"),l=n("./app/components/charts/errorPanel.tsx"),c=n("./app/components/charts/styles.tsx"),p=n("./app/components/emptyStateWarning.tsx"),d=n("./app/components/placeholder.tsx"),u=n("./app/components/tagDistributionMeter.tsx"),m=n("./app/icons/index.tsx"),h=n("./app/locale.tsx"),g=n("./app/styles/space.tsx"),v=n("./app/utils/analytics.tsx"),f=n("./app/utils/discover/eventView.tsx"),x=n("./app/utils/withApi.tsx"),Z=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends s.Component{constructor(...e){super(...e),(0,i.Z)(this,"state",{loading:!0,tags:[],totalValues:null,error:""}),(0,i.Z)(this,"shouldRefetchData",(e=>{const t=this.props.eventView.getFacetsAPIPayload(this.props.location),n=e.eventView.getFacetsAPIPayload(e.location);return!(0,f.ze)(t,n)})),(0,i.Z)(this,"fetchData",(async(e=!1)=>{const{api:t,organization:n,eventView:i,location:a,confirmedQuery:s}=this.props;if(this.setState({loading:!0,error:"",tags:[]}),e||!1!==s)try{const e=await(0,o.eV)(t,n.slug,i.getFacetsAPIPayload(a));this.setState({loading:!1,tags:e})}catch(e){r.Tb(e),this.setState({loading:!1,error:e})}})),(0,i.Z)(this,"handleTagClick",(e=>{const{organization:t}=this.props;(0,v.ec)({eventKey:"discover_v2.facet_map.clicked",eventName:"Discoverv2: Clicked on a tag on the facet map",tag:e,organization_id:parseInt(t.id,10)})})),(0,i.Z)(this,"renderBody",(()=>{const{loading:e,error:t,tags:n}=this.state;return e?this.renderPlaceholders():t?(0,Z.tZ)(l.Z,{height:"132px",children:(0,Z.tZ)(m.FC,{color:"gray300",size:"lg"})}):n.length>0?n.map((e=>this.renderTag(e))):(0,Z.tZ)(w,{small:!0,children:(0,h.t)("No tags found")})}))}componentDidMount(){this.fetchData(!0)}componentDidUpdate(e){(this.shouldRefetchData(e)||e.confirmedQuery!==this.props.confirmedQuery)&&this.fetchData()}renderTag(e){const{generateUrl:t,totalValues:n}=this.props,i=e.topValues.map((n=>(n.url=t(e.key,n.value),n))),a=i.length>0?Math.max(Number(n),i[0].count):n;return(0,Z.tZ)(u.Z,{title:e.key,segments:i,totalValues:Number(a),renderLoading:()=>(0,Z.tZ)(b,{height:"16px"}),onTagClick:this.handleTagClick,showReleasePackage:!0},e.key)}renderPlaceholders(){return(0,Z.BX)(s.Fragment,{children:[(0,Z.tZ)(k,{},"title-1"),(0,Z.tZ)(b,{},"bar-1"),(0,Z.tZ)(k,{},"title-2"),(0,Z.tZ)(b,{},"bar-2"),(0,Z.tZ)(k,{},"title-3"),(0,Z.tZ)(b,{},"bar-3")]})}render(){return(0,Z.BX)(s.Fragment,{children:[(0,Z.tZ)(c.OT,{children:(0,h.t)("Tag Summary")}),this.renderBody()]})}}y.displayName="Tags";const w=(0,a.Z)(p.Z,{target:"e1pu9veq2"})({name:"rtpdsm",styles:"height:132px;padding:54px 15%"}),b=(0,a.Z)(d.Z,{target:"e1pu9veq1"})("border-radius:",(e=>e.theme.borderRadius),";height:16px;margin-bottom:",(0,g.Z)(1.5),";"),k=(0,a.Z)(d.Z,{target:"e1pu9veq0"})("width:100px;height:12px;margin-bottom:",(0,g.Z)(.5),";"),S=(0,x.Z)(y)},"./app/views/performance/transactionSummary/transactionOverview/index.tsx":(e,t,n)=>{n.r(t),n.d(t,{default:()=>Ge}),n("../node_modules/core-js/modules/es.string.trim.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var i=n("../node_modules/react/index.js"),a=n("../node_modules/react-router/es/index.js"),s=n("./app/actionCreators/tags.tsx"),r=n("./app/locale.tsx"),o=n("./app/utils/analytics.tsx"),l=n("./app/utils/discover/discoverQuery.tsx"),c=n("./app/utils/discover/eventView.tsx"),p=n("./app/utils/discover/fields.tsx"),d=n("./app/utils/performance/histogram/index.tsx"),u=n("./app/utils/queryString.tsx"),m=n("./app/utils/tokenizeSearch.tsx"),h=n("./app/utils/withApi.tsx"),g=n("./app/utils/withGlobalSelection.tsx"),v=n("./app/utils/withOrganization.tsx"),f=n("./app/utils/withProjects.tsx"),x=n("./app/views/performance/utils.tsx"),Z=n("./app/views/performance/transactionSummary/filter.tsx"),y=n("./app/views/performance/transactionSummary/pageLayout.tsx"),w=n("./app/views/performance/transactionSummary/tabs.tsx"),b=n("./app/views/performance/transactionSummary/transactionVitals/constants.tsx"),k=n("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),S=n("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),z=n("../node_modules/lodash/omit.js"),_=n.n(z),V=n("./app/components/acl/feature.tsx"),C=n("./app/components/discover/transactionsList.tsx"),j=n("./app/components/events/searchBar.tsx"),P=n("./app/components/globalSdkUpdateAlert.tsx"),T=n("./app/components/layouts/thirds.tsx"),F=n("./app/components/organizations/globalSelectionHeader/getParams.tsx"),q=n("./app/constants/index.tsx"),D=n("./app/styles/space.tsx"),N=n("./app/utils.tsx"),I=n("./app/views/eventsV2/table/cellAction.tsx"),L=n("./app/views/eventsV2/tags.tsx"),B=n("./app/views/performance/transactionSummary/utils.tsx"),E=n("./app/views/performance/transactionSummary/transactionOverview/charts.tsx"),O=n("../node_modules/lodash/pick.js"),A=n.n(O),X=n("./app/components/button.tsx"),K=n("./app/components/charts/styles.tsx"),U=n("./app/components/emptyStateWarning.tsx"),W=n("./app/components/issues/groupList.tsx"),R=n("./app/components/panels/index.tsx"),M=n("./app/constants/globalSelectionHeader.tsx"),$=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const Q=new Set(["event.type","project"]);class G extends i.Component{constructor(...e){super(...e),(0,k.Z)(this,"handleOpenClick",(()=>{const{organization:e}=this.props;(0,o.ec)({eventKey:"performance_views.summary.open_issues",eventName:"Performance Views: Open issues from transaction summary",organization_id:parseInt(e.id,10)})})),(0,k.Z)(this,"renderEmptyMessage",(()=>{const{statsPeriod:e}=this.props,t=e&&q.wh[e],n=t?t.toLowerCase():(0,r.t)("given timeframe");return(0,$.tZ)(R.s_,{children:(0,$.tZ)(R.N,{children:(0,$.tZ)(U.Z,{children:(0,$.tZ)("p",{children:(0,r._N)("No new issues for this transaction for the [timePeriod].",{timePeriod:n})})})})})}))}getIssuesEndpoint(){const{transaction:e,organization:t,start:n,end:i,statsPeriod:a,location:s}=this.props,r={start:n,end:i,statsPeriod:a,limit:5,sort:"new",...A()(s.query,[...Object.values(M.nF),"cursor"])},o=new m.MY((0,u.ro)(s.query.query,""));return o.getFilterKeys().forEach((e=>{const t=e.startsWith("!")?e.substr(1):e;(t.match(/\w+\(.*\)/)||p.J8.includes(t)||Q.has(t))&&o.removeFilter(e)})),o.addFreeText("is:unresolved").setFilterValues("transaction",[e]),{path:"/organizations/".concat(t.slug,"/issues/"),queryParams:{...r,query:o.formatString()}}}render(){const{organization:e}=this.props,{path:t,queryParams:n}=this.getIssuesEndpoint(),a={pathname:"/organizations/".concat(e.slug,"/issues/"),query:n};return(0,$.BX)(i.Fragment,{children:[(0,$.BX)(H,{children:[(0,$.tZ)(K.OT,{children:(0,r.t)("Related Issues")}),(0,$.tZ)(X.ZP,{"data-test-id":"issues-open",size:"small",to:a,onClick:this.handleOpenClick,children:(0,r.t)("Open in Issues")})]}),(0,$.tZ)(Y,{children:(0,$.tZ)(W.Z,{orgId:e.slug,endpointPath:t,queryParams:n,query:"",canSelectGroups:!1,renderEmptyMessage:this.renderEmptyMessage,withChart:!1,withPagination:!1})})]})}}G.displayName="RelatedIssues";const H=(0,S.Z)("div",{target:"el0d6on1"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,D.Z)(1),";"),Y=(0,S.Z)("div",{target:"el0d6on0"})("margin-bottom:",(0,D.Z)(4),";",R.s_,"{margin-bottom:-",(0,D.Z)(1),";}"),J=G;var ee=n("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),te=n("./app/components/charts/chartZoom.tsx"),ne=n("./app/components/charts/errorPanel.tsx"),ie=n("./app/components/charts/eventsRequest.tsx"),ae=n("./app/components/charts/lineChart.tsx"),se=n("./app/components/charts/transitionChart.tsx"),re=n("./app/components/charts/transparentLoadingMask.tsx"),oe=n("./app/components/charts/utils.tsx"),le=n("./app/components/placeholder.tsx"),ce=n("./app/components/questionTooltip.tsx"),pe=n("./app/icons/index.tsx"),de=n("./app/utils/dates.tsx"),ue=n("./app/utils/discover/charts.tsx"),me=n("./app/utils/formatters.tsx"),he=n("./app/views/performance/data.tsx");function ge({theme:e,api:t,location:n,eventView:i,organization:a,router:s,isLoading:o,error:l,totals:c}){const p=i.statsPeriod,d=i.start?(0,de.hC)(i.start):void 0,u=i.end?(0,de.hC)(i.end):void 0,{utc:m}=(0,F.Q)(n.query),h=e.charts.getColorPalette(3),g={scale:!0,axisLine:{show:!1},axisTick:{show:!1},splitLine:{show:!1}},v={height:480,grid:[{top:"60px",left:"10px",right:"10px",height:"100px"},{top:"220px",left:"10px",right:"10px",height:"100px"},{top:"380px",left:"10px",right:"10px",height:"120px"}],axisPointer:{link:[{xAxisIndex:[0,1,2]}]},xAxes:Array.from(new Array(3)).map(((e,t)=>({gridIndex:t,type:"time",show:!1}))),yAxes:[{gridIndex:0,interval:.2,axisLabel:{formatter:e=>(0,me.$1)(e,1),color:e.chartLabel},...g},{gridIndex:1,splitNumber:4,interval:.5,max:1,axisLabel:{formatter:e=>(0,me.rl)(e,0),color:e.chartLabel},...g},{gridIndex:2,splitNumber:4,axisLabel:{formatter:me.Du,color:e.chartLabel},...g}],utc:"true"===m,isGroupedByDate:!0,showTimeInTooltip:!0,colors:[h[0],h[1],h[2]],tooltip:{trigger:"axis",truncate:80,valueFormatter:ue.CX,nameFormatter:e=>"epm()"===e?"tpm()":e}},f={start:d||null,end:u||null,period:p},x=i.project,Z=i.environment;return(0,$.BX)(fe,{children:[(0,$.BX)(Ze,{top:"0px",children:[(0,$.BX)(xe,{children:[(0,r.t)("Apdex"),(0,$.tZ)(ce.Z,{position:"top",title:(0,he.$r)(a,he.V$.APDEX_NEW),size:"sm"})]}),(0,$.tZ)(ve,{isLoading:o,error:l,value:c?(0,me.$1)(c.apdex,4):null})]}),(0,$.BX)(Ze,{top:"160px",children:[(0,$.BX)(xe,{children:[(0,r.t)("Failure Rate"),(0,$.tZ)(ce.Z,{position:"top",title:(0,he.$r)(a,he.V$.FAILURE_RATE),size:"sm"})]}),(0,$.tZ)(ve,{isLoading:o,error:l,value:c?(0,me.rl)(c.failure_rate):null})]}),(0,$.BX)(Ze,{top:"320px",children:[(0,$.BX)(xe,{children:[(0,r.t)("TPM"),(0,$.tZ)(ce.Z,{position:"top",title:(0,he.$r)(a,he.V$.TPM),size:"sm"})]}),(0,$.tZ)(ve,{isLoading:o,error:l,value:c?(0,r._N)("[tpm] tpm",{tpm:(0,me.$1)(c.tpm,4)}):null})]}),(0,$.tZ)(te.Z,{router:s,period:p,start:d,end:u,utc:"true"===m,xAxisIndex:[0,1,2],children:e=>(0,$.tZ)(ie.Z,{api:t,organization:a,period:p,project:x,environment:Z,start:d,end:u,interval:(0,oe.ZS)(f),showLoading:!1,query:i.query,includePrevious:!1,yAxis:["apdex()","failure_rate()","epm()"],partial:!0,children:({results:t,errored:n,loading:i,reloading:a})=>{if(n)return(0,$.tZ)(ne.Z,{height:"580px",children:(0,$.tZ)(pe.FC,{color:"gray300",size:"lg"})});const s=t?t.map(((e,t)=>({...e,yAxisIndex:t,xAxisIndex:t}))):[];return(0,$.BX)(se.Z,{loading:i,reloading:a,height:"580px",children:[(0,$.tZ)(re.Z,{visible:a}),(0,$.tZ)(ae.Z,{...e,...v,series:s})]})}})})]})}function ve({error:e,isLoading:t,value:n}){return e?(0,$.tZ)("div",{children:"—"}):t?(0,$.tZ)(le.Z,{height:"24px"}):(0,$.tZ)(ye,{children:n})}ge.displayName="SidebarCharts";const fe=(0,S.Z)("div",{target:"ecri4wp3"})({name:"bjn8wh",styles:"position:relative"}),xe=(0,S.Z)(K.OT,{target:"ecri4wp2"})({name:"ti75j2",styles:"margin:0"}),Ze=(0,S.Z)("div",{target:"ecri4wp1"})("position:absolute;top:",(e=>e.top),";z-index:1;"),ye=(0,S.Z)("div",{target:"ecri4wp0"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";"),we=(0,h.Z)((0,ee.b)((0,a.withRouter)(ge)));function be({data:e}){const t=e.reduce(((e,t)=>t.value+e),0);return(0,$.tZ)(Se,{children:e.map(((e,n)=>(0,$.BX)(i.Fragment,{children:[(0,$.tZ)(ze,{children:(0,me.rl)(e.value/t,0)}),(0,$.BX)(_e,{"data-test-id":"status-".concat(e.label),cursor:e.onClick?"pointer":"default",onClick:e.onClick,children:[(0,$.tZ)(Ce,{style:{width:"".concat((e.value/t*100).toFixed(2),"%")}}),(0,$.tZ)(Ve,{children:e.label})]})]},"".concat(n,":").concat(e.label))))})}be.displayName="BreakdownBars";const ke=be,Se=(0,S.Z)("div",{target:"e1yzi37b4"})("display:grid;grid-template-columns:min-content auto;column-gap:",(0,D.Z)(1),";row-gap:",(0,D.Z)(1),";"),ze=(0,S.Z)("div",{target:"e1yzi37b3"})("font-size:",(e=>e.theme.fontSizeExtraLarge),";text-align:right;"),_e=(0,S.Z)("div",{target:"e1yzi37b2"})("padding-left:",(0,D.Z)(1),";padding-right:",(0,D.Z)(1),";position:relative;cursor:",(e=>e.cursor),";"),Ve=(0,S.Z)("span",{target:"e1yzi37b1"})("position:relative;color:",(e=>e.theme.textColor),";z-index:2;font-size:",(e=>e.theme.fontSizeSmall),";"),Ce=(0,S.Z)("div",{target:"e1yzi37b0"})("border-radius:2px;background-color:",(e=>e.theme.border),";position:absolute;top:0;left:0;z-index:1;height:100%;width:0%;");function je({eventView:e,location:t,organization:n}){const s=e.withColumns([{kind:"function",function:["count","","",void 0]},{kind:"field",field:"transaction.status"}]).withSorts([{kind:"desc",field:"count"}]);return(0,$.BX)(i.Fragment,{children:[(0,$.BX)(K.OT,{children:[(0,r.t)("Status Breakdown"),(0,$.tZ)(ce.Z,{position:"top",title:(0,he.$r)(n,he.V$.STATUS_BREAKDOWN),size:"sm"})]}),(0,$.tZ)(l.Z,{eventView:s,location:t,orgSlug:n.slug,referrer:"api.performance.status-breakdown",children:({isLoading:n,error:i,tableData:s})=>{if(n)return(0,$.tZ)(le.Z,{height:"124px"});if(i)return(0,$.tZ)(ne.Z,{height:"124px",children:(0,$.tZ)(pe.FC,{color:"gray300",size:"lg"})});if(!s||0===s.data.length)return(0,$.tZ)(Pe,{small:!0,children:(0,r.t)("No statuses found")});const o=s.data.map((n=>({label:String(n["transaction.status"]),value:parseInt(String(n.count),10),onClick:()=>{const i=new m.MY(e.query);i.removeFilter("!transaction.status").setFilterValues("transaction.status",[n["transaction.status"]]),a.browserHistory.push({pathname:t.pathname,query:{...t.query,cursor:void 0,query:i.formatString()}})}})));return(0,$.tZ)(ke,{data:o})}})]})}je.displayName="StatusBreakdown";const Pe=(0,S.Z)(U.Z,{target:"e1ilkz930"})({name:"wwhhbg",styles:"height:124px;padding:50px 15%"}),Te=je;var Fe=n("./app/views/performance/transactionSummary/transactionOverview/tagExplorer.tsx"),qe=n("./app/components/links/link.tsx"),De=n("./app/components/userMisery.tsx"),Ne=n("./app/views/performance/transactionSummary/transactionVitals/utils.tsx"),Ie=n("./app/views/performance/vitalDetail/vitalInfo.tsx");function Le({eventView:e,isLoading:t,hasWebVitals:n,error:a,totals:s,location:o,organization:l,transactionName:c}){let d=null!==a?(0,$.tZ)("div",{children:"—"}):(0,$.tZ)(le.Z,{height:"34px"});if(!t&&null===a&&s){const e=s.project_threshold_config[1],t=s.count_miserable_user,n=s.user_misery,i=s.count_unique_user;d=(0,$.tZ)(De.Z,{bars:40,barHeight:30,userMisery:n,miseryLimit:e,totalUsers:i,miserableUsers:t})}const m=(0,Ne.Pl)({orgSlug:l.slug,transaction:c,projectID:(0,u.ro)(o.query.project),query:o.query});return(0,$.BX)(i.Fragment,{children:[n&&(0,$.BX)(i.Fragment,{children:[(0,$.BX)(Be,{children:[(0,$.BX)(K.OT,{children:[(0,r.t)("Web Vitals"),(0,$.tZ)(ce.Z,{position:"top",title:(0,r.t)('Web Vitals with p75 better than the "poor" threshold, as defined by Google Web Vitals.'),size:"sm"})]}),(0,$.tZ)(qe.Z,{to:m,children:(0,$.tZ)(pe.V$,{})})]}),(0,$.tZ)(Ie.Z,{eventView:e,organization:l,location:o,vital:[p.Zl.FCP,p.Zl.LCP,p.Zl.FID,p.Zl.CLS],hideVitalPercentNames:!0,hideDurationDetail:!0}),(0,$.tZ)(B.uI,{})]}),(0,$.BX)(K.OT,{children:[(0,r.t)("User Misery"),(0,$.tZ)(ce.Z,{position:"top",title:(0,he.$r)(l,he.V$.USER_MISERY_NEW),size:"sm"})]}),d,(0,$.tZ)(B.uI,{})]})}Le.displayName="UserStats";const Be=(0,S.Z)("div",{target:"e11vlg4d0"})({name:"1066lcq",styles:"display:flex;justify-content:space-between;align-items:center"}),Ee=Le;class Oe extends i.Component{constructor(...e){super(...e),(0,k.Z)(this,"handleSearch",(e=>{const{location:t}=this.props,n=(0,F.Q)({...t.query||{},query:e}),i=_()(n,"cursor");a.browserHistory.push({pathname:t.pathname,query:i})})),(0,k.Z)(this,"generateTagUrl",((e,t)=>{const{location:n}=this.props,i=(0,N.ZT)(n.query,{key:e,value:t});return{...n,query:i}})),(0,k.Z)(this,"handleCellAction",(e=>(t,n)=>{const{eventView:i,location:s}=this.props,r=new m.MY(i.query);r.removeFilter("event.type"),r.removeFilter("transaction"),(0,I.rh)(r,t,e,n),a.browserHistory.push({pathname:s.pathname,query:{...s.query,cursor:void 0,query:r.formatString()}})})),(0,k.Z)(this,"handleTransactionsListSortChange",(e=>{const{location:t}=this.props,n={pathname:t.pathname,query:{...t.query,showTransactions:e,transactionCursor:void 0}};a.browserHistory.push(n)})),(0,k.Z)(this,"handleAllEventsViewClick",(()=>{const{organization:e}=this.props;(0,o.ec)({eventKey:"performance_views.summary.view_in_transaction_events",eventName:"Performance Views: View in All Events from Transaction Summary",organization_id:parseInt(e.id,10)})})),(0,k.Z)(this,"handleDiscoverViewClick",(()=>{const{organization:e}=this.props;(0,o.ec)({eventKey:"performance_views.summary.view_in_discover",eventName:"Performance Views: View in Discover from Transaction Summary",organization_id:parseInt(e.id,10)})})),(0,k.Z)(this,"handleViewDetailsClick",(e=>{const{organization:t}=this.props;(0,o.ec)({eventKey:"performance_views.summary.view_details",eventName:"Performance Views: View Details from Transaction Summary",organization_id:parseInt(t.id,10)})}))}generateEventView(e,t){var n;const{location:i,totalValues:a,spanOperationBreakdownFilter:s}=this.props,{selected:r}=Ae(i,{p95:null!==(n=null==a?void 0:a.p95)&&void 0!==n?n:0,spanOperationBreakdownFilter:s}),o=e.withSorts([r.sort]);if(s===Z.f1.None){const e=[...o.fields.slice(0,t.length)];o.fields=e.filter((({field:e})=>!(0,p.sU)(e)))}return o}render(){var e;let{eventView:t}=this.props;const{transactionName:n,location:a,organization:s,projects:o,isLoading:l,error:c,totalValues:d,onChangeFilter:m,spanOperationBreakdownFilter:h}=this.props,g=s.features.includes("performance-events-page"),v=s.features.includes("performance-chart-interpolation"),f=(0,u.ro)(a.query.query,""),y=null===d?null:d.count,w=(0,x.Ik)(t,o)||null!==d&&b.PE.some((e=>e.vitals.some((e=>{const t=(0,p.LY)("percentile(".concat(e,", ").concat(b.GW,")"));return Number.isFinite(d[t])})))),k=(0,x.iL)(t,o),S=[(0,r.t)("event id"),(0,r.t)("user"),(0,r.t)("total duration"),(0,r.t)("trace id"),(0,r.t)("timestamp")];let z=t.clone();if(s.features.includes("performance-ops-breakdown")){const e=(0,Z.Is)(h,a);e&&(t=t.clone(),t.query="".concat(t.query," ").concat(e).trim(),z=t.clone());const n=h===Z.f1.None?(0,r.t)("operation duration"):"".concat(h," duration");S.splice(2,0,n);let i=p.zD;h!==Z.f1.None&&(i=(0,Z.T$)(h));const s=[...z.fields];s.splice(2,0,{field:i}),h===Z.f1.None&&s.push(...p.$4.map((e=>({field:e})))),z.fields=s}const _={generatePerformanceTransactionEventsView:()=>{const e=this.generateEventView(z,S);return e.query=f,e},handleOpenAllEventsClick:this.handleAllEventsViewClick},j={generateDiscoverEventView:()=>this.generateEventView(z,S),handleOpenInDiscoverClick:this.handleDiscoverViewClick};return(0,$.BX)(i.Fragment,{children:[(0,$.BX)(T.or,{children:[(0,$.BX)(Xe,{children:[(0,$.tZ)(Z.ZP,{organization:s,currentFilter:h,onChangeFilter:m}),(0,$.tZ)(Ke,{searchSource:"transaction_summary",organization:s,projectIds:t.project,query:f,fields:t.fields,onSearch:this.handleSearch,maxQueryLength:q.dI})]}),(0,$.tZ)(E.Z,{organization:s,location:a,eventView:t,totalValues:y,currentFilter:h,withoutZerofill:v}),(0,$.tZ)(C.Z,{location:a,organization:s,eventView:z,...g?_:j,showTransactions:(0,u.ro)(a.query.showTransactions,B.K0.SLOW),breakdown:(0,Z.q0)(a),titles:S,handleDropdownChange:this.handleTransactionsListSortChange,generateLink:{id:(0,B.vd)(n),trace:(0,B.Z6)(t.normalizeDateSelection(a))},baseline:n,handleBaselineClick:this.handleViewDetailsClick,handleCellAction:this.handleCellAction,...Ae(a,{p95:null!==(e=null==d?void 0:d.p95)&&void 0!==e?e:0,spanOperationBreakdownFilter:h}),forceLoading:l}),(0,$.tZ)(V.Z,{requireAll:!1,features:["performance-tag-explorer","performance-tag-page"],children:(0,$.tZ)(Fe.D_,{eventView:t,organization:s,location:a,projects:o,transactionName:n,currentFilter:h})}),(0,$.tZ)(J,{organization:s,location:a,transaction:n,start:t.start,end:t.end,statsPeriod:t.statsPeriod})]}),(0,$.BX)(T.MF,{children:[(0,$.tZ)(Ee,{organization:s,location:a,isLoading:l,hasWebVitals:w,error:c,totals:d,transactionName:n,eventView:t}),!k&&(0,$.tZ)(Te,{eventView:t,organization:s,location:a}),(0,$.tZ)(B.uI,{}),(0,$.tZ)(we,{organization:s,isLoading:l,error:c,totals:d,eventView:t}),(0,$.tZ)(B.uI,{}),(0,$.tZ)(L.Z,{generateUrl:this.generateTagUrl,totalValues:y,eventView:t,organization:s,location:a})]})]})}}function Ae(e,t){const n=function({p95:e,spanOperationBreakdownFilter:t}){if(t===Z.f1.None)return[{sort:{kind:"asc",field:"transaction.duration"},value:B.K0.FASTEST,label:(0,r.t)("Fastest Transactions")},{query:[["transaction.duration","<=".concat(e.toFixed(0))]],sort:{kind:"desc",field:"transaction.duration"},value:B.K0.SLOW,label:(0,r.t)("Slow Transactions (p95)")},{sort:{kind:"desc",field:"transaction.duration"},value:B.K0.OUTLIER,label:(0,r.t)("Outlier Transactions (p100)")},{sort:{kind:"desc",field:"timestamp"},value:B.K0.RECENT,label:(0,r.t)("Recent Transactions")}];const n=(0,Z.T$)(t),i=t;return[{sort:{kind:"asc",field:n},value:B.K0.FASTEST,label:(0,r.t)("Fastest %s Operations",i)},{query:[["transaction.duration","<=".concat(e.toFixed(0))]],sort:{kind:"desc",field:n},value:B.K0.SLOW,label:(0,r.t)("Slow %s Operations (p95)",i)},{sort:{kind:"desc",field:n},value:B.K0.OUTLIER,label:(0,r.t)("Outlier %s Operations (p100)",i)},{sort:{kind:"desc",field:"timestamp"},value:B.K0.RECENT,label:(0,r.t)("Recent Transactions")}]}(t),i=(0,u.ro)(e.query.showTransactions,B.K0.SLOW);return{selected:n.find((e=>e.value===i))||n[0],options:n}}Oe.displayName="SummaryContent";const Xe=(0,S.Z)("div",{target:"ent1li2"})("display:flex;width:100%;margin-bottom:",(0,D.Z)(3),";"),Ke=(0,S.Z)(j.Z,{target:"ent1li1"})({name:"1ff36h2",styles:"flex-grow:1"});(0,S.Z)(P.Z,{target:"ent1li0"})("@media (min-width: ",(e=>e.theme.breakpoints[1]),"){margin-bottom:0;}").defaultProps={Wrapper:e=>(0,$.tZ)(T.or,{fullWidth:!0,...e})};const Ue=(0,f.Z)(Oe);var We=n("./app/views/performance/transactionSummary/transactionOverview/latencyChart.tsx");function Re(e){const{api:t,location:n,selection:a,organization:r,projects:o}=e;return(0,i.useEffect)((()=>{(0,s.QK)(t,r.slug,a),(0,x.n4)(a)}),[a]),(0,$.tZ)(y.Z,{location:n,organization:r,projects:o,tab:w.Z.TransactionSummary,getDocumentTitle:$e,generateEventView:Qe,childComponent:Me})}function Me(e){const{location:t,organization:n,eventView:i,transactionName:s,transactionThreshold:r,transactionThresholdMetric:c}=e,p=(0,Z.q0)(t),u=function(e,t){const n=b.PE.map((({vitals:e})=>e)).reduce(((e,t)=>(t.forEach((t=>e.push(t))),e)),[]);return t.withColumns([{kind:"function",function:["p95","",void 0,void 0]},{kind:"function",function:["count","",void 0,void 0]},{kind:"function",function:["count_unique","user",void 0,void 0]},{kind:"function",function:["failure_rate","",void 0,void 0]},{kind:"function",function:["tpm","",void 0,void 0]},{kind:"function",function:["count_miserable","user",void 0,void 0]},{kind:"function",function:["user_misery","",void 0,void 0]},{kind:"function",function:["apdex","",void 0,void 0]},...n.map((e=>({kind:"function",function:["percentile",e,b.GW.toString(),void 0]})))])}(0,i),m=e=>{(0,o.ec)({eventName:"Performance Views: Filter Dropdown",eventKey:"performance_views.filter_dropdown.selection",organization_id:parseInt(n.id,10),action:e});const i={...(0,d.V)(t,[We.Oo,We.mo]),...(0,Z.bz)(e)};e===Z.f1.None&&delete i.breakdown,a.browserHistory.push({pathname:t.pathname,query:i})};return(0,$.tZ)(l.Z,{eventView:u,orgSlug:n.slug,location:t,transactionThreshold:r,transactionThresholdMetric:c,referrer:"api.performance.transaction-summary",children:({isLoading:e,error:a,tableData:r})=>{var o,l;const c=null!==(o=null==r||null===(l=r.data)||void 0===l?void 0:l[0])&&void 0!==o?o:null;return(0,$.tZ)(Ue,{location:t,organization:n,eventView:i,transactionName:s,isLoading:e,error:a,totalValues:c,onChangeFilter:m,spanOperationBreakdownFilter:p})}})}function $e(e){return"string"==typeof e&&String(e).trim().length>0?[String(e).trim(),(0,r.t)("Performance")].join(" - "):[(0,r.t)("Summary"),(0,r.t)("Performance")].join(" - ")}function Qe(e,t){const n=(0,u.ro)(e.query.query,""),i=new m.MY(n);return i.setFilterValues("event.type",["transaction"]).setFilterValues("transaction",[t]),Object.keys(i.filters).forEach((e=>{(0,p.h1)(e)&&i.removeFilter(e)})),c.ZP.fromNewQueryWithLocation({id:void 0,version:2,name:t,fields:["id","user.display","transaction.duration","trace","timestamp"],query:i.formatString(),projects:[]},e)}Re.displayName="TransactionOverview",Me.displayName="OverviewContentWrapper";const Ge=(0,h.Z)((0,g.Z)((0,f.Z)((0,v.Z)(Re))))},"./app/views/performance/transactionSummary/transactionVitals/constants.tsx":(e,t,n)=>{n.d(t,{sE:()=>r,GW:()=>o,PE:()=>p,QB:()=>d}),n("../node_modules/core-js/modules/es.array.reverse.js"),n("../node_modules/core-js/modules/web.dom-collections.iterator.js");var i=n("./app/utils/discover/fields.tsx"),a=n("./app/utils/performance/vitals/constants.tsx"),s=n("./app/utils/theme.tsx");const r=100,o=.75,l=[{vitals:[i.Zl.FP,i.Zl.FCP,i.Zl.LCP],min:0},{vitals:[i.Zl.FID],min:0,precision:2},{vitals:[i.Zl.CLS],min:0,precision:2}],c=[...s.ZP.charts.getColorPalette(l.reduce(((e,{vitals:t})=>e+t.length),0)-1)].reverse(),p=l.map((e=>({...e,colors:c.splice(0,e.vitals.length)}))),d=l.reduce(((e,{vitals:t})=>(t.forEach((t=>{const n=a.r[t].slug;e.push("".concat(n,"Start")),e.push("".concat(n,"End"))})),e)),[])},"./app/views/performance/vitalDetail/vitalInfo.tsx":(e,t,n)=>{n.d(t,{Z:()=>r});var i=n("./app/utils/performance/vitals/vitalsCardsDiscoverQuery.tsx"),a=n("./app/views/performance/landing/vitalsCards.tsx"),s=n("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function r(e){const{vital:t,eventView:n,organization:r,location:o,hideBar:l,hideStates:c,hideVitalPercentNames:p,hideDurationDetail:d}=e;return(0,s.tZ)(i.Z,{eventView:n,orgSlug:r.slug,location:o,vitals:Array.isArray(t)?t:[t],children:({isLoading:e,vitalsData:n})=>(0,s.tZ)(a.JO,{isLoading:e,data:n,vital:t,showBar:!l,showStates:!c,showVitalPercentNames:!p,showDurationDetail:!d})})}r.displayName="vitalInfo"}}]);
//# sourceMappingURL=../sourcemaps/app_views_performance_transactionSummary_transactionOverview_index_tsx.b1cc83aa1efd84d18da8345cd9887b61.js.map