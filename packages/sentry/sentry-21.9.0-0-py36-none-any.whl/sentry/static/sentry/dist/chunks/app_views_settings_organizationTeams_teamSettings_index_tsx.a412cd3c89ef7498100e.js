"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_settings_organizationTeams_teamSettings_index_tsx"],{"./app/actionCreators/teams.tsx":(e,t,s)=>{s.d(t,{eM:()=>c,z_:()=>l,fs:()=>m,um:()=>p,s:()=>u,Cm:()=>h,tT:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var o=s("./app/actionCreators/indicator.tsx"),a=s("./app/actions/teamActions.tsx"),r=s("./app/locale.tsx"),n=s("./app/utils/callIfFunction.tsx"),i=s("./app/utils/guid.tsx");const d=(e={},t,...s)=>{(0,n.g)(e[t],...s)};function c(e,t,s){return a.Z.fetchDetails(t.teamId),e.request("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{success:e=>{a.Z.fetchDetailsSuccess(t.teamId,e),d(s,"success",e)},error:e=>{a.Z.fetchDetailsError(t.teamId,e),d(s,"error",e)}})}function l(e,t){a.Z.updateSuccess(e,t)}function m(e,t,s){const o="/teams/".concat(t.orgId,"/").concat(t.teamId,"/");return a.Z.update(t.teamId,t.data),e.request(o,{method:"PUT",data:t.data,success:e=>{l(t.teamId,e),d(s,"success",e)},error:e=>{a.Z.updateError(t.teamId,e),d(s,"error",e)}})}function p(e,t,s){var o;const r="/organizations/".concat(t.orgId,"/members/").concat(null!==(o=t.memberId)&&void 0!==o?o:"me","/teams/").concat(t.teamId,"/"),n=(0,i.E)();return a.Z.update(n,t.teamId),e.request(r,{method:"POST",success:e=>{a.Z.updateSuccess(t.teamId,e),d(s,"success",e)},error:e=>{a.Z.updateError(n,t.teamId,e),d(s,"error",e)}})}function u(e,t,s){const o="/organizations/".concat(t.orgId,"/members/").concat(t.memberId||"me","/teams/").concat(t.teamId,"/"),r=(0,i.E)();return a.Z.update(r,t.teamId),e.request(o,{method:"DELETE",success:e=>{a.Z.updateSuccess(t.teamId,e),d(s,"success",e)},error:e=>{a.Z.updateError(r,t.teamId,e),d(s,"error",e)}})}function h(e,t,s){return a.Z.createTeam(t),e.requestPromise("/organizations/".concat(s.orgId,"/teams/"),{method:"POST",data:t}).then((e=>(a.Z.createTeamSuccess(e),(0,o.S9)((0,r._N)("[team] has been added to the [organization] organization",{team:"#".concat(e.slug),organization:s.orgId})),e)),(e=>{throw a.Z.createTeamError(t.slug,e),(0,o.Iw)((0,r._N)("Unable to create [team] in the [organization] organization",{team:"#".concat(t.slug),organization:s.orgId})),e}))}function g(e,t){return a.Z.removeTeam(t.teamId),e.requestPromise("/teams/".concat(t.orgId,"/").concat(t.teamId,"/"),{method:"DELETE"}).then((e=>(a.Z.removeTeamSuccess(t.teamId,e),(0,o.S9)((0,r._N)("[team] has been removed from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e)),(e=>{throw a.Z.removeTeamError(t.teamId,e),(0,o.Iw)((0,r._N)("Unable to remove [team] from the [organization] organization",{team:"#".concat(t.teamId),organization:t.orgId})),e}))}},"./app/data/forms/teamSettingsFields.tsx":(e,t,s)=>{s.r(t),s.d(t,{route:()=>r,default:()=>n});var o=s("./app/locale.tsx"),a=s("./app/utils/slugify.tsx");const r="/settings/:orgId/teams/:teamId/settings/",n=[{title:"Team Settings",fields:[{name:"slug",type:"string",required:!0,label:(0,o.t)("Name"),placeholder:"e.g. api-team",help:(0,o.t)("A unique ID used to identify the team"),disabled:({access:e})=>!e.has("team:write"),transformInput:a.Z,saveOnBlur:!1,saveMessageAlertType:"info",saveMessage:(0,o.t)("You will be redirected to the new team slug after saving")}]}]},"./app/utils/slugify.tsx":(e,t,s)=>{function o(e){return"string"==typeof e?e.toLowerCase().replace(" ","-"):""}s.d(t,{Z:()=>o}),s("../node_modules/core-js/modules/es.string.replace.js")},"./app/views/asyncView.tsx":(e,t,s)=>{s.d(t,{Z:()=>i}),s("../node_modules/react/index.js");var o=s("../node_modules/react-document-title/index.js"),a=s.n(o),r=s("./app/components/asyncComponent.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class i extends r.Z{getTitle(){return""}render(){const e=this.getTitle();return(0,n.tZ)(a(),{title:"".concat(e?"".concat(e," - "):"","Sentry"),children:this.renderComponent()})}}i.displayName="AsyncView"},"./app/views/settings/components/forms/formPanel.tsx":(e,t,s)=>{s.d(t,{Z:()=>m});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),n=s("./app/components/panels/index.tsx"),i=s("./app/icons/index.tsx"),d=s("./app/utils/sanitizeQuerySelector.tsx"),c=s("./app/views/settings/components/forms/fieldFromConfig.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends r.Component{constructor(...e){super(...e),(0,o.Z)(this,"state",{collapsed:!1}),(0,o.Z)(this,"handleToggleEvents",(()=>{const{collapsed:e}=this.state;this.setState({collapsed:!e})}))}render(){const{title:e,fields:t,access:s,disabled:o,additionalFieldProps:a,renderFooter:r,renderHeader:m,collapsible:u,...h}=this.props,{collapsed:g}=this.state;return(0,l.BX)(n.s_,{id:"string"==typeof e?(0,d.m)(e):void 0,children:[e&&(0,l.BX)(n.V9,{children:[e,u&&(0,l.tZ)(p,{onClick:this.handleToggleEvents,children:(0,l.tZ)(i.g6,{direction:g?"down":"up",size:"xs"})})]}),!g&&(0,l.BX)(n.N,{children:["function"==typeof m&&m({title:e,fields:t}),t.map((e=>{if("function"==typeof e)return e();const{defaultValue:t,...r}=e;return!0===o&&(r.disabled=!0,r.disabledReason=void 0),(0,l.tZ)(c.Z,{access:s,disabled:o,...h,...a,field:r,highlighted:this.props.highlighted==="#".concat(e.name)},e.name)})),"function"==typeof r&&r({title:e,fields:t})]})]})}}m.displayName="FormPanel",(0,o.Z)(m,"defaultProps",{additionalFieldProps:{}});const p=(0,a.Z)("span",{target:"efsz5z60"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/views/settings/components/forms/jsonForm.tsx":(e,t,s)=>{s.d(t,{Z:()=>h});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("../node_modules/react-router/es/index.js"),n=s("../node_modules/@sentry/minimal/esm/index.js"),i=s("../node_modules/scroll-to-element/index.js"),d=s.n(i),c=s("./app/utils.tsx"),l=s("./app/utils/sanitizeQuerySelector.tsx"),m=s("./app/views/settings/components/forms/formPanel.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class u extends a.Component{constructor(...e){var t;super(...e),(0,o.Z)(this,"state",{highlighted:null===(t=this.props.location)||void 0===t?void 0:t.hash})}componentDidMount(){this.scrollToHash()}UNSAFE_componentWillReceiveProps(e){if(this.props.location.hash!==e.location.hash){const t=e.location.hash;this.scrollToHash(t),this.setState({highlighted:t})}}scrollToHash(e){var t;const s=e||(null===(t=this.props.location)||void 0===t?void 0:t.hash);if(s)try{d()((0,l.m)(decodeURIComponent(s)),{align:"middle",offset:-100})}catch(e){n.Tb(e)}}shouldDisplayForm(e){const t=e.filter((e=>"function"!=typeof e&&(0,c.ri)(null==e?void 0:e.visible)));if(e.length===t.length){const{additionalFieldProps:e,...s}=this.props;return!t.every((t=>"function"==typeof t.visible?!t.visible({...s,...e}):!t.visible))}return!0}renderForm({fields:e,formPanelProps:t,title:s}){return this.shouldDisplayForm(e)||null!=t&&t.renderFooter||null!=t&&t.renderHeader?(0,p.tZ)(m.Z,{title:s,fields:e,...t}):null}render(){const{access:e,collapsible:t,fields:s,title:o,forms:r,disabled:n,features:i,additionalFieldProps:d,renderFooter:c,renderHeader:l,location:m,...u}=this.props,h={access:e,disabled:n,features:i,additionalFieldProps:d,renderFooter:c,renderHeader:l,highlighted:this.state.highlighted,collapsible:t};return(0,p.BX)("div",{...u,children:[void 0!==r&&r.map(((e,t)=>(0,p.tZ)(a.Fragment,{children:this.renderForm({formPanelProps:h,...e})},t))),void 0===r&&void 0!==s&&this.renderForm({fields:s,formPanelProps:h,title:o})]})}}u.displayName="JsonForm";const h=(0,r.withRouter)(u)},"./app/views/settings/organizationTeams/teamSettings/index.tsx":(e,t,s)=>{s.r(t),s.d(t,{default:()=>j});var o=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),a=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/core-js/modules/es.string.replace.js"),s("../node_modules/react/index.js")),r=s("../node_modules/react-router/es/index.js"),n=s("./app/actionCreators/indicator.tsx"),i=s("./app/actionCreators/teams.tsx"),d=s("./app/components/button.tsx"),c=s("./app/components/confirm.tsx"),l=s("./app/components/panels/index.tsx"),m=s("./app/data/forms/teamSettingsFields.tsx"),p=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),h=s("./app/utils/withOrganization.tsx"),g=s("./app/views/asyncView.tsx"),f=s("./app/views/settings/components/forms/field/index.tsx"),x=s("./app/views/settings/components/forms/form.tsx"),v=s("./app/views/settings/components/forms/jsonForm.tsx"),Z=s("./app/views/settings/components/forms/model.tsx");class b extends Z.Z{constructor(e,t){super(),(0,o.Z)(this,"orgId",void 0),(0,o.Z)(this,"teamId",void 0),this.orgId=e,this.teamId=t}doApiRequest({data:e}){return new Promise(((t,s)=>(0,i.fs)(this.api,{orgId:this.orgId,teamId:this.teamId,data:e},{success:t,error:s})))}}const I=b;var w=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class y extends g.Z{constructor(...e){super(...e),(0,o.Z)(this,"model",new I(this.props.params.orgId,this.props.params.teamId)),(0,o.Z)(this,"handleSubmitSuccess",((e,t,s)=>{(0,i.z_)(e.slug,e),"slug"===s&&((0,n.S9)((0,u.t)("Team name changed")),r.browserHistory.replace("/settings/".concat(this.props.params.orgId,"/teams/").concat(t.getValue(s),"/settings/")),this.setState({loading:!0}))})),(0,o.Z)(this,"handleRemoveTeam",(async()=>{await(0,i.tT)(this.api,this.props.params),r.browserHistory.replace("/settings/".concat(this.props.params.orgId,"/teams/"))}))}getTitle(){return"Team Settings"}getEndpoints(){return[]}renderBody(){const{organization:e,team:t}=this.props,s=new Set(e.access);return(0,w.BX)(a.Fragment,{children:[(0,w.tZ)(x.Z,{model:this.model,apiMethod:"PUT",saveOnBlur:!0,allowUndo:!0,onSubmitSuccess:this.handleSubmitSuccess,onSubmitError:()=>(0,n.Iw)((0,u.t)("Unable to save change")),initialData:{name:t.name,slug:t.slug},children:(0,w.tZ)(v.Z,{access:s,forms:m.default})}),(0,w.BX)(l.s_,{children:[(0,w.tZ)(l.V9,{children:(0,u.t)("Remove Team")}),(0,w.tZ)(f.Z,{help:(0,u.t)("This may affect team members' access to projects and associated alert delivery."),children:(0,w.tZ)("div",{children:(0,w.tZ)(c.Z,{disabled:!s.has("team:admin"),onConfirm:this.handleRemoveTeam,priority:"danger",message:(0,u._N)("Are you sure you want to remove the team [team]?",{team:"#".concat(t.slug)}),children:(0,w.tZ)(d.ZP,{icon:(0,w.tZ)(p.Fz,{}),priority:"danger",disabled:!s.has("team:admin"),children:(0,u.t)("Remove Team")})})})})]})]})}}const j=(0,h.Z)(y)}}]);
//# sourceMappingURL=../sourcemaps/app_views_settings_organizationTeams_teamSettings_index_tsx.ae51cfa6cc0f4d6c987667282b22f839.js.map