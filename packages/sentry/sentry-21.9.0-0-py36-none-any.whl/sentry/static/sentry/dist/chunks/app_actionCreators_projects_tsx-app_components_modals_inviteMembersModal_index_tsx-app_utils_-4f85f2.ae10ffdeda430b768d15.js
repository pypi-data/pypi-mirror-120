(self.webpackChunk=self.webpackChunk||[]).push([["app_actionCreators_projects_tsx-app_components_modals_inviteMembersModal_index_tsx-app_utils_-4f85f2"],{"./app/actionCreators/projects.tsx":(e,t,s)=>{"use strict";s.d(t,{Vx:()=>u,Nh:()=>m,$P:()=>g,pK:()=>v,rR:()=>f,bL:()=>S,Oe:()=>j,M9:()=>Z,TA:()=>x,$L:()=>b,iC:()=>y,xV:()=>w,mf:()=>_}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/lodash/chunk.js"),o=s.n(n),i=s("../node_modules/lodash/debounce.js"),r=s.n(i),a=s("./app/actionCreators/indicator.tsx"),l=s("./app/actions/projectActions.tsx"),d=s("./app/locale.tsx"),c=s("./app/stores/projectsStatsStore.tsx");function u(e,t){l.Z.update(t.projectId,t.data);const s="/projects/".concat(t.orgId,"/").concat(t.projectId,"/");return e.requestPromise(s,{method:"PUT",data:t.data}).then((e=>(l.Z.updateSuccess(e),e)),(e=>{throw l.Z.updateError(e,t.projectId),e}))}function m(e,t){l.Z.loadStats(t.orgId,t.data);const s="/organizations/".concat(t.orgId,"/stats/");e.request(s,{query:t.query,success:e=>{l.Z.loadStatsSuccess(e)},error:e=>{l.Z.loadStatsError(e)}})}const p=new Set,h=r()(((e,t,s)=>{const n=c.Z.getAll(),i=Object.values(n).map((({id:e})=>e)),r=Array.from(t).filter((e=>!i.includes(e)));if(!r.length)return void p.clear();const u=o()(r,10).map((t=>((e,t,s,n)=>{const o=t.map((e=>"id:".concat(e))).join(" "),i="/organizations/".concat(s,"/projects/"),r={statsPeriod:"24h",query:o,...n};return e.requestPromise(i,{query:r})})(e,t,s.orgId,s.query)));Promise.all(u).then((e=>{l.Z.loadStatsForProjectSuccess(e.reduce(((e,t)=>e.concat(t)),[]))})).catch((()=>{(0,a.Iw)((0,d.t)("Unable to fetch all project stats"))})),p.clear()}),50);function g(e,t,s){p.add(t),h(e,p,s)}function v(e){l.Z.setActive(e)}function f(e,t,s){const n="/projects/".concat(t,"/").concat(s.slug,"/");return l.Z.removeProject(s),e.requestPromise(n,{method:"DELETE"}).then((()=>{l.Z.removeProjectSuccess(s),(0,a.S9)((0,d._N)("[project] was successfully removed",{project:s.slug}))}),(e=>{throw l.Z.removeProjectError(s),(0,a.Iw)((0,d._N)("Error removing [project]",{project:s.slug})),e}))}function S(e,t,s,n){const o="/projects/".concat(t,"/").concat(s.slug,"/transfer/");return e.requestPromise(o,{method:"POST",data:{email:n}}).then((()=>{(0,a.S9)((0,d._N)("A request was sent to move [project] to a different organization",{project:s.slug}))}),(e=>{let t="";var n;throw e.status>=400&&e.status<500&&e.responseJSON&&(t=null===(n=e.responseJSON)||void 0===n?void 0:n.detail),t?(0,a.Iw)((0,d._N)("Error transferring [project]. [message]",{project:s.slug,message:t})):(0,a.Iw)((0,d._N)("Error transferring [project]",{project:s.slug})),e}))}function j(e,t,s,n){const o="/projects/".concat(t,"/").concat(s,"/teams/").concat(n.slug,"/");return(0,a.E3)(),l.Z.addTeam(n),e.requestPromise(o,{method:"POST"}).then((e=>{(0,a.S9)((0,d._N)("[team] has been added to the [project] project",{team:"#".concat(n.slug),project:s})),l.Z.addTeamSuccess(n,s),l.Z.updateSuccess(e)}),(e=>{throw(0,a.Iw)((0,d._N)("Unable to add [team] to the [project] project",{team:"#".concat(n.slug),project:s})),l.Z.addTeamError(),e}))}function Z(e,t,s,n){const o="/projects/".concat(t,"/").concat(s,"/teams/").concat(n,"/");return(0,a.E3)(),l.Z.removeTeam(n),e.requestPromise(o,{method:"DELETE"}).then((e=>{(0,a.S9)((0,d._N)("[team] has been removed from the [project] project",{team:"#".concat(n),project:s})),l.Z.removeTeamSuccess(n,s),l.Z.updateSuccess(e)}),(e=>{throw(0,a.Iw)((0,d._N)("Unable to remove [team] from the [project] project",{team:"#".concat(n),project:s})),l.Z.removeTeamError(e),e}))}function x(e,t){l.Z.changeSlug(e,t)}function b(e,t,s,n,o,i={}){return e.requestPromise("/teams/".concat(t,"/").concat(s,"/projects/"),{method:"POST",data:{name:n,platform:o,default_rules:i.defaultRules}})}function y(e,t,s,n){return e.requestPromise("/projects/".concat(t,"/").concat(s,"/docs/").concat(n,"/"))}function w(e,t){return e.requestPromise("/organizations/".concat(t,"/projects-count/"))}async function _(e,t,s){return(await e.requestPromise("/organizations/".concat(t,"/releases/stats/"),{method:"GET",query:{statsPeriod:"90d",project:s,per_page:1}})).length>0}},"./app/actions/navigationActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/reflux/src/index.js");const o=s.n(n)().createActions(["setLastRoute"])},"./app/actions/organizationActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/reflux/src/index.js");const o=s.n(n)().createActions(["fetchOrg","fetchOrgError","update"])},"./app/actions/organizationsActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/reflux/src/index.js");const o=s.n(n)().createActions(["update","setActive","changeSlug","remove","removeSuccess","removeError"])},"./app/actions/projectActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/reflux/src/index.js");const o=s.n(n)().createActions(["addTeam","addTeamError","addTeamSuccess","changeSlug","createSuccess","loadProjects","loadStats","loadStatsError","loadStatsForProjectSuccess","loadStatsSuccess","removeProject","removeProjectError","removeProjectSuccess","removeTeam","removeTeamError","removeTeamSuccess","reset","setActive","update","updateError","updateSuccess"])},"./app/actions/teamActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>o});var n=s("../node_modules/reflux/src/index.js");const o=s.n(n)().createActions(["createTeam","createTeamError","createTeamSuccess","fetchAll","fetchAllError","fetchAllSuccess","fetchDetails","fetchDetailsError","fetchDetailsSuccess","loadTeams","removeTeam","removeTeamError","removeTeamSuccess","update","updateError","updateSuccess"])},"./app/components/hookOrDefault.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/stores/hookStore.tsx"),r=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const a=function({hookName:e,defaultComponent:t,defaultComponentPromise:s}){class a extends o.Component{constructor(...t){super(...t),(0,n.Z)(this,"state",{hooks:i.Z.get(e)}),(0,n.Z)(this,"unlistener",i.Z.listen(((t,s)=>t===e&&this.setState({hooks:s})),void 0))}componentWillUnmount(){var e;null===(e=this.unlistener)||void 0===e||e.call(this)}get defaultComponent(){if(s){const e=o.lazy(s);return t=>(0,r.tZ)(o.Suspense,{fallback:null,children:(0,r.tZ)(e,{...t})})}return t}render(){var e,t;const s=this.state.hooks&&this.state.hooks.length,n=null===(e=(t=this.state.hooks)[0])||void 0===e?void 0:e.call(t),o=s&&n?n:this.defaultComponent;return o?(0,r.tZ)(o,{...this.props}):null}}return a.displayName="HookOrDefaultComponent",(0,n.Z)(a,"displayName","HookOrDefaultComponent(".concat(e,")")),a}},"./app/components/modals/inviteMembersModal/index.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>W,modalCss:()=>X});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),i=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("../node_modules/@emotion/react/dist/emotion-react.browser.esm.js"),a=s("./app/components/asyncComponent.tsx"),l=s("./app/components/button.tsx"),d=s("./app/components/hookOrDefault.tsx"),c=s("./app/components/loadingIndicator.tsx"),u=s("./app/components/questionTooltip.tsx"),m=s("./app/constants/index.tsx"),p=s("./app/icons/index.tsx"),h=s("./app/locale.tsx"),g=s("./app/styles/space.tsx"),v=s("./app/utils/analytics.tsx"),f=s("./app/utils/guid.tsx"),S=s("./app/utils/withLatestContext.tsx"),j=s("../node_modules/@emotion/react/dist/emotion-element-a8309070.browser.esm.js"),Z=s("./app/components/forms/selectControl.tsx"),x=s("./app/components/forms/teamSelector.tsx"),b=s("./app/components/roleSelectControl.tsx"),y=s("./app/icons/iconClose.tsx"),w=s("../node_modules/react-select/dist/chunk-80640036.browser.esm.js"),_=s("./app/components/tooltip.tsx"),I=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function z(e,t){const{children:s,...n}=t,o=e&&e.error,i=void 0===e?s:(0,I.tZ)(_.Z,{disabled:!o,title:o,children:(0,I.BX)(C,{children:[s,!e.sent&&!e.error&&(0,I.tZ)(E,{}),e.error&&(0,I.tZ)(p.FC,{size:"10px"}),e.sent&&(0,I.tZ)(p.DL,{size:"10px",color:"success"})]})});return(0,I.tZ)(w.y.MultiValue,{...n,children:i})}z.displayName="renderEmailValue";const C=(0,o.Z)("div",{target:"em6kqk41"})("display:inline-grid;grid-auto-flow:column;grid-gap:",(0,g.Z)(.5),";align-items:center;"),E=(0,o.Z)(c.Z,{target:"em6kqk40"})({name:"440peb",styles:"margin:0;.loading-indicator{border-width:2px;}"});E.defaultProps={hideMessage:!0,size:14};const T=z;function P(e){return e.map((e=>({value:e,label:e})))}class A extends i.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{inputValue:""}),(0,n.Z)(this,"handleInputChange",(e=>{this.setState({inputValue:e})})),(0,n.Z)(this,"handleKeyDown",(e=>{const{onChangeEmails:t,emails:s}=this.props,{inputValue:n}=this.state;switch(e.key){case"Enter":case",":case" ":t([...P(s),{label:n,value:n}]),this.setState({inputValue:""}),e.preventDefault()}}))}render(){const{className:e,disabled:t,emails:s,role:n,teams:o,roleOptions:i,roleDisabledUnallowed:r,inviteStatus:a,onRemove:d,onChangeEmails:c,onChangeRole:u,onChangeTeams:m,disableRemove:p,theme:g}=this.props;return(0,I.BX)("div",{className:e,children:[(0,I.tZ)(Z.Z,{"data-test-id":"select-emails",disabled:t,placeholder:(0,h.t)("Enter one or more emails"),inputValue:this.state.inputValue,value:s,components:{MultiValue:e=>function(e,t){return T(t[e.data.value],e)}(e,a),DropdownIndicator:()=>null},options:P(s),onBlur:e=>e.target.value&&c([...P(s),{label:e.target.value,value:e.target.value}]),styles:O(g,a),onInputChange:this.handleInputChange,onKeyDown:this.handleKeyDown,onChange:c,multiple:!0,creatable:!0,clearable:!0,menuIsOpen:!1}),(0,I.tZ)(b.Z,{"data-test-id":"select-role",disabled:t,value:n,roles:i,disableUnallowed:r,onChange:u}),(0,I.tZ)(x.Z,{"data-test-id":"select-teams",disabled:t,placeholder:(0,h.t)("Add to teams…"),value:o,onChange:m,multiple:!0,clearable:!0}),(0,I.tZ)(l.ZP,{borderless:!0,icon:(0,I.tZ)(y.b,{}),size:"zero",onClick:d,disabled:p})]})}}function O(e,t){return{multiValue:(s,{data:n})=>{const o=t[n.value];return{...s,...null!=o&&o.error?{color:e.red300,border:"1px solid ".concat(e.red300),backgroundColor:e.red100}:{}}},multiValueLabel:(s,{data:n})=>{const o=t[n.value];return{...s,pointerEvents:"all",...null!=o&&o.error?{color:e.red300}:{}}},multiValueRemove:(s,{data:n})=>{const o=t[n.value];return{...s,...null!=o&&o.error?{borderLeft:"1px solid ".concat(e.red300),":hover":{backgroundColor:e.red100,color:e.red300}}:{}}}}}A.displayName="InviteRowControl";const N=(0,j.b)(A),R=(0,d.Z)({hookName:"member-invite-modal:customization",defaultComponent:({onSendInvites:e,children:t})=>t({sendInvites:e,canSend:!0})});class k extends a.Z{constructor(...e){super(...e),(0,n.Z)(this,"sessionId",""),(0,n.Z)(this,"reset",(()=>{this.setState({pendingInvites:[this.inviteTemplate],inviteStatus:{},complete:!1,sendingInvites:!1}),(0,v.ec)({eventKey:"invite_modal.add_more",eventName:"Invite Modal: Add More",organization_id:this.props.organization.id,modal_session:this.sessionId})})),(0,n.Z)(this,"sendInvite",(async e=>{const{slug:t}=this.props.organization,s={email:e.email,teams:[...e.teams],role:e.role};this.setState((t=>({inviteStatus:{...t.inviteStatus,[e.email]:{sent:!1}}})));const n=this.willInvite?"/organizations/".concat(t,"/members/"):"/organizations/".concat(t,"/invite-requests/");try{await this.api.requestPromise(n,{method:"POST",data:s})}catch(t){const s=t.responseJSON,n=!(!s||!s.email)&&(Array.isArray(s.email)?s.email[0]:s.email)||(0,h.t)("Could not invite user");return void this.setState((t=>({inviteStatus:{...t.inviteStatus,[e.email]:{sent:!1,error:n}}})))}this.setState((t=>({inviteStatus:{...t.inviteStatus,[e.email]:{sent:!0}}})))})),(0,n.Z)(this,"sendInvites",(async()=>{this.setState({sendingInvites:!0}),await Promise.all(this.invites.map(this.sendInvite)),this.setState({sendingInvites:!1,complete:!0}),(0,v.ec)({eventKey:this.willInvite?"invite_modal.invites_sent":"invite_modal.requests_sent",eventName:this.willInvite?"Invite Modal: Invites Sent":"Invite Modal: Requests Sent",organization_id:this.props.organization.id,modal_session:this.sessionId})})),(0,n.Z)(this,"addInviteRow",(()=>this.setState((e=>({pendingInvites:[...e.pendingInvites,this.inviteTemplate]})))))}get inviteTemplate(){return{emails:new Set,teams:new Set,role:"member"}}componentDidMount(){this.sessionId=(0,f.E)();const{organization:e,source:t}=this.props;(0,v.ec)({eventKey:"invite_modal.opened",eventName:"Invite Modal: Opened",organization_id:e.id,modal_session:this.sessionId,can_invite:this.willInvite,source:t})}getEndpoints(){const e=this.props.organization.slug;return[["member","/organizations/".concat(e,"/members/me/")]]}getDefaultState(){const e=super.getDefaultState(),{initialData:t}=this.props;return{...e,pendingInvites:t?t.map((e=>({...this.inviteTemplate,...e}))):[this.inviteTemplate],inviteStatus:{},complete:!1,sendingInvites:!1}}setEmails(e,t){this.setState((s=>{const n=[...s.pendingInvites];return n[t]={...n[t],emails:new Set(e)},{pendingInvites:n}}))}setTeams(e,t){this.setState((s=>{const n=[...s.pendingInvites];return n[t]={...n[t],teams:new Set(e)},{pendingInvites:n}}))}setRole(e,t){this.setState((s=>{const n=[...s.pendingInvites];return n[t]={...n[t],role:e},{pendingInvites:n}}))}removeInviteRow(e){this.setState((t=>{const s=[...t.pendingInvites];return s.splice(e,1),{pendingInvites:s}}))}get invites(){return this.state.pendingInvites.reduce(((e,t)=>[...e,...[...t.emails].map((e=>({email:e,teams:t.teams,role:t.role})))]),[])}get hasDuplicateEmails(){const e=this.invites.map((e=>e.email));return e.length!==new Set(e).size}get isValidInvites(){return this.invites.length>0&&!this.hasDuplicateEmails}get statusMessage(){const{sendingInvites:e,complete:t,inviteStatus:s}=this.state;if(e)return(0,I.BX)(F,{children:[(0,I.tZ)(c.Z,{mini:!0,relative:!0,hideMessage:!0,size:16}),this.willInvite?(0,h.t)("Sending organization invitations..."):(0,h.t)("Sending invite requests...")]});if(t){const e=Object.values(s),t=e.filter((e=>e.sent)).length,n=e.filter((e=>e.error)).length;if(this.willInvite){const e={invites:(0,I.tZ)("strong",{children:(0,h.tn)("%s invite","%s invites",t)}),failed:n};return(0,I.BX)(F,{status:"success",children:[(0,I.tZ)(p.DL,{size:"sm"}),n>0?(0,h._N)("Sent [invites], [failed] failed to send.",e):(0,h._N)("Sent [invites]",e)]})}{const e={inviteRequests:(0,I.tZ)("strong",{children:(0,h.tn)("%s invite request","%s invite requests",t)}),failed:n};return(0,I.BX)(F,{status:"success",children:[(0,I.tZ)(p.DL,{size:"sm"}),n>0?(0,h._N)("[inviteRequests] pending approval, [failed] failed to send.",e):(0,h._N)("[inviteRequests] pending approval",e)]})}}return this.hasDuplicateEmails?(0,I.BX)(F,{status:"error",children:[(0,I.tZ)(p.FC,{size:"sm"}),(0,h.t)("Duplicate emails between invite rows.")]}):null}get willInvite(){var e;return null===(e=this.props.organization.access)||void 0===e?void 0:e.includes("member:write")}get inviteButtonLabel(){if(this.invites.length>0){const e=this.invites.length,t=1===e?(0,h.t)("Send invite"):(0,h.t)("Send invites (%s)",e),s=1===e?(0,h.t)("Send invite request"):(0,h.t)("Send invite requests (%s)",e);return this.willInvite?t:s}return this.willInvite?(0,h.t)("Send invite"):(0,h.t)("Send invite request")}render(){const{Footer:e,closeModal:t,organization:s}=this.props,{pendingInvites:n,sendingInvites:o,complete:r,inviteStatus:a,member:d}=this.state,c=o||r;return(0,I.tZ)(R,{organization:s,willInvite:this.willInvite,onSendInvites:this.sendInvites,children:({sendInvites:s,canSend:o,headerInfo:g})=>(0,I.BX)(i.Fragment,{children:[(0,I.BX)(D,{children:[(0,h.t)("Invite New Members"),!this.willInvite&&(0,I.tZ)(u.Z,{title:(0,h.t)("You do not have permission to directly invite members. Email\n                 addresses entered here will be forwarded to organization\n                 managers and owners; they will be prompted to approve the\n                 invitation."),size:"sm",position:"bottom"})]}),(0,I.tZ)(q,{children:this.willInvite?(0,h.t)("Invite new members by email to join your organization."):(0,h.t)("You don’t have permission to directly invite users, but we'll send a request to your organization owner and manager for review.")}),g,(0,I.BX)(M,{children:[(0,I.tZ)("div",{children:(0,h.t)("Email addresses")}),(0,I.tZ)("div",{children:(0,h.t)("Role")}),(0,I.tZ)("div",{children:(0,h.t)("Add to team")})]}),n.map((({emails:e,role:t,teams:s},o)=>(0,I.tZ)(U,{disabled:c,emails:[...e],role:t,teams:[...s],roleOptions:d?d.roles:m.v6,roleDisabledUnallowed:this.willInvite,inviteStatus:a,onRemove:()=>this.removeInviteRow(o),onChangeEmails:e=>{var t;return this.setEmails(null!==(t=null==e?void 0:e.map((e=>e.value)))&&void 0!==t?t:[],o)},onChangeRole:e=>this.setRole(null==e?void 0:e.value,o),onChangeTeams:e=>this.setTeams(e?e.map((e=>e.value)):[],o),disableRemove:c||1===n.length},o))),(0,I.tZ)(L,{disabled:c,priority:"link",onClick:this.addInviteRow,icon:(0,I.tZ)(p.N_,{size:"xs",isCircled:!0}),children:(0,h.t)("Add another")}),(0,I.tZ)(e,{children:(0,I.BX)(V,{children:[(0,I.tZ)("div",{children:this.statusMessage}),r?(0,I.BX)(i.Fragment,{children:[(0,I.tZ)(l.ZP,{"data-test-id":"send-more",size:"small",onClick:this.reset,children:(0,h.t)("Send more invites")}),(0,I.tZ)(l.ZP,{"data-test-id":"close",priority:"primary",size:"small",onClick:()=>{(0,v.ec)({eventKey:"invite_modal.closed",eventName:"Invite Modal: Closed",organization_id:this.props.organization.id,modal_session:this.sessionId}),t()},children:(0,h.t)("Close")})]}):(0,I.BX)(i.Fragment,{children:[(0,I.tZ)(l.ZP,{"data-test-id":"cancel",size:"small",onClick:t,disabled:c,children:(0,h.t)("Cancel")}),(0,I.tZ)(l.ZP,{size:"small","data-test-id":"send-invites",priority:"primary",disabled:!o||!this.isValidInvites||c,onClick:s,children:this.inviteButtonLabel})]})]})})]})})}}k.displayName="InviteMembersModal";const D=(0,o.Z)("h1",{target:"e1rmyp3r6"})("display:inline-grid;grid-gap:",(0,g.Z)(1.5),";grid-auto-flow:column;align-items:center;font-weight:400;font-size:",(e=>e.theme.headerFontSize),";margin-top:0;margin-bottom:",(0,g.Z)(.75),";"),q=(0,o.Z)("p",{target:"e1rmyp3r5"})("color:",(e=>e.theme.subText),";margin-bottom:",(0,g.Z)(3),";"),B=(0,r.iv)("display:grid;grid-gap:",(0,g.Z)(1.5),";grid-template-columns:3fr 180px 2fr max-content;",""),M=(0,o.Z)("div",{target:"e1rmyp3r4"})(B,";margin-bottom:",(0,g.Z)(1),";font-weight:600;text-transform:uppercase;font-size:",(e=>e.theme.fontSizeSmall),";"),U=(0,o.Z)(N,{target:"e1rmyp3r3"})(B,";margin-bottom:",(0,g.Z)(1.5),";"),L=(0,o.Z)(l.ZP,{target:"e1rmyp3r2"})("margin-top:",(0,g.Z)(3),";"),V=(0,o.Z)("div",{target:"e1rmyp3r1"})("width:100%;display:grid;grid-template-columns:1fr max-content max-content;grid-gap:",(0,g.Z)(1),";"),F=(0,o.Z)("div",{target:"e1rmyp3r0"})("display:grid;grid-template-columns:max-content max-content;grid-gap:",(0,g.Z)(1),";align-items:center;font-size:",(e=>e.theme.fontSizeMedium),";color:",(e=>"error"===e.status?e.theme.red300:e.theme.gray400),";>:first-child{",(e=>"success"===e.status&&"color: ".concat(e.theme.green300)),";}"),X={name:"onfzye",styles:"width:100%;max-width:800px;margin:50px auto"},W=(0,S.Z)(k)},"./app/components/roleSelectControl.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>u});var n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),o=(s("../node_modules/core-js/modules/es.symbol.description.js"),s("../node_modules/react-select/dist/chunk-80640036.browser.esm.js")),i=s("./app/components/forms/selectControl.tsx"),r=s("./app/styles/space.tsx"),a=s("./app/utils/theme.tsx"),l=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d({roles:e,disableUnallowed:t,...s}){return(0,l.tZ)(i.Z,{options:null==e?void 0:e.map((e=>({value:e.id,label:e.name,disabled:t&&!e.allowed,description:e.desc}))),components:{Option:({label:e,data:t,...s})=>(0,l.tZ)(o.y.Option,{label:e,...s,children:(0,l.BX)(c,{children:[(0,l.tZ)("h1",{children:e}),(0,l.tZ)("div",{children:t.description})]})})},styles:{control:e=>({...e,borderBottomLeftRadius:a.ZP.borderRadius,borderBottomRightRadius:a.ZP.borderRadius}),menu:e=>({...e,borderRadius:a.ZP.borderRadius,marginTop:(0,r.Z)(.5),width:"350px",overflow:"hidden"})},...s})}d.displayName="RoleSelectControl";const c=(0,n.Z)("div",{target:"e1cjlayn0"})("display:grid;grid-template-columns:80px 1fr;grid-gap:",(0,r.Z)(1),";h1,div{font-size:",(e=>e.theme.fontSizeSmall),";line-height:1.4;margin:",(0,r.Z)(.25)," 0;}"),u=d},"./app/stores/organizationsStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/reflux/src/index.js"),o=s.n(n);const i={listenables:[s("./app/actions/organizationsActions.tsx").Z],state:[],loaded:!1,getInitialState(){return this.state},init(){this.state=[],this.loaded=!1},onUpdate(e){this.add(e)},onChangeSlug(e,t){e.slug!==t.slug&&(this.remove(e.slug),this.add(t))},onRemoveSuccess(e){this.remove(e)},get(e){return this.state.find((t=>t.slug===e))},getAll(){return this.state},remove(e){this.state=this.state.filter((t=>e!==t.slug)),this.trigger(this.state)},add(e){let t=!1;this.state.forEach(((s,n)=>{s.id===e.id&&(e={...s,...e},this.state[n]=e,t=!0)})),t||(this.state=[...this.state,e]),this.trigger(this.state)},load(e){this.state=e,this.loaded=!0,this.trigger(e)}},r=o().createStore(i)},"./app/stores/projectsStatsStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/reflux/src/index.js"),o=s.n(n),i=s("./app/actions/projectActions.tsx");const r={itemsBySlug:{},init(){this.reset(),this.listenTo(i.Z.loadStatsForProjectSuccess,this.onStatsLoadSuccess),this.listenTo(i.Z.update,this.onUpdate),this.listenTo(i.Z.updateError,this.onUpdateError)},getInitialState(){return this.itemsBySlug},reset(){this.itemsBySlug={},this.updatingItems=new Map},onStatsLoadSuccess(e){e.forEach((e=>{this.itemsBySlug[e.slug]=e})),this.trigger(this.itemsBySlug)},onUpdate(e,t){const s=this.getBySlug(e);if(this.updatingItems.set(e,s),!s)return;const n={...s,...t};this.itemsBySlug={...this.itemsBySlug,[s.slug]:n},this.trigger(this.itemsBySlug)},onUpdateSuccess(e){this.updatingItems.delete(e.slug)},onUpdateError(e,t){const s=this.updatingItems.get(t);s&&(this.updatingItems.delete(t),this.itemsBySlug={...this.itemsBySlug,[s.slug]:{...s}},this.trigger(this.itemsBySlug))},getAll(){return this.itemsBySlug},getBySlug(e){return this.itemsBySlug[e]}},a=o().createStore(r)},"./app/stores/teamStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var n=s("../node_modules/reflux/src/index.js"),o=s.n(n),i=s("./app/actions/teamActions.tsx");const r={initialized:!1,state:{teams:[],loading:!0,hasMore:null},init(){this.reset(),this.listenTo(i.Z.createTeamSuccess,this.onCreateSuccess),this.listenTo(i.Z.fetchDetailsSuccess,this.onUpdateSuccess),this.listenTo(i.Z.loadTeams,this.loadInitialData),this.listenTo(i.Z.removeTeamSuccess,this.onRemoveSuccess),this.listenTo(i.Z.updateSuccess,this.onUpdateSuccess)},reset(){this.state={teams:[],loading:!0,hasMore:null}},loadInitialData(e,t=null){this.initialized=!0,this.state={teams:e.sort(((e,t)=>e.slug.localeCompare(t.slug))),loading:!1,hasMore:t},this.trigger(new Set(e.map((e=>e.id))))},onUpdateSuccess(e,t){if(!t)return;if(!this.getBySlug(e))return this.state={...this.state,teams:[...this.state.teams,t]},void this.trigger(new Set([e]));if(t.slug!==e){const s=[...this.state.teams.filter((({slug:t})=>t!==e)),t];return this.state={...this.state,teams:s},void this.trigger(new Set([t.slug]))}const s=[...this.state.teams],n=s.findIndex((e=>e.slug===t.slug));s[n]=t,this.state={...this.state,teams:s},this.trigger(new Set([e]))},onRemoveSuccess(e){const{teams:t}=this.state;this.loadInitialData(t.filter((t=>t.slug!==e)))},onCreateSuccess(e){this.loadInitialData([...this.state.teams,e])},get(){return this.state},getById(e){const{teams:t}=this.state;return t.find((t=>t.id.toString()===e.toString()))||null},getBySlug(e){const{teams:t}=this.state;return t.find((t=>t.slug===e))||null},getAll(){return this.state.teams}},a=o().createStore(r)},"./app/utils/useApi.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>i});var n=s("../node_modules/react/index.js"),o=s("./app/api.tsx");const i=function({persistInFlight:e,api:t}={}){const s=(0,n.useRef)();void 0===s.current&&void 0===t&&(s.current=new o.KU);const i=null!=t?t:s.current;function r(){!e&&i.clear()}return(0,n.useEffect)((()=>r),[]),i}},"./app/utils/withLatestContext.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>S});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/stores/configStore.tsx"),r=s("../node_modules/reflux/src/index.js"),a=s.n(r),l=s("./app/actions/navigationActions.tsx"),d=s("./app/actions/organizationActions.tsx"),c=s("./app/actions/organizationsActions.tsx"),u=s("./app/actions/projectActions.tsx");const m={state:{project:null,lastProject:null,organization:null,environment:null,lastRoute:null},get(){return this.state},init(){this.reset(),this.listenTo(u.Z.setActive,this.onSetActiveProject),this.listenTo(u.Z.updateSuccess,this.onUpdateProject),this.listenTo(c.Z.setActive,this.onSetActiveOrganization),this.listenTo(c.Z.update,this.onUpdateOrganization),this.listenTo(d.Z.update,this.onUpdateOrganization),this.listenTo(l.Z.setLastRoute,this.onSetLastRoute)},reset(){return this.state={project:null,lastProject:null,organization:null,environment:null,lastRoute:null},this.state},onSetLastRoute(e){this.state={...this.state,lastRoute:e},this.trigger(this.state)},onUpdateOrganization(e){this.state.organization&&e&&e.slug===this.state.organization.slug&&(this.state={...this.state,organization:e},this.trigger(this.state))},onSetActiveOrganization(e){e?this.state.organization&&this.state.organization.slug===e.slug||(this.state={...this.state,organization:e,project:null}):this.state={...this.state,organization:null,project:null},this.trigger(this.state)},onSetActiveProject(e){e?this.state.project&&this.state.project.slug===e.slug||(this.state={...this.state,lastProject:this.state.project,project:e}):this.state={...this.state,lastProject:this.state.project,project:null},this.trigger(this.state)},onUpdateProject(e){this.state={...this.state,project:e},this.trigger(this.state)}},p=a().createStore(m);var h=s("./app/utils/getDisplayName.tsx"),g=s("./app/utils/withOrganizations.tsx"),v=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const f={organization:null,project:null,lastRoute:null},S=function(e){class t extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{latestContext:p.get()}),(0,n.Z)(this,"unsubscribe",p.listen((e=>this.setState({latestContext:e})),void 0))}componentWillUmount(){this.unsubscribe()}render(){const{organizations:t}=this.props,{latestContext:s}=this.state,{organization:n,project:o,lastRoute:r}=s||f,a=n||(t&&t.length?t.find((({slug:e})=>e===i.Z.get("lastOrganization")))||t[0]:null);return(0,v.tZ)(e,{project:o,lastRoute:r,...this.props,organization:this.props.organization||a})}}return t.displayName="WithLatestContext",(0,n.Z)(t,"displayName","withLatestContext(".concat((0,h.Z)(e),")")),(0,g.Z)(t)}},"./app/utils/withOrganizations.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/stores/organizationsStore.tsx"),r=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{organizations:i.Z.getAll()}),(0,n.Z)(this,"unsubscribe",i.Z.listen((e=>this.setState({organizations:e})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){const{organizationsLoading:t,organizations:s,...n}=this.props;return(0,a.tZ)(e,{organizationsLoading:null!=t?t:!i.Z.loaded,organizations:null!=s?s:this.state.organizations,...n})}}return t.displayName="WithOrganizations",(0,n.Z)(t,"displayName","withOrganizations(".concat((0,r.Z)(e),")")),t}},"./app/utils/withTeams.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var n=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/stores/teamStore.tsx"),r=s("./app/utils/getDisplayName.tsx"),a=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const l=function(e){class t extends o.Component{constructor(...e){super(...e),(0,n.Z)(this,"state",{teams:i.Z.getAll()}),(0,n.Z)(this,"unsubscribe",i.Z.listen((()=>this.setState({teams:i.Z.getAll()})),void 0))}componentWillUnmount(){this.unsubscribe()}render(){return(0,a.tZ)(e,{teams:this.state.teams,...this.props})}}return t.displayName="WithTeams",(0,n.Z)(t,"displayName","withTeams(".concat((0,r.Z)(e),")")),t}},"../node_modules/lodash/_baseFindIndex.js":e=>{e.exports=function(e,t,s,n){for(var o=e.length,i=s+(n?1:-1);n?i--:++i<o;)if(t(e[i],i,e))return i;return-1}},"../node_modules/lodash/_isIterateeCall.js":(e,t,s)=>{var n=s("../node_modules/lodash/eq.js"),o=s("../node_modules/lodash/isArrayLike.js"),i=s("../node_modules/lodash/_isIndex.js"),r=s("../node_modules/lodash/isObject.js");e.exports=function(e,t,s){if(!r(s))return!1;var a=typeof t;return!!("number"==a?o(s)&&i(t,s.length):"string"==a&&t in s)&&n(s[t],e)}},"../node_modules/lodash/chunk.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseSlice.js"),o=s("../node_modules/lodash/_isIterateeCall.js"),i=s("../node_modules/lodash/toInteger.js"),r=Math.ceil,a=Math.max;e.exports=function(e,t,s){t=(s?o(e,t,s):void 0===t)?1:a(i(t),0);var l=null==e?0:e.length;if(!l||t<1)return[];for(var d=0,c=0,u=Array(r(l/t));d<l;)u[c++]=n(e,d,d+=t);return u}},"../node_modules/lodash/findLastIndex.js":(e,t,s)=>{var n=s("../node_modules/lodash/_baseFindIndex.js"),o=s("../node_modules/lodash/_baseIteratee.js"),i=s("../node_modules/lodash/toInteger.js"),r=Math.max,a=Math.min;e.exports=function(e,t,s){var l=null==e?0:e.length;if(!l)return-1;var d=l-1;return void 0!==s&&(d=i(s),d=s<0?r(l+d,0):a(d,l-1)),n(e,o(t,3),d,!0)}},"../node_modules/react-document-title/index.js":(e,t,s)=>{"use strict";var n=s("../node_modules/react/index.js"),o=s("../node_modules/prop-types/index.js"),i=s("../node_modules/react-side-effect/lib/index.js");function r(){}r.prototype=Object.create(n.Component.prototype),r.displayName="DocumentTitle",r.propTypes={title:o.string.isRequired},r.prototype.render=function(){return this.props.children?n.Children.only(this.props.children):null},e.exports=i((function(e){var t=e[e.length-1];if(t)return t.title}),(function(e){var t=e||"";t!==document.title&&(document.title=t)}))(r)},"../node_modules/react-side-effect/lib/index.js":(e,t,s)=>{"use strict";function n(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var o=s("../node_modules/react/index.js"),i=n(o),r=n(s("../node_modules/shallowequal/index.js"));function a(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}var l=!("undefined"==typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,s){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==s&&"function"!=typeof s)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(n){if("function"!=typeof n)throw new Error("Expected WrappedComponent to be a React component.");var d,c=[];function u(){d=e(c.map((function(e){return e.props}))),m.canUseDOM?t(d):s&&(d=s(d))}var m=function(e){var t,s;function o(){return e.apply(this,arguments)||this}s=e,(t=o).prototype=Object.create(s.prototype),t.prototype.constructor=t,t.__proto__=s,o.peek=function(){return d},o.rewind=function(){if(o.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=d;return d=void 0,c=[],e};var a=o.prototype;return a.shouldComponentUpdate=function(e){return!r(e,this.props)},a.componentWillMount=function(){c.push(this),u()},a.componentDidUpdate=function(){u()},a.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),u()},a.render=function(){return i.createElement(n,this.props)},o}(o.Component);return a(m,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(n)+")"),a(m,"canUseDOM",l),m}}},"../node_modules/shallowequal/index.js":e=>{e.exports=function(e,t,s,n){var o=s?s.call(n,e,t):void 0;if(void 0!==o)return!!o;if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var i=Object.keys(e),r=Object.keys(t);if(i.length!==r.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(t),l=0;l<i.length;l++){var d=i[l];if(!a(d))return!1;var c=e[d],u=t[d];if(!1===(o=s?s.call(n,c,u,d):void 0)||void 0===o&&c!==u)return!1}return!0}}}]);
//# sourceMappingURL=../sourcemaps/app_actionCreators_projects_tsx-app_components_modals_inviteMembersModal_index_tsx-app_utils_-4f85f2.a31d0177aefd785a6c25fe5e5908551f.js.map