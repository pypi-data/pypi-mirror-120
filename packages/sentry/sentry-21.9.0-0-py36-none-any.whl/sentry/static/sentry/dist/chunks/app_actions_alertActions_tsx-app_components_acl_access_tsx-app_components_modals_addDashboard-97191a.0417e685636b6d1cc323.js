(self.webpackChunk=self.webpackChunk||[]).push([["app_actions_alertActions_tsx-app_components_acl_access_tsx-app_components_modals_addDashboard-97191a"],{"./app/actionCreators/savedSearches.tsx":(e,t,s)=>{"use strict";s.d(t,{bG:()=>d,C2:()=>c,VH:()=>p,cB:()=>h,YO:()=>m,k0:()=>y,g_:()=>f,k9:()=>v});var a=s("./app/actionCreators/indicator.tsx"),n=s("./app/actions/savedSearchesActions.tsx"),r=s("./app/constants/index.tsx"),i=s("./app/locale.tsx"),o=s("./app/types/index.tsx"),l=s("./app/utils/handleXhrErrorResponse.tsx");function d(){n.Z.resetSavedSearches()}function c(e,t){const s="/organizations/".concat(t,"/searches/");n.Z.startFetchSavedSearches();const r=e.requestPromise(s,{method:"GET"});return r.then((e=>{n.Z.fetchSavedSearchesSuccess(e)})).catch((e=>{n.Z.fetchSavedSearchesError(e),(0,a.Iw)((0,i.t)("Unable to load saved searches"))})),r}const u=e=>"/organizations/".concat(e,"/recent-searches/");function p(e,t,s,a){const n=u(t),r=e.requestPromise(n,{method:"POST",data:{query:a,type:s}});return r.catch((0,l.Z)("Unable to save a recent search")),r}function h(e,t,s,a,r){const i=e.requestPromise("/organizations/".concat(t,"/searches/"),{method:"POST",data:{type:o.L4.ISSUE,query:a,name:s,sort:r}});return i.then((e=>{n.Z.createSavedSearchSuccess(e)})),i}function m(e,t,s,a){const n=u(t),i=e.requestPromise(n,{query:{query:a,type:s,limit:r.x}});return i.catch((e=>{401!==e.status&&403!==e.status&&(0,l.Z)("Unable to fetch recent searches")(e)})),i}const g=e=>"/organizations/".concat(e,"/pinned-searches/");function y(e,t,s,a,r){const i=g(t);n.Z.pinSearch(s,a,r);const o=e.requestPromise(i,{method:"PUT",data:{query:a,type:s,sort:r}});return o.then(n.Z.pinSearchSuccess),o.catch((0,l.Z)("Unable to pin search")),o.catch((()=>{n.Z.unpinSearch(s)})),o}function f(e,t,s,a){const r=g(t);n.Z.unpinSearch(s);const i=e.requestPromise(r,{method:"DELETE",data:{type:s}});return i.catch((0,l.Z)("Unable to un-pin search")),i.catch((()=>{const{type:e,query:t}=a;n.Z.pinSearch(e,t)})),i}function v(e,t,s){const a="/organizations/".concat(t,"/searches/").concat(s.id,"/");return e.requestPromise(a,{method:"DELETE"}).then((()=>n.Z.deleteSavedSearchSuccess(s))).catch((0,l.Z)("Unable to delete a saved search"))}},"./app/actions/alertActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});var a=s("../node_modules/reflux/src/index.js");const n=s.n(a)().createActions(["addAlert","closeAlert"]),r="app"==s.j?n:null},"./app/actions/tagActions.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>n});var a=s("../node_modules/reflux/src/index.js");const n=s.n(a)().createActions(["loadTagsError","loadTagsSuccess"])},"./app/components/acl/access.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>m});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/react/index.js"),r=s("./app/components/alert.tsx"),i=s("./app/icons/index.tsx"),o=s("./app/locale.tsx"),l=s("./app/utils/isRenderFunc.tsx"),d=s("./app/utils/withConfig.tsx"),c=s("./app/utils/withOrganization.tsx"),u=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const p=(0,u.tZ)(r.Z,{type:"error",icon:(0,u.tZ)(i.aU,{size:"md"}),children:(0,o.t)("You do not have sufficient permissions to access this.")});class h extends n.Component{render(){const{organization:e,config:t,access:s,requireAll:a,isSuperuser:n,renderNoAccessMessage:r,children:i}=this.props,{access:o}=e||{access:[]},d=!s||s[a?"every":"some"]((e=>o.includes(e))),c=!(!t.user||!t.user.isSuperuser),u={hasAccess:d,hasSuperuser:c},h=d&&(!n||c);return h||"function"!=typeof r?!h&&r?p:(0,l.l)(i)?i(u):h?i:null:r(u)}}h.displayName="Access",(0,a.Z)(h,"defaultProps",{renderNoAccessMessage:!1,isSuperuser:!1,requireAll:!0,access:[]});const m=(0,c.Z)((0,d.Z)(h))},"./app/components/dashboards/widgetQueryFields.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>f});var a=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js"),s("./app/components/button.tsx")),r=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),o=s("./app/styles/space.tsx"),l=s("./app/utils/discover/fields.tsx"),d=s("./app/views/eventsV2/table/columnEditCollection.tsx"),c=s("./app/views/eventsV2/table/queryField.tsx"),u=s("./app/views/eventsV2/table/types.tsx"),p=s("./app/views/settings/components/forms/field/index.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function m({displayType:e,errors:t,fields:s,fieldOptions:a,organization:d,onChange:m,style:f}){if("table"===e)return(0,h.tZ)(p.Z,{"data-test-id":"columns",label:(0,i.t)("Columns"),inline:!1,style:{padding:"".concat((0,o.Z)(1)," 0"),...null!=f?f:{}},error:null==t?void 0:t.fields,flexibleControlStateSize:!0,stacked:!0,required:!0,children:(0,h.tZ)(g,{columns:s.map((e=>(0,l.HM)({field:e}))),onChange:function(e){const t=e.map(l.sN);m(t)},fieldOptions:a,organization:d})});const v=["world_map","big_number"].includes(e)&&1===s.length||["line","area","stacked_area","bar"].includes(e)&&3===s.length,b="big_number"===e;return(0,h.BX)(p.Z,{"data-test-id":"y-axis",label:(0,i.t)("Y-Axis"),inline:!1,style:{padding:"".concat((0,o.Z)(2)," 0 24px 0"),...null!=f?f:{}},flexibleControlStateSize:!0,error:null==t?void 0:t.fields,required:!0,stacked:!0,children:[s.map(((e,t)=>{const o=(0,l.HM)({field:e});return(0,h.BX)(y,{children:[(0,h.tZ)(c.q,{fieldValue:o,fieldOptions:a,onChange:e=>function(e,t){const a=[...s];a[t]=(0,l.sN)(e),m(a)}(e,t),filterPrimaryOptions:e=>{if(!b&&e.value.kind===u.L.FUNCTION){const t=(0,l._4)(e.value.meta.name,void 0);if(t)return(0,l.HW)(t)}return e.value.kind===u.L.FUNCTION},filterAggregateParameters:e=>{if(b)return!0;if("function"!==o.kind)return!0;const t=o.function[0],s=(0,l._4)(t,e.value.meta.name);return s?(0,l.HW)(s):e.value.kind!==u.L.FUNCTION&&(0,l.HW)(e.value.meta.dataType)}}),s.length>1&&(0,h.tZ)(n.ZP,{size:"zero",borderless:!0,onClick:e=>function(e,t){e.preventDefault();const a=[...s];a.splice(t,1),m(a)}(e,t),icon:(0,h.tZ)(r.Fz,{}),title:(0,i.t)("Remove this Y-Axis"),label:(0,i.t)("Remove this Y-Axis")})]},"".concat(e,":").concat(t))})),!v&&(0,h.tZ)("div",{children:(0,h.tZ)(n.ZP,{size:"small",icon:(0,h.tZ)(r.N_,{isCircled:!0}),onClick:function(e){e.preventDefault();const t=[...s,""];m(t)},children:(0,i.t)("Add Overlay")})})]})}m.displayName="WidgetQueryFields";const g=(0,a.Z)(d.Z,{target:"e2l1oc31"})("margin-top:",(0,o.Z)(1),";"),y=(0,a.Z)("div",{target:"e2l1oc30"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,o.Z)(1),";>*+*{margin-left:",(0,o.Z)(1),";}"),f=m},"./app/components/modals/addDashboardWidgetModal.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>X,modalCss:()=>G});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),r=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("../node_modules/react-router/es/index.js"),o=s("../node_modules/lodash/cloneDeep.js"),l=s.n(o),d=s("../node_modules/lodash/pick.js"),c=s.n(d),u=s("../node_modules/lodash/set.js"),p=s.n(u),h=s("./app/actionCreators/dashboards.tsx"),m=s("./app/actionCreators/indicator.tsx"),g=s("./app/components/button.tsx"),y=s("./app/components/buttonBar.tsx"),f=s("./app/components/events/searchBar.tsx"),v=s("./app/components/forms/selectControl.tsx"),b=s("./app/constants/index.tsx"),S=s("./app/icons/index.tsx"),Z=s("./app/locale.tsx"),x=s("./app/styles/space.tsx"),C=s("./app/utils/discover/fields.tsx"),q=s("./app/views/settings/components/forms/controls/input.tsx"),T=s("./app/views/settings/components/forms/field/index.tsx"),w=s("./app/components/dashboards/widgetQueryFields.tsx"),_=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const A=e=>{const t=[];return e.forEach((e=>{const s=(0,C.LY)(e);t.push({label:(0,Z.t)("%s asc",e),value:s}),t.push({label:(0,Z.t)("%s desc",e),value:"-".concat(s)})})),t};class F extends r.Component{constructor(...e){super(...e),(0,a.Z)(this,"handleFieldChange",((e,t)=>{const{queries:s,onChange:a}=this.props,n=s[e];return function(s){const r={...n,[t]:s};a(e,r)}}))}getFirstQueryError(e){const{errors:t}=this.props;if(t)return t.find((t=>t&&t[e]))}render(){var e;const{organization:t,selection:s,errors:a,queries:n,canAddSearchConditions:r,handleAddSearchConditions:i,handleDeleteQuery:o,displayType:d,fieldOptions:c,onChange:u}=this.props,p=["table","world_map","big_number"].includes(d);return(0,_.BX)(k,{children:[n.map(((e,r)=>(0,_.tZ)(T.Z,{label:0===r?(0,Z.t)("Query"):null,inline:!1,style:{paddingBottom:"8px"},flexibleControlStateSize:!0,stacked:!0,error:null==a?void 0:a[r].conditions,children:(0,_.BX)(O,{children:[(0,_.tZ)(R,{searchSource:"widget_builder",organization:t,projectIds:s.projects,query:e.conditions,fields:[],onSearch:this.handleFieldChange(r,"conditions"),onBlur:this.handleFieldChange(r,"conditions"),useFormWrapper:!1,maxQueryLength:b.dI}),!p&&(0,_.tZ)(j,{type:"text",name:"name",required:!0,value:e.name,placeholder:(0,Z.t)("Legend Alias"),onChange:e=>this.handleFieldChange(r,"name")(e.target.value)}),n.length>1&&(0,_.tZ)(g.ZP,{size:"zero",borderless:!0,onClick:e=>{e.preventDefault(),o(r)},icon:(0,_.tZ)(S.Fz,{}),title:(0,Z.t)("Remove query"),label:(0,Z.t)("Remove query")})]})},r))),r&&(0,_.tZ)(g.ZP,{size:"small",icon:(0,_.tZ)(S.N_,{isCircled:!0}),onClick:e=>{e.preventDefault(),i()},children:(0,Z.t)("Add Query")}),(0,_.tZ)(w.Z,{displayType:d,fieldOptions:c,errors:this.getFirstQueryError("fields"),fields:n[0].fields,organization:t,onChange:e=>{n.forEach(((t,s)=>{const a=l()(t);a.fields=e,u(s,a)}))}}),"table"===d&&(0,_.tZ)(T.Z,{label:(0,Z.t)("Sort by"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null===(e=this.getFirstQueryError("orderby"))||void 0===e?void 0:e.orderby,style:{marginBottom:(0,x.Z)(1)},children:(0,_.tZ)(v.Z,{value:n[0].orderby,name:"orderby",options:A(n[0].fields),onChange:e=>this.handleFieldChange(0,"orderby")(e.value)})})]})}}F.displayName="WidgetQueriesForm";const k=(0,n.Z)("div",{target:"e10b8jq53"})({name:"bjn8wh",styles:"position:relative"}),O=(0,n.Z)("div",{target:"e10b8jq52"})("display:flex;align-items:center;>*+*{margin-left:",(0,x.Z)(1),";}"),R=(0,n.Z)(f.Z,{target:"e10b8jq51"})({name:"1ff36h2",styles:"flex-grow:1"}),j=(0,n.Z)(q.Z,{target:"e10b8jq50"})({name:"1f6lq61",styles:"width:33%"}),z=F;var E=s("./app/components/panels/index.tsx"),P=s("./app/utils/measurements/measurements.tsx"),D=s("./app/utils/withApi.tsx"),B=s("./app/utils/withGlobalSelection.tsx"),L=s("./app/utils/withTags.tsx"),N=s("./app/views/dashboardsV2/data.tsx"),I=s("./app/views/dashboardsV2/types.tsx"),W=s("./app/views/dashboardsV2/widget/eventWidget/utils.tsx"),M=s("./app/views/dashboardsV2/widgetCard.tsx"),U=s("./app/views/eventsV2/utils.tsx");const V={name:"",fields:["count()"],conditions:"",orderby:""};class $ extends r.Component{constructor(e){super(e),(0,a.Z)(this,"handleSubmit",(async e=>{e.preventDefault();const{api:t,closeModal:s,organization:a,onAddWidget:n,onUpdateWidget:r,widget:i,fromDiscover:o}=this.props;this.setState({loading:!0});let l={};const d=c()(this.state,["title","displayType","interval","queries"]);try{await(0,h.QL)(t,a.slug,d),"function"==typeof r&&i?(r({id:null==i?void 0:i.id,...d}),(0,m.S9)((0,Z.t)("Updated widget."))):n&&(n(d),(0,m.S9)((0,Z.t)("Added widget."))),o||s()}catch(e){var u;l=(0,W.w)(null!==(u=null==e?void 0:e.responseJSON)&&void 0!==u?u:{},{}),this.setState({errors:l})}finally{this.setState({loading:!1}),o&&this.handleSubmitFromDiscover(l,d)}})),(0,a.Z)(this,"handleSubmitFromDiscover",(async(e,t)=>{const{closeModal:s,organization:a}=this.props,{selectedDashboard:n,dashboards:r}=this.state;if(n&&(r.find((({label:e,value:t})=>e===(null==n?void 0:n.label)&&t===(null==n?void 0:n.value)))||"new"===n.value)||(e.dashboard=(0,Z.t)("This field may not be blank"),this.setState({errors:e})),!Object.keys(e).length&&n){s();const e={queryNames:[],queryConditions:[],queryFields:t.queries[0].fields,queryOrderby:t.queries[0].orderby};t.queries.forEach((t=>{e.queryNames.push(t.name),e.queryConditions.push(t.conditions)}));const r={displayType:t.displayType,interval:t.interval,title:t.title,...e};"new"===n.value?i.browserHistory.push({pathname:"/organizations/".concat(a.slug,"/dashboards/new/"),query:r}):i.browserHistory.push({pathname:"/organizations/".concat(a.slug,"/dashboard/").concat(n.value,"/"),query:r})}})),(0,a.Z)(this,"handleFieldChange",(e=>t=>{this.setState((s=>{const a=l()(s);if(p()(a,e,t),"displayType"===e){const e=t;p()(a,"queries",(0,W.Z)(e,s.queries))}return{...a,errors:void 0}}))})),(0,a.Z)(this,"handleQueryChange",((e,t)=>{this.setState((s=>{const a=l()(s);return p()(a,"queries.".concat(t),e),{...a,errors:void 0}}))})),(0,a.Z)(this,"handleQueryRemove",(e=>{this.setState((t=>{const s=l()(t);return s.queries.splice(e,1),{...s,errors:void 0}}))})),(0,a.Z)(this,"handleAddSearchConditions",(()=>{this.setState((e=>{const t=l()(e);return t.queries.push(l()(V)),t}))}));const{widget:t,defaultQuery:s,defaultTitle:n,fromDiscover:r}=e;this.state=t?{title:t.title,displayType:t.displayType,interval:t.interval,queries:(0,W.Z)(t.displayType,t.queries),errors:void 0,loading:!1,dashboards:[]}:{title:null!=n?n:"",displayType:I.F.LINE,interval:"5m",queries:[{...V,...s?{conditions:s}:{}}],errors:void 0,loading:!!r,dashboards:[]}}componentDidMount(){const{fromDiscover:e}=this.props;e&&this.fetchDashboards()}canAddSearchConditions(){const e=["line","area","stacked_area","bar"].includes(this.state.displayType),t=this.state.queries.length<3;return e&&t}async fetchDashboards(){const{api:e,organization:t}=this.props,s=e.requestPromise("/organizations/".concat(t.slug,"/dashboards/"),{method:"GET",query:{sort:"title"}});try{const e=(await s).map((({id:e,title:t})=>({label:t,value:e})));this.setState({dashboards:e})}catch(e){var a;const t=null!==(a=null==e?void 0:e.responseJSON)&&void 0!==a?a:null;t?(0,m.Iw)(t):(0,m.Iw)((0,Z.t)("Unable to fetch dashboards"))}this.setState({loading:!1})}handleDashboardChange(e){this.setState({selectedDashboard:e})}renderDashboardSelector(){const{errors:e,loading:t,dashboards:s}=this.state;return(0,_.BX)(r.Fragment,{children:[(0,_.tZ)("p",{children:(0,Z.t)("Choose which dashboard you'd like to add this query to. It will appear as a widget.")}),(0,_.tZ)(T.Z,{label:(0,Z.t)("Custom Dashboard"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==e?void 0:e.dashboard,style:{marginBottom:(0,x.Z)(1),position:"relative"},required:!0,children:(0,_.tZ)(v.Z,{name:"dashboard",options:[{label:(0,Z.t)("+ Create New Dashboard"),value:"new"},...s],onChange:e=>this.handleDashboardChange(e),disabled:t})})]})}render(){const{Footer:e,Body:t,Header:s,api:a,organization:n,selection:i,tags:o,fromDiscover:l,onUpdateWidget:d,widget:c,start:u,end:p,statsPeriod:h}=this.props,m=this.state,f=m.errors,b=h?{...i,datetime:{start:null,end:null,period:h,utc:null}}:u&&p?{...i,datetime:{start:u,end:p,period:"",utc:null}}:i,S="function"==typeof d&&!!c;return(0,_.BX)(r.Fragment,{children:[(0,_.tZ)(s,{closeButton:!0,children:(0,_.tZ)("h4",{children:l?(0,Z.t)("Add Widget to Dashboard"):S?(0,Z.t)("Edit Widget"):(0,Z.t)("Add Widget")})}),(0,_.BX)(t,{children:[l&&this.renderDashboardSelector(),(0,_.BX)(Q,{children:[(0,_.tZ)(H,{"data-test-id":"widget-name",label:(0,Z.t)("Widget Name"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==f?void 0:f.title,required:!0,children:(0,_.tZ)(q.Z,{type:"text",name:"title",maxLength:255,required:!0,value:m.title,onChange:e=>{this.handleFieldChange("title")(e.target.value)},disabled:m.loading})}),(0,_.tZ)(H,{"data-test-id":"chart-type",label:(0,Z.t)("Visualization Display"),inline:!1,flexibleControlStateSize:!0,stacked:!0,error:null==f?void 0:f.displayType,required:!0,children:(0,_.tZ)(v.Z,{options:N.L3.slice(),name:"displayType",value:m.displayType,onChange:e=>this.handleFieldChange("displayType")(e.value),disabled:m.loading})})]}),(0,_.tZ)(P.Z,{organization:n,children:({measurements:e})=>{const t=(s=Object.values(e).map((({key:e})=>e)),(0,U.R0)({organization:n,tagKeys:Object.values(o).map((({key:e})=>e)),measurementKeys:s}));var s;return(0,_.tZ)(z,{organization:n,selection:b,fieldOptions:t,displayType:m.displayType,queries:m.queries,errors:null==f?void 0:f.queries,onChange:(e,t)=>this.handleQueryChange(t,e),canAddSearchConditions:this.canAddSearchConditions(),handleAddSearchConditions:this.handleAddSearchConditions,handleDeleteQuery:this.handleQueryRemove})}}),(0,_.tZ)(M.Z,{api:a,organization:n,selection:b,widget:this.state,isEditing:!1,onDelete:()=>{},onEdit:()=>{},renderErrorMessage:e=>"string"==typeof e&&(0,_.tZ)(E.aU,{type:"error",children:e}),isSorting:!1,currentWidgetDragging:!1})]}),(0,_.tZ)(e,{children:(0,_.BX)(y.ZP,{gap:1,children:[(0,_.tZ)(g.ZP,{external:!0,href:"https://docs.sentry.io/product/dashboards/custom-dashboards/#widget-builder",children:(0,Z.t)("Read the docs")}),(0,_.tZ)(g.ZP,{"data-test-id":"add-widget",priority:"primary",type:"button",onClick:this.handleSubmit,disabled:m.loading,busy:m.loading,children:S?(0,Z.t)("Update Widget"):(0,Z.t)("Add Widget")})]})})]})}}$.displayName="AddDashboardWidgetModal";const Q=(0,n.Z)("div",{target:"e19emimy1"})("display:inline-grid;grid-template-columns:repeat(2, 1fr);grid-column-gap:",(0,x.Z)(1),";width:100%;"),G={name:"l07bt5",styles:"width:100%;max-width:700px;margin:70px auto"},H=(0,n.Z)(T.Z,{target:"e19emimy0"})({name:"bjn8wh",styles:"position:relative"}),X=(0,D.Z)((0,B.Z)((0,L.Z)($)))},"./app/components/smartSearchBar/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{be:()=>l,WF:()=>d,oe:()=>p,iO:()=>h,th:()=>m,Um:()=>g}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("./app/components/searchSyntax/parser.tsx"),n=s("./app/icons/index.tsx"),r=s("./app/locale.tsx"),i=s("./app/components/smartSearchBar/types.tsx"),o=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function l(e=""){return 0!==e.length&&" "!==e[e.length-1]?e+" ":e}function d(e=""){return" "===e[e.length-1]?e.slice(0,e.length-1):e}function c(e){return e===i.q.TAG_VALUE?(0,r.t)("Tag Values"):e===i.q.RECENT_SEARCH?(0,r.t)("Recent Searches"):e===i.q.DEFAULT?(0,r.t)("Common Search Terms"):e===i.q.TAG_OPERATOR?(0,r.t)("Operator Helpers"):(0,r.t)("Tags")}function u(e,t){if(e===i.q.RECENT_SEARCH)return(0,o.tZ)(n.jo,{size:"xs"});if(e===i.q.DEFAULT)return(0,o.tZ)(n.GK,{size:"xs"});switch(t){case"is":return(0,o.tZ)(n.oe,{size:"xs"});case"assigned":case"bookmarks":return(0,o.tZ)(n.qO,{size:"xs"});case"firstSeen":case"lastSeen":case"event.timestamp":return(0,o.tZ)(n.jo,{size:"xs"});default:return(0,o.tZ)(n.Ah,{size:"xs"})}}function p(e,t,s,a,l,d){l&&l>0&&(e=e.filter(((e,t)=>t<l||e.ignoreMaxSearchItems))),(d||0===d)&&(e=e.filter((e=>e.value.length<=d)),t&&(t=t.filter((e=>e.value.length<=d))));const p={title:c(a),type:a===i.q.INVALID_TAG?a:"header",icon:u(a,s),children:[...e]},h=t&&{title:(0,r.t)("Recent Searches"),type:"header",icon:(0,o.tZ)(n.jo,{size:"xs"}),children:[...t]};return p.children&&p.children.length&&(p.children[0]={...p.children[0]}),{searchGroups:[p,...h?[h]:[]],flatSearchItems:[...e,...t||[]],activeSearchItem:-1}}function h(e,t){let s=t,a=[void 0,void 0];return e.find((({children:e},t)=>!(!e||!e.length||(s<e.length?(a=[t,s],0):(s-=e.length,1))))),a}function m(e){return{[a.oV.Default]:{type:i.q.TAG_OPERATOR,value:":",desc:"".concat(e,":").concat((0,r.t)("[value] is equal to"))},[a.oV.GreaterThanEqual]:{type:i.q.TAG_OPERATOR,value:":>=",desc:"".concat(e,":").concat((0,r.t)(">=[value] is greater than or equal to"))},[a.oV.LessThanEqual]:{type:i.q.TAG_OPERATOR,value:":<=",desc:"".concat(e,":").concat((0,r.t)("<=[value] is less than or equal to"))},[a.oV.GreaterThan]:{type:i.q.TAG_OPERATOR,value:":>",desc:"".concat(e,":").concat((0,r.t)(">[value] is greater than"))},[a.oV.LessThan]:{type:i.q.TAG_OPERATOR,value:":<",desc:"".concat(e,":").concat((0,r.t)("<[value] is less than"))},[a.oV.Equal]:{type:i.q.TAG_OPERATOR,value:":=",desc:"".concat(e,":").concat((0,r.t)("=[value] is equal to"))},[a.oV.NotEqual]:{type:i.q.TAG_OPERATOR,value:"!:",desc:"!".concat(e,":").concat((0,r.t)("[value] is not equal to"))}}}function g(e){var t,s;const n=null!==(t=null===(s=e.invalid)||void 0===s?void 0:s.expectedType)&&void 0!==t?t:[e.filter],r=n.map((e=>{var t;return null!==(t=a.J$[e])&&void 0!==t?t:[]})),i=[...new Set([...n,...r.flat()])];return[...new Set(i.map((e=>a.iq[e].validOps)).flat())]}},"./app/stores/tagStore.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>l});var a=s("../node_modules/reflux/src/index.js"),n=s.n(a),r=s("./app/actions/tagActions.tsx");const i=["event.type","platform","message","title","location","timestamp","release","user.id","user.username","user.email","user.ip","sdk.name","sdk.version","http.method","http.url","os.build","os.kernel_version","device.brand","device.locale","device.uuid","device.model_id","device.arch","device.orientation","geo.country_code","geo.region","geo.city","error.type","error.handled","error.unhandled","error.value","error.mechanism","stack.abs_path","stack.filename","stack.package","stack.module","stack.function","stack.stack_level"].reduce(((e,t)=>(e[t]={key:t,name:t},e)),{}),o={state:{},init(){this.state={},this.listenTo(r.Z.loadTagsSuccess,this.onLoadTagsSuccess)},getBuiltInTags:()=>({...i}),getIssueAttributes(){const e=["resolved","unresolved","ignored","assigned","for_review","unassigned","linked","unlinked"];return{is:{key:"is",name:"Status",values:e,maxSuggestedValues:e.length,predefined:!0},has:{key:"has",name:"Has Tag",values:Object.keys(this.state),predefined:!0},assigned:{key:"assigned",name:"Assigned To",values:[],predefined:!0},bookmarks:{key:"bookmarks",name:"Bookmarked By",values:[],predefined:!0},lastSeen:{key:"lastSeen",name:"Last Seen",values:["-1h","+1d","-1w"],predefined:!0},firstSeen:{key:"firstSeen",name:"First Seen",values:["-1h","+1d","-1w"],predefined:!0},firstRelease:{key:"firstRelease",name:"First Release",values:["latest"],predefined:!0},"event.timestamp":{key:"event.timestamp",name:"Event Timestamp",values:["2017-01-02",">=2017-01-02T01:00:00","<2017-01-02T02:00:00"],predefined:!0},timesSeen:{key:"timesSeen",name:"Times Seen",isInput:!0,values:[],predefined:!0},assigned_or_suggested:{key:"assigned_or_suggested",name:"Assigned or Suggested",isInput:!0,values:[],predefined:!0}}},reset(){this.state={},this.trigger(this.state)},getAllTags(){return this.state},onLoadTagsSuccess(e){const t=e.reduce(((e,t)=>(e[t.key]={values:[],...t},e)),{});this.state={...this.state,...t},this.trigger(this.state)}},l=n().createStore(o)},"./app/utils/performance/vitals/constants.tsx":(e,t,s)=>{"use strict";s.d(t,{r:()=>r,T:()=>i});var a=s("./app/locale.tsx"),n=s("./app/utils/discover/fields.tsx");const r={[n.Zl.FP]:{slug:"fp",name:(0,a.t)("First Paint"),acronym:"FP",description:(0,a.t)("Render time of the first pixel loaded in the viewport (may overlap with FCP)."),poorThreshold:3e3,type:(0,n.Cq)(n.Zl.FP)},[n.Zl.FCP]:{slug:"fcp",name:(0,a.t)("First Contentful Paint"),acronym:"FCP",description:(0,a.t)("Render time of the first image, text or other DOM node in the viewport."),poorThreshold:3e3,type:(0,n.Cq)(n.Zl.FCP)},[n.Zl.LCP]:{slug:"lcp",name:(0,a.t)("Largest Contentful Paint"),acronym:"LCP",description:(0,a.t)("Render time of the largest image, text or other DOM node in the viewport."),poorThreshold:4e3,type:(0,n.Cq)(n.Zl.LCP)},[n.Zl.FID]:{slug:"fid",name:(0,a.t)("First Input Delay"),acronym:"FID",description:(0,a.t)("Response time of the browser to a user interaction (clicking, tapping, etc)."),poorThreshold:300,type:(0,n.Cq)(n.Zl.FID)},[n.Zl.CLS]:{slug:"cls",name:(0,a.t)("Cumulative Layout Shift"),acronym:"CLS",description:(0,a.t)("Sum of layout shift scores that measure the visual stability of the page."),poorThreshold:.25,type:(0,n.Cq)(n.Zl.CLS)},[n.Zl.TTFB]:{slug:"ttfb",name:(0,a.t)("Time to First Byte"),acronym:"TTFB",description:(0,a.t)("The time that it takes for a user's browser to receive the first byte of page content."),poorThreshold:600,type:(0,n.Cq)(n.Zl.TTFB)},[n.Zl.RequestTime]:{slug:"ttfb.requesttime",name:(0,a.t)("Request Time"),acronym:"RT",description:(0,a.t)("Captures the time spent making the request and receiving the first byte of the response."),poorThreshold:600,type:(0,n.Cq)(n.Zl.RequestTime)}},i={[n.$n.AppStartCold]:{slug:"app_start_cold",name:(0,a.t)("App Start Cold"),description:(0,a.t)("Cold start is a measure of the application start up time from scratch."),type:(0,n.Cq)(n.$n.AppStartCold)},[n.$n.AppStartWarm]:{slug:"app_start_warm",name:(0,a.t)("App Start Warm"),description:(0,a.t)("Warm start is a measure of the application start up time while still in memory."),type:(0,n.Cq)(n.$n.AppStartWarm)},[n.$n.FramesTotal]:{slug:"frames_total",name:(0,a.t)("Total Frames"),description:(0,a.t)("Total frames is a count of the number of frames recorded within a transaction."),type:(0,n.Cq)(n.$n.FramesTotal)},[n.$n.FramesSlow]:{slug:"frames_slow",name:(0,a.t)("Slow Frames"),description:(0,a.t)("Slow frames is a count of the number of slow frames recorded within a transaction."),type:(0,n.Cq)(n.$n.FramesSlow)},[n.$n.FramesFrozen]:{slug:"frames_frozen",name:(0,a.t)("Frozen Frames"),description:(0,a.t)("Frozen frames is a count of the number of frozen frames recorded within a transaction."),type:(0,n.Cq)(n.$n.FramesFrozen)},[n.$n.FramesSlowRate]:{slug:"frames_slow_rate",name:(0,a.t)("Slow Frames Rate"),description:(0,a.t)("Slow Frames Rate is the percentage of frames recorded within a transaction that is considered slow."),type:(0,n.Cq)(n.$n.FramesSlowRate)},[n.$n.FramesFrozenRate]:{slug:"frames_frozen_rate",name:(0,a.t)("Frozen Frames Rate"),description:(0,a.t)("Frozen Frames Rate is the percentage of frames recorded within a transaction that is considered frozen."),type:(0,n.Cq)(n.$n.FramesFrozenRate)},[n.$n.StallCount]:{slug:"stall_count",name:(0,a.t)("Stalls"),description:(0,a.t)("Stalls is the number of times the application stalled within a transaction."),type:(0,n.Cq)(n.$n.StallCount)},[n.$n.StallTotalTime]:{slug:"stall_total_time",name:(0,a.t)("Total Stall Time"),description:(0,a.t)("Stall Total Time is the total amount of time the application is stalled within a transaction."),type:(0,n.Cq)(n.$n.StallTotalTime)},[n.$n.StallLongestTime]:{slug:"stall_longest_time",name:(0,a.t)("Longest Stall Time"),description:(0,a.t)("Stall Longest Time is the longest amount of time the application is stalled within a transaction."),type:(0,n.Cq)(n.$n.StallLongestTime)},[n.$n.StallPercentage]:{slug:"stall_percentage",name:(0,a.t)("Stall Percentage"),description:(0,a.t)("Stall Percentage is the percentage of the transaction duration the application was stalled."),type:(0,n.Cq)(n.$n.StallPercentage)}}},"./app/views/dashboardsV2/data.tsx":(e,t,s)=>{"use strict";s.d(t,{R7:()=>n,L3:()=>r,GY:()=>i});var a=s("./app/locale.tsx");const n={id:"",dateCreated:"",createdBy:void 0,title:(0,a.t)("Untitled dashboard"),widgets:[]},r=[{label:(0,a.t)("Area Chart"),value:"area"},{label:(0,a.t)("Bar Chart"),value:"bar"},{label:(0,a.t)("Line Chart"),value:"line"},{label:(0,a.t)("Table"),value:"table"},{label:(0,a.t)("World Map"),value:"world_map"},{label:(0,a.t)("Big Number"),value:"big_number"}],i=((0,a.t)("1 Minute"),(0,a.t)("5 Minutes"),(0,a.t)("15 Minutes"),(0,a.t)("30 Minutes"),(0,a.t)("1 Hour"),(0,a.t)("1 Day"),"24h")},"./app/views/dashboardsV2/widget/eventWidget/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{w:()=>o,Z:()=>l}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var a=s("../node_modules/lodash/isEqual.js"),n=s.n(a),r=s("./app/utils/discover/fields.tsx"),i=s("./app/views/dashboardsV2/widget/utils.tsx");function o(e,t){return Object.keys(e).forEach((s=>{const a=e[s];Array.isArray(a)&&"string"==typeof a[0]?t[s]=a[0]:Array.isArray(a)&&"object"==typeof a[0]?t[s]=a.map((e=>o(e,{}))):t[s]=o(a,{})})),t}function l(e,t){const s=[i.FO.LINE,i.FO.AREA,i.FO.STACKED_AREA,i.FO.BAR].includes(e);if([i.FO.TABLE,i.FO.WORLD_MAP,i.FO.BIG_NUMBER].includes(e)?t=t.slice(0,1):s&&(t=t.slice(0,3)),e===i.FO.TABLE)return t;if(t=t.map((t=>{let a=t.fields.filter(r.h1);return(s||e===i.FO.WORLD_MAP)&&(a=a.filter((e=>(0,r.HW)((0,r.Px)(e))))),s&&a.length&&a.length>3&&(a=a.slice(0,3)),{...t,fields:a.length?a:["count()"]}})),s){const e=[...t[0].fields];e:for(const s of t){if(e.length>=3)break;if(!n()(e,s.fields))for(const t of s.fields){if(e.length>=3)break e;e.includes(t)||e.push(t)}}t=t.map((t=>({...t,fields:e})))}return[i.FO.WORLD_MAP,i.FO.BIG_NUMBER].includes(e)&&(t=t.map((e=>({...e,fields:e.fields.slice(0,1)})))),t}},"./app/views/issueList/createSavedSearchModal.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>y});var a=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("./app/actionCreators/indicator.tsx"),i=s("./app/actionCreators/savedSearches.tsx"),o=s("./app/components/button.tsx"),l=s("./app/components/forms/index.tsx"),d=s("./app/locale.tsx"),c=s("./app/styles/space.tsx"),u=s("./app/utils/withApi.tsx"),p=s("./app/views/issueList/utils.tsx"),h=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const m=[p.qh.DATE,p.qh.NEW,p.qh.FREQ,p.qh.PRIORITY,p.qh.USER];class g extends n.Component{constructor(...e){super(...e),(0,a.Z)(this,"state",{isSaving:!1,name:"",error:null,query:null,sort:null}),(0,a.Z)(this,"onSubmit",(e=>{const{api:t,organization:s}=this.props,a=this.state.query||this.props.query,n=this.validateSortOption(this.state.sort||this.props.sort);e.preventDefault(),this.setState({isSaving:!0}),(0,r.E3)((0,d.t)("Saving Changes")),(0,i.cB)(t,s.slug,this.state.name,a,n).then((e=>{this.props.closeModal(),this.setState({error:null,isSaving:!1}),(0,r.B8)()})).catch((e=>{let t=(0,d.t)("Unable to save your changes.");e.responseJSON&&e.responseJSON.detail&&(t=e.responseJSON.detail),this.setState({error:t,isSaving:!1}),(0,r.B8)()}))})),(0,a.Z)(this,"handleChangeName",(e=>{this.setState({name:String(e)})})),(0,a.Z)(this,"handleChangeQuery",(e=>{this.setState({query:String(e)})})),(0,a.Z)(this,"handleChangeSort",(e=>{this.setState({sort:e})}))}validateSortOption(e){return this.sortOptions().find((t=>t===e))?e:p.qh.DATE}sortOptions(){var e;const{organization:t}=this.props,s=[...m];return null!=t&&null!==(e=t.features)&&void 0!==e&&e.includes("issue-list-trend-sort")&&s.push(p.qh.TREND),s}render(){const{isSaving:e,error:t}=this.state,{Header:s,Footer:a,Body:n,closeModal:r,query:i,sort:u}=this.props,m=this.sortOptions().map((e=>({value:e,label:(0,p._k)(e)})));return(0,h.BX)("form",{onSubmit:this.onSubmit,children:[(0,h.tZ)(s,{children:(0,h.tZ)("h4",{children:(0,d.t)("Save Current Search")})}),(0,h.BX)(n,{children:[this.state.error&&(0,h.tZ)("div",{className:"alert alert-error alert-block",children:t}),(0,h.tZ)("p",{children:(0,d.t)("All team members will now have access to this search.")}),(0,h.tZ)(l.nv,{name:"name",label:(0,d.t)("Name"),placeholder:"e.g. My Search Results",required:!0,onChange:this.handleChangeName},"name"),(0,h.tZ)(l.nv,{name:"query",label:(0,d.t)("Query"),value:i,required:!0,onChange:this.handleChangeQuery},"query"),(0,h.tZ)(l.mg,{name:"sort",label:(0,d.t)("Sort By"),required:!0,clearable:!1,defaultValue:this.validateSortOption(u),options:m,onChange:this.handleChangeSort},"sort")]}),(0,h.BX)(a,{children:[(0,h.tZ)(o.ZP,{priority:"default",size:"small",disabled:e,onClick:r,style:{marginRight:(0,c.Z)(1)},children:(0,d.t)("Cancel")}),(0,h.tZ)(o.ZP,{priority:"primary",size:"small",disabled:e,children:(0,d.t)("Save")})]})]})}}g.displayName="CreateSavedSearchModal";const y=(0,u.Z)(g)},"../node_modules/lodash/isInteger.js":(e,t,s)=>{var a=s("../node_modules/lodash/toInteger.js");e.exports=function(e){return"number"==typeof e&&e==a(e)}}}]);
//# sourceMappingURL=../sourcemaps/app_actions_alertActions_tsx-app_components_acl_access_tsx-app_components_modals_addDashboard-97191a.fdad7bda7baa6f72b53d5b9c59f084d6.js.map