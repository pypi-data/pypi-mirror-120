(self.webpackChunk=self.webpackChunk||[]).push([["app_views_organizationGroupDetails_groupActivity_tsx"],{"./app/components/commitLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d}),s("../node_modules/react/index.js");var r=s("./app/components/button.tsx"),o=s("./app/components/links/externalLink.tsx"),n=s("./app/icons/index.tsx"),i=s("./app/locale.tsx"),a=s("./app/utils.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const u=[{icon:(0,c.tZ)(n.Uv,{size:"xs"}),providerIds:["github","integrations:github","integrations:github_enterprise"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)},{icon:(0,c.tZ)(n.Ub,{size:"xs"}),providerIds:["bitbucket","integrations:bitbucket"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commits/").concat(t)},{icon:(0,c.tZ)(n.mT,{size:"xs"}),providerIds:["visualstudio","integrations:vsts"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)},{icon:(0,c.tZ)(n.Et,{size:"xs"}),providerIds:["gitlab","integrations:gitlab"],commitUrl:({baseUrl:e,commitId:t})=>"".concat(e,"/commit/").concat(t)}],d=function({inline:e,commitId:t,repository:s}){if(!t||!s)return(0,c.tZ)("span",{children:(0,i.t)("Unknown Commit")});const n=(0,a.e4)(t),d=u.find((e=>!!s.provider&&e.providerIds.includes(s.provider.id)));if(void 0===d)return(0,c.tZ)("span",{children:n});const l=s.url&&d.commitUrl({commitId:t,baseUrl:s.url});return e?(0,c.BX)(o.Z,{className:"inline-commit",href:l,children:[d.icon," "+n]}):(0,c.tZ)(r.ZP,{external:!0,href:l,size:"small",icon:d.icon,children:n})}},"./app/components/pullRequestLink.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s("./app/components/links/externalLink.tsx"),o=s("./app/icons/index.tsx"),n=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function i(e){if(!e.provider)return null;const{id:t}=e.provider;switch(t.includes(":")?t.split(":").pop():t){case"github":return(0,n.tZ)(o.Uv,{size:"xs"});case"gitlab":return(0,n.tZ)(o.Et,{size:"xs"});case"bitbucket":return(0,n.tZ)(o.Ub,{size:"xs"});default:return null}}const a=({pullRequest:e,repository:t,inline:s})=>{const o="".concat(t.name," #").concat(e.id,": ").concat(e.title);return e.externalUrl?(0,n.BX)(r.Z,{className:s?"inline-commit":"btn btn-default btn-sm",href:e.externalUrl,children:[i(t),s?"":" ",o]}):(0,n.tZ)("span",{children:o})}},"./app/components/reprocessedBox.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>h});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/components/events/styles.tsx"),a=s("./app/components/links/link.tsx"),c=s("./app/icons/index.tsx"),u=s("./app/locale.tsx"),d=s("./app/styles/space.tsx"),l=s("./app/utils/localStorage.tsx"),p=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class m extends n.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{isBannerHidden:"true"===l.Z.getItem(this.getBannerUniqueId())}),(0,r.Z)(this,"handleBannerDismiss",(()=>{l.Z.setItem(this.getBannerUniqueId(),"true"),this.setState({isBannerHidden:!0})}))}getBannerUniqueId(){const{reprocessActivity:e}=this.props,{id:t}=e;return"reprocessed-activity-".concat(t,"-banner-dismissed")}renderMessage(){const{orgSlug:e,reprocessActivity:t,groupCount:s,groupId:r}=this.props,{data:o}=t,{eventCount:n,oldGroupId:i,newGroupId:c}=o,d="/organizations/".concat(e,"/issues/?query=reprocessing.original_issue_id:").concat(i);return 0===s?(0,u._N)("All events in this issue were moved during reprocessing. [link]",{link:(0,p.tZ)(a.Z,{to:d,children:(0,u.tn)("See %s new event","See %s new events",n)})}):(0,u._N)("Events in this issue were successfully reprocessed. [link]",{link:(0,p.tZ)(a.Z,{to:d,children:c===Number(r)?(0,u.tn)("See %s reprocessed event","See %s reprocessed events",n):(0,u.tn)("See %s new event","See %s new events",n)})})}render(){const{isBannerHidden:e}=this.state;if(e)return null;const{className:t}=this.props;return(0,p.tZ)(i.UP,{priority:"success",className:t,children:(0,p.BX)(g,{children:[(0,p.tZ)(c.DL,{color:"green300",isCircled:!0}),(0,p.tZ)("span",{children:this.renderMessage()}),(0,p.tZ)(v,{color:"green300","aria-label":(0,u.t)("Dismiss"),isCircled:!0,onClick:this.handleBannerDismiss})]})})}}m.displayName="ReprocessedBox";const h=m,g=(0,o.Z)(i._B,{target:"e17keqf51"})("&>svg:last-child{margin-right:0;margin-left:",(0,d.Z)(1),";}"),v=(0,o.Z)(c.bM,{target:"e17keqf50"})({name:"e0dnmk",styles:"cursor:pointer"})},"./app/views/organizationGroupDetails/groupActivity.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{GroupActivity:()=>A,default:()=>T});var r=s("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),i=s("./app/actionCreators/group.tsx"),a=s("./app/actionCreators/indicator.tsx"),c=s("./app/components/activity/author.tsx"),u=s("./app/components/activity/item/index.tsx"),d=s("./app/components/activity/note/index.tsx"),l=s("./app/components/activity/note/inputWithStorage.tsx"),p=s("./app/components/errorBoundary.tsx"),m=s("./app/components/reprocessedBox.tsx"),h=s("./app/constants/index.tsx"),g=s("./app/locale.tsx"),v=s("./app/stores/configStore.tsx"),_=s("./app/styles/space.tsx"),f=s("./app/types/index.tsx"),N=s("./app/utils/guid.tsx"),E=s("./app/utils/withApi.tsx"),S=s("./app/utils/withOrganization.tsx"),Z=s("./app/components/commitLink.tsx"),x=s("./app/components/duration.tsx"),y=s("./app/components/links/externalLink.tsx"),b=s("./app/components/links/link.tsx"),w=s("./app/components/pullRequestLink.tsx"),k=s("./app/components/version.tsx"),I=s("./app/stores/memberListStore.tsx"),R=s("./app/stores/teamStore.tsx"),j=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function U({activity:e,orgSlug:t,projectId:s,author:r}){const o="/organizations/".concat(t,"/issues/");return(0,j.tZ)(n.Fragment,{children:function(){switch(e.type){case f.fc.NOTE:return(0,g._N)("[author] left a comment",{author:r});case f.fc.SET_RESOLVED:return(0,g._N)("[author] marked this issue as resolved",{author:r});case f.fc.SET_RESOLVED_BY_AGE:return(0,g._N)("[author] marked this issue as resolved due to inactivity",{author:r});case f.fc.SET_RESOLVED_IN_RELEASE:const{current_release_version:n,version:i}=e.data;return n?(0,g._N)("[author] marked this issue as resolved in releases greater than [version]",{author:r,version:(0,j.tZ)(k.Z,{version:n,projectId:s,tooltipRawVersion:!0})}):i?(0,g._N)("[author] marked this issue as resolved in [version]",{author:r,version:(0,j.tZ)(k.Z,{version:i,projectId:s,tooltipRawVersion:!0})}):(0,g._N)("[author] marked this issue as resolved in the upcoming release",{author:r});case f.fc.SET_RESOLVED_IN_COMMIT:return(0,g._N)("[author] marked this issue as resolved in [version]",{author:r,version:(0,j.tZ)(Z.Z,{inline:!0,commitId:e.data.commit.id,repository:e.data.commit.repository})});case f.fc.SET_RESOLVED_IN_PULL_REQUEST:{const{data:t}=e,{pullRequest:s}=t;return(0,g._N)("[author] marked this issue as resolved in [version]",{author:r,version:(0,j.tZ)(w.Z,{inline:!0,pullRequest:s,repository:s.repository})})}case f.fc.SET_UNRESOLVED:return(0,g._N)("[author] marked this issue as unresolved",{author:r});case f.fc.SET_IGNORED:{const{data:t}=e;return function(e){return e.ignoreDuration?(0,g._N)("[author] ignored this issue for [duration]",{author:r,duration:(0,j.tZ)(x.Z,{seconds:60*e.ignoreDuration})}):e.ignoreCount&&e.ignoreWindow?(0,g._N)("[author] ignored this issue until it happens [count] time(s) in [duration]",{author:r,count:e.ignoreCount,duration:(0,j.tZ)(x.Z,{seconds:60*e.ignoreWindow})}):e.ignoreCount?(0,g._N)("[author] ignored this issue until it happens [count] time(s)",{author:r,count:e.ignoreCount}):e.ignoreUserCount&&e.ignoreUserWindow?(0,g._N)("[author] ignored this issue until it affects [count] user(s) in [duration]",{author:r,count:e.ignoreUserCount,duration:(0,j.tZ)(x.Z,{seconds:60*e.ignoreUserWindow})}):e.ignoreUserCount?(0,g._N)("[author] ignored this issue until it affects [count] user(s)",{author:r,count:e.ignoreUserCount}):(0,g._N)("[author] ignored this issue",{author:r})}(t)}case f.fc.SET_PUBLIC:return(0,g._N)("[author] made this issue public",{author:r});case f.fc.SET_PRIVATE:return(0,g._N)("[author] made this issue private",{author:r});case f.fc.SET_REGRESSION:{const{data:t}=e;return t.version?(0,g._N)("[author] marked this issue as a regression in [version]",{author:r,version:(0,j.tZ)(k.Z,{version:t.version,projectId:s,tooltipRawVersion:!0})}):(0,g._N)("[author] marked this issue as a regression",{author:r})}case f.fc.CREATE_ISSUE:{const{data:t}=e;return(0,g._N)("[author] created an issue on [provider] titled [title]",{author:r,provider:t.provider,title:(0,j.tZ)(y.Z,{href:t.location,children:t.title})})}case f.fc.UNMERGE_SOURCE:{const{data:t}=e,{destination:s,fingerprints:n}=t;return(0,g.tn)("%2$s migrated %1$s fingerprint to %3$s","%2$s migrated %1$s fingerprints to %3$s",n.length,r,s?(0,j.tZ)(b.Z,{to:"".concat(o).concat(s.id),children:s.shortId}):(0,g.t)("a group"))}case f.fc.UNMERGE_DESTINATION:{const{data:t}=e,{source:s,fingerprints:n}=t;return(0,g.tn)("%2$s migrated %1$s fingerprint from %3$s","%2$s migrated %1$s fingerprints from %3$s",n.length,r,s?(0,j.tZ)(b.Z,{to:"".concat(o).concat(s.id),children:s.shortId}):(0,g.t)("a group"))}case f.fc.FIRST_SEEN:return(0,g._N)("[author] first saw this issue",{author:r});case f.fc.ASSIGNED:{const{data:t}=e;return function(t){var s;let o;if("team"===t.assigneeType){const e=R.Z.getById(t.assignee);return o=e?e.slug:"<unknown-team>",(0,g._N)("[author] assigned this issue to #[assignee]",{author:r,assignee:o})}return e.user&&e.assignee===e.user.id?(0,g._N)("[author] assigned this issue to themselves",{author:r}):(o=I.Z.getById(t.assignee),"object"==typeof o&&null!==(s=o)&&void 0!==s&&s.email?(0,g._N)("[author] assigned this issue to [assignee]",{author:r,assignee:o.email}):(0,g._N)("[author] assigned this issue to an unknown user",{author:r}))}(t)}case f.fc.UNASSIGNED:return(0,g._N)("[author] unassigned this issue",{author:r});case f.fc.MERGE:return(0,g.tn)("%2$s merged %1$s issue into this issue","%2$s merged %1$s issues into this issue",e.data.issues.length,r);case f.fc.REPROCESS:{const{data:s}=e,{oldGroupId:o,eventCount:n}=s;return(0,g._N)("[author] reprocessed the events in this issue. [new-events]",{author:r,"new-events":(0,j.tZ)(b.Z,{to:"/organizations/".concat(t,"/issues/?query=reprocessing.original_issue_id:").concat(o),children:(0,g.tn)("See %s new event","See %s new events",n)})})}case f.fc.MARK_REVIEWED:return(0,g._N)("[author] marked this issue as reviewed",{author:r});default:return""}}()})}U.displayName="GroupActivityItem";const C=U;var D=s("./app/views/organizationGroupDetails/utils.tsx");class A extends n.Component{constructor(...e){super(...e),(0,r.Z)(this,"state",{createBusy:!1,error:!1,errorJSON:null,inputId:(0,N.E)()}),(0,r.Z)(this,"handleNoteDelete",(async({modelId:e,text:t})=>{const{api:s,group:r}=this.props;(0,a.E3)((0,g.t)("Removing comment..."));try{await(0,i.f_)(s,r,e,t),(0,a.B8)()}catch(e){(0,a.Iw)((0,g.t)("Failed to delete comment"))}})),(0,r.Z)(this,"handleNoteCreate",(async e=>{const{api:t,group:s}=this.props;this.setState({createBusy:!0}),(0,a.E3)((0,g.t)("Posting comment..."));try{await(0,i.kT)(t,s,e),this.setState({createBusy:!1,inputId:(0,N.E)()}),(0,a.B8)()}catch(e){this.setState({createBusy:!1,error:!0,errorJSON:e.responseJSON||h.N7}),(0,a.Iw)((0,g.t)("Unable to post comment"))}})),(0,r.Z)(this,"handleNoteUpdate",(async(e,{modelId:t,text:s})=>{const{api:r,group:o}=this.props;(0,a.E3)((0,g.t)("Updating comment..."));try{await(0,i.Qk)(r,o,e,t,s),(0,a.B8)()}catch(e){this.setState({error:!0,errorJSON:e.responseJSON||h.N7}),(0,a.Iw)((0,g.t)("Unable to update comment"))}}))}render(){const{group:e,organization:t}=this.props,{activity:s,count:r,id:o}=e,i=Number(r),a=(0,D.Ad)(s),m=(0,D.M3)(e,a),h=v.Z.get("user"),_=e&&e.project?[e.project.slug]:[],N={minHeight:140,group:e,projectSlugs:_,placeholder:(0,g.t)("Add details or updates to this event. \nTag users with @, or teams with #")};return(0,j.BX)(n.Fragment,{children:[(m===D.m7.REPROCESSED_AND_HASNT_EVENT||m===D.m7.REPROCESSED_AND_HAS_EVENT)&&(0,j.tZ)(O,{reprocessActivity:a,groupCount:i,orgSlug:t.slug,groupId:o}),(0,j.tZ)("div",{className:"row",children:(0,j.tZ)("div",{className:"col-md-9",children:(0,j.BX)("div",{children:[(0,j.tZ)(u.Z,{author:{type:"user",user:h},children:()=>(0,j.tZ)(l.Z,{storageKey:"groupinput:latest",itemKey:e.id,onCreate:this.handleNoteCreate,busy:this.state.createBusy,error:this.state.error,errorJSON:this.state.errorJSON,...N},this.state.inputId)}),e.activity.map((t=>{var s;const r=t.user?t.user.name:"Sentry";return t.type===f.fc.NOTE?(0,j.tZ)(p.Z,{mini:!0,children:(0,j.tZ)(d.Z,{showTime:!1,text:t.data.text,modelId:t.id,user:t.user,dateCreated:t.dateCreated,authorName:r,onDelete:this.handleNoteDelete,onUpdate:this.handleNoteUpdate,...N})},"note-".concat(t.id)):(0,j.tZ)(p.Z,{mini:!0,children:(0,j.tZ)(u.Z,{author:{type:t.user?"user":"system",user:null!==(s=t.user)&&void 0!==s?s:void 0},date:t.dateCreated,header:(0,j.tZ)(C,{author:(0,j.tZ)(c.Z,{children:r}),activity:t,orgSlug:this.props.params.orgId,projectId:e.project.id})})},"item-".concat(t.id))}))]})})})]})}}A.displayName="GroupActivity";const T=(0,E.Z)((0,S.Z)(A)),O=(0,o.Z)(m.Z,{target:"e1emkr30"})("margin:-",(0,_.Z)(3)," -",(0,_.Z)(4)," ",(0,_.Z)(4)," -",(0,_.Z)(4),";z-index:1;")},"./app/views/organizationGroupDetails/utils.tsx":(e,t,s)=>{"use strict";s.d(t,{MN:()=>u,V7:()=>d,g5:()=>l,dG:()=>p,sC:()=>h,Ad:()=>g,m7:()=>v,M3:()=>_}),s("../node_modules/core-js/modules/web.dom-collections.iterator.js");var r=s("../node_modules/lodash/orderBy.js"),o=s.n(r),n=s("./app/actionCreators/group.tsx"),i=s("./app/api.tsx"),a=s("./app/locale.tsx"),c=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");async function u(e,t,s,r,o,n){const i="latest"===r||"oldest"===r?"/issues/".concat(s,"/events/").concat(r,"/"):"/projects/".concat(t,"/").concat(n,"/events/").concat(r,"/"),a={};return 0!==o.length&&(a.environment=o),await e.requestPromise(i,{query:a})}function d(e,t,s,r){(0,n.Gv)(e,{orgId:t,projectId:s,itemIds:[r],failSilently:!0,data:{hasSeen:!0}},{})}function l(e,t){return(new i.KU).requestPromise("/issues/".concat(e,"/user-reports/"),{includeAllArgs:!0,query:t})}function p(e){const t=e.tags.find((({key:e})=>"environment"===e));return t?t.value:null}const m={commented:(0,a.t)("You're receiving workflow notifications because you have commented on this issue."),assigned:(0,a.t)("You're receiving workflow notifications because you were assigned to this issue."),bookmarked:(0,a.t)("You're receiving workflow notifications because you have bookmarked this issue."),changed_status:(0,a.t)("You're receiving workflow notifications because you have changed the status of this issue."),mentioned:(0,a.t)("You're receiving workflow notifications because you have been mentioned in this issue.")};function h(e,t=!1){if(e.subscriptionDetails&&e.subscriptionDetails.disabled)return(0,a._N)("You have [link:disabled workflow notifications] for this project.",{link:t?(0,c.tZ)("span",{}):(0,c.tZ)("a",{href:"/account/settings/notifications/"})});if(!e.isSubscribed)return(0,a.t)("Subscribe to workflow notifications for this issue");if(e.subscriptionDetails){const{reason:t}=e.subscriptionDetails;if("unknown"===t)return(0,a.t)("You're receiving workflow notifications because you are subscribed to this issue.");if(t&&m.hasOwnProperty(t))return m[t]}return(0,a._N)("You're receiving updates because you are [link:subscribed to workflow notifications] for this project.",{link:t?(0,c.tZ)("span",{}):(0,c.tZ)("a",{href:"/account/settings/notifications/"})})}function g(e){return o()([...e],(({dateCreated:e})=>new Date(e)),["desc"])[0]}let v;function _(e,t){const{status:s,count:r,activity:o}=e,n=Number(r);switch(s){case"reprocessing":return v.REPROCESSING;case"unresolved":{const e=null!=t?t:g(o);return"reprocess"===(null==e?void 0:e.type)?0===n?v.REPROCESSED_AND_HASNT_EVENT:v.REPROCESSED_AND_HAS_EVENT:v.NO_STATUS}default:return v.NO_STATUS}}!function(e){e.REPROCESSED_AND_HASNT_EVENT="reprocessed_and_hasnt_event",e.REPROCESSED_AND_HAS_EVENT="reprocessed_and_has_event",e.REPROCESSING="reprocessing",e.NO_STATUS="no_status"}(v||(v={}))},"../node_modules/lodash/orderBy.js":(e,t,s)=>{var r=s("../node_modules/lodash/_baseOrderBy.js"),o=s("../node_modules/lodash/isArray.js");e.exports=function(e,t,s,n){return null==e?[]:(o(t)||(t=null==t?[]:[t]),o(s=n?void 0:s)||(s=null==s?[]:[s]),r(e,t,s))}}}]);
//# sourceMappingURL=../sourcemaps/app_views_organizationGroupDetails_groupActivity_tsx.b2fc6437b03393b6e91a0c7e0ca9b7e4.js.map