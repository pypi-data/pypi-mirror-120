(self.webpackChunk=self.webpackChunk||[]).push([["app_views_issueList_testSessionPercent_tsx"],{"./app/components/forms/input.tsx":(e,t,s)=>{"use strict";s.d(t,{Z:()=>d}),s("../node_modules/react/index.js");var o=s("../node_modules/classnames/index.js"),n=s.n(o),r=s("../node_modules/lodash/omit.js"),a=s.n(r),i=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");function d({className:e,...t}){return(0,i.tZ)("input",{className:n()("form-control",e),...a()(t,"children")})}d.displayName="Input"},"./app/views/issueList/testSessionPercent.tsx":(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var o=s("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),n=(s("../node_modules/core-js/modules/web.dom-collections.iterator.js"),s("../node_modules/react/index.js")),r=s("../node_modules/lodash/range.js"),a=s.n(r),i=s("../node_modules/moment/moment.js"),d=s.n(i),l=s("../node_modules/query-string/index.js"),u=s("./app/components/acl/feature.tsx"),c=s("./app/components/acl/featureDisabled.tsx"),p=s("./app/components/forms/input.tsx"),m=s("./app/components/layouts/thirds.tsx"),h=s("./app/components/links/link.tsx"),f=s("./app/locale.tsx"),g=s("./app/utils/dates.tsx"),x=s("./app/utils/discover/eventView.tsx"),j=s("./app/utils/withApi.tsx"),_=s("./app/utils/withGlobalSelection.tsx"),v=s("./app/utils/withOrganization.tsx"),b=s("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");const y=a()(-1,-168,-1);function Z({params:e,api:t,selection:s,organization:o}){const[r,a]=(0,n.useState)("0.1"),[i,u]=(0,n.useState)([]),c={expand:"sessions",display:"sessions",project:s.projects,query:"is:unresolved",sort:"freq"};function p({title:e,id:t,type:n},r){const a=(0,g.v5)(d()().subtract(Math.abs(r-2),"hours").toDate()),i=(0,g.v5)(d()().subtract(Math.abs(r)-3,"hours").toDate()),l={id:void 0,name:e||n,fields:["title","release","environment","user.display","timestamp"],orderby:"-timestamp",query:"issue.id:".concat(t),projects:s.projects,version:2,start:a,end:i};return x.ZP.fromSavedQuery(l).getResultsViewUrlTarget(o.slug)}return(0,n.useEffect)((()=>{(async()=>{for(let s=0;s<y.length;s++){const o=y[s],n=(0,g.v5)(d()().subtract(Math.abs(o),"hours").toDate()),r=(0,g.v5)(d()().subtract(Math.abs(o)-1,"hours").toDate()),a={...c,limit:5,start:n,end:r};let i;try{i=await t.requestPromise("/organizations/".concat(e.orgId,"/issues/"),{method:"GET",data:l.stringify(a)})}catch{i=[]}const p=i.map((e=>e.id));if(0===p.length){u((e=>[...e,[]]));continue}const m={...c,start:n,end:r,groups:p};try{const s=(await t.requestPromise("/organizations/".concat(e.orgId,"/issues-stats/"),{method:"GET",data:l.stringify(m)})).map((e=>({group:i.find((t=>t.id===e.id)),percent:e.sessionCount?Number(e.count)/Number(e.sessionCount)*100:100})));u((e=>[...e,s]))}catch{u((e=>[...e,[]]))}}})()}),[]),(0,b.BX)(n.Fragment,{children:[(0,b.tZ)(m.h4,{children:(0,b.BX)(m.oB,{children:[(0,b.tZ)(m.Dx,{children:(0,f.t)("Session Threshold Percent")}),(0,b.tZ)(P,{type:"text",value:r,onChange:e=>{a(e.target.value)}})]})}),(0,b.tZ)(m.uT,{children:(0,b.tZ)(m.or,{fullWidth:!0,children:y.map(((e,t)=>{const s=i[t],o=void 0===s;return(0,b.BX)(n.Fragment,{children:[(0,b.tZ)("h4",{children:(0,f.tn)("%s hour","%s hours",e)}),(0,b.BX)("ul",{children:[o&&(0,f.t)("Loadingâ€¦"),!o&&s.filter((({percent:e})=>e>parseFloat(r))).map((({group:t,percent:s})=>(0,b.BX)("li",{children:[s.toLocaleString(),"% -"," ",(0,b.tZ)(h.Z,{to:p(t,e),children:t.title})]},t.id)))]})]},t)}))})})]})}function w(e){return(0,b.tZ)(u.Z,{features:["issue-percent-filters"],renderDisabled:e=>(0,b.tZ)(c.Z,{features:e.features,hideHelpToggle:!0}),children:(0,b.tZ)(Z,{...e})})}Z.displayName="SessionPercent",w.displayName="SessionPercentWrapper";const S=(0,j.Z)((0,_.Z)((0,v.Z)(w))),P=(0,o.Z)(p.Z,{target:"e1vqwjeo0"})({name:"1pzk433",styles:"width:100px"})},"../node_modules/lodash/_baseRange.js":e=>{var t=Math.ceil,s=Math.max;e.exports=function(e,o,n,r){for(var a=-1,i=s(t((o-e)/(n||1)),0),d=Array(i);i--;)d[r?i:++a]=e,e+=n;return d}},"../node_modules/lodash/_createRange.js":(e,t,s)=>{var o=s("../node_modules/lodash/_baseRange.js"),n=s("../node_modules/lodash/_isIterateeCall.js"),r=s("../node_modules/lodash/toFinite.js");e.exports=function(e){return function(t,s,a){return a&&"number"!=typeof a&&n(t,s,a)&&(s=a=void 0),t=r(t),void 0===s?(s=t,t=0):s=r(s),a=void 0===a?t<s?1:-1:r(a),o(t,s,a,e)}}},"../node_modules/lodash/range.js":(e,t,s)=>{var o=s("../node_modules/lodash/_createRange.js")();e.exports=o}}]);
//# sourceMappingURL=../sourcemaps/app_views_issueList_testSessionPercent_tsx.d3fcec4060c1c575776c8572db100f8f.js.map