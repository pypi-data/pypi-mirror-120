"use strict";(self.webpackChunk=self.webpackChunk||[]).push([["app_views_acceptOrganizationInvite_tsx"],{"./app/views/acceptOrganizationInvite.tsx":(t,e,i)=>{i.r(e),i.d(e,{default:()=>k});var n=i("../node_modules/@babel/runtime/helpers/esm/defineProperty.js"),r=i("../node_modules/@emotion/styled/base/dist/emotion-styled-base.browser.esm.js"),a=(i("../node_modules/core-js/modules/web.dom-collections.iterator.js"),i("../node_modules/core-js/modules/es.string.replace.js"),i("../node_modules/react/index.js")),s=i("../node_modules/react-router/es/index.js"),o=i("../node_modules/@sentry/utils/esm/object.js"),c=i("./app/actionCreators/account.tsx"),l=i("./app/components/alert.tsx"),d=i("./app/components/button.tsx"),g=i("./app/components/links/externalLink.tsx"),u=i("./app/components/links/link.tsx"),h=i("./app/components/narrowLayout.tsx"),p=i("./app/locale.tsx"),m=i("./app/stores/configStore.tsx"),Z=i("./app/styles/space.tsx"),S=i("./app/views/asyncView.tsx"),y=i("./app/views/settings/components/settingsPageHeader.tsx"),w=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class v extends S.Z{constructor(...t){super(...t),(0,n.Z)(this,"handleLogout",(async t=>{t.preventDefault(),await(0,c.kS)(this.api),window.location.replace(this.makeNextUrl("/auth/login/"))})),(0,n.Z)(this,"handleAcceptInvite",(async()=>{const{memberId:t,token:e}=this.props.params;this.setState({accepting:!0});try{await this.api.requestPromise("/accept-invite/".concat(t,"/").concat(e,"/"),{method:"POST"}),s.browserHistory.replace("/".concat(this.state.inviteDetails.orgSlug,"/"))}catch{this.setState({acceptError:!0})}this.setState({accepting:!1})}))}getEndpoints(){const{memberId:t,token:e}=this.props.params;return[["inviteDetails","/accept-invite/".concat(t,"/").concat(e,"/")]]}getTitle(){return(0,p.t)("Accept Organization Invite")}makeNextUrl(t){return"".concat(t,"?").concat((0,o._j)({next:window.location.pathname}))}get existingMemberAlert(){const t=m.Z.get("user");return(0,w.tZ)(l.Z,{type:"warning","data-test-id":"existing-member",children:(0,p._N)("Your account ([email]) is already a member of this organization. [switchLink:Switch accounts]?",{email:t.email,switchLink:(0,w.tZ)(u.Z,{to:"","data-test-id":"existing-member-link",onClick:this.handleLogout})})})}get authenticationActions(){const{inviteDetails:t}=this.state;return(0,w.BX)(a.Fragment,{children:[!t.requireSso&&(0,w.tZ)("p",{"data-test-id":"action-info-general",children:(0,p.t)("To continue, you must either create a new account, or login to an\n              existing Sentry account.")}),t.needsSso&&(0,w.tZ)("p",{"data-test-id":"action-info-sso",children:t.requireSso?(0,p._N)("Note that [orgSlug] has required Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,w.tZ)("strong",{children:t.orgSlug}),authProvider:t.ssoProvider}):(0,p._N)("Note that [orgSlug] has enabled Single Sign-On (SSO) using\n               [authProvider]. You may create an account by authenticating with\n               the organization's SSO provider.",{orgSlug:(0,w.tZ)("strong",{children:t.orgSlug}),authProvider:t.ssoProvider})}),(0,w.BX)(x,{children:[(0,w.BX)(b,{children:[t.needsSso&&(0,w.tZ)(d.ZP,{label:"sso-login",priority:"primary",href:this.makeNextUrl("/auth/login/".concat(t.orgSlug,"/")),children:(0,p.t)("Join with %s",t.ssoProvider)}),!t.requireSso&&(0,w.tZ)(d.ZP,{label:"create-account",priority:"primary",href:this.makeNextUrl("/auth/register/"),children:(0,p.t)("Create a new account")})]}),!t.requireSso&&(0,w.tZ)(g.Z,{href:this.makeNextUrl("/auth/login/"),openInNewTab:!1,"data-test-id":"link-with-existing",children:(0,p.t)("Login using an existing account")})]})]})}get warning2fa(){const{inviteDetails:t}=this.state;return(0,w.BX)(a.Fragment,{children:[(0,w.tZ)("p",{"data-test-id":"2fa-warning",children:(0,p._N)("To continue, [orgSlug] requires all members to configure two-factor authentication.",{orgSlug:t.orgSlug})}),(0,w.tZ)(x,{children:(0,w.tZ)(d.ZP,{priority:"primary",to:"/settings/account/security/",children:(0,p.t)("Configure Two-Factor Auth")})})]})}get warningEmailVerification(){const{inviteDetails:t}=this.state;return(0,w.BX)(a.Fragment,{children:[(0,w.tZ)("p",{"data-test-id":"email-verification-warning",children:(0,p._N)("To continue, [orgSlug] requires all members to verify their email address.",{orgSlug:t.orgSlug})}),(0,w.tZ)(x,{children:(0,w.tZ)(d.ZP,{priority:"primary",to:"/settings/account/emails/",children:(0,p.t)("Verify Email Address")})})]})}get acceptActions(){const{inviteDetails:t,accepting:e}=this.state;return(0,w.tZ)(x,{children:(0,w.tZ)(d.ZP,{label:"join-organization",priority:"primary",disabled:e,onClick:this.handleAcceptInvite,children:(0,p.t)("Join the %s organization",t.orgSlug)})})}renderError(){return(0,w.tZ)(h.Z,{children:(0,w.tZ)(l.Z,{type:"warning",children:(0,p.t)("This organization invite link is no longer valid.")})})}renderBody(){const{inviteDetails:t,acceptError:e}=this.state;return(0,w.BX)(h.Z,{children:[(0,w.tZ)(y.Z,{title:(0,p.t)("Accept organization invite")}),e&&(0,w.tZ)(l.Z,{type:"error",children:(0,p.t)("Failed to join this organization. Please try again")}),(0,w.tZ)(f,{"data-test-id":"accept-invite",children:(0,p._N)("[orgSlug] is using Sentry to track and debug errors.",{orgSlug:(0,w.tZ)("strong",{children:t.orgSlug})})}),t.needsAuthentication?this.authenticationActions:t.existingMember?this.existingMemberAlert:t.needs2fa?this.warning2fa:t.needsEmailVerification?this.warningEmailVerification:t.needsSso?this.authenticationActions:this.acceptActions]})}}const x=(0,r.Z)("div",{target:"e1adv0ef2"})("display:flex;align-items:center;justify-content:space-between;margin-bottom:",(0,Z.Z)(3),";"),b=(0,r.Z)("span",{target:"e1adv0ef1"})(">a{margin-right:",(0,Z.Z)(1),";}"),f=(0,r.Z)("p",{target:"e1adv0ef0"})({name:"1elbn1z",styles:"font-size:1.2em"}),k=v},"./app/views/asyncView.tsx":(t,e,i)=>{i.d(e,{Z:()=>o}),i("../node_modules/react/index.js");var n=i("../node_modules/react-document-title/index.js"),r=i.n(n),a=i("./app/components/asyncComponent.tsx"),s=i("../node_modules/@emotion/react/jsx-runtime/dist/emotion-react-jsx-runtime.browser.esm.js");class o extends a.Z{getTitle(){return""}render(){const t=this.getTitle();return(0,s.tZ)(r(),{title:"".concat(t?"".concat(t," - "):"","Sentry"),children:this.renderComponent()})}}o.displayName="AsyncView"}}]);
//# sourceMappingURL=../sourcemaps/app_views_acceptOrganizationInvite_tsx.e035a68ece14a78eefa3bd98cb862592.js.map