{"version":3,"file":"chunks/app_views_settings_components_forms_controls_rangeSlider_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/views/settings/components/forms/controls/rangeSlider.tsx"],"sourcesContent":["import React, {ChangeEvent, KeyboardEvent, MouseEvent, useEffect, useState} from 'react';\nimport styled from '@emotion/styled';\n\nimport {t} from 'app/locale';\nimport space from 'app/styles/space';\nimport {defined} from 'app/utils';\nimport Input from 'app/views/settings/components/forms/controls/input';\n\ntype Props = {\n  name: string;\n\n  /**\n   * String is a valid type here only for empty string\n   * Otherwise react complains:\n   * \"`value` prop on `input` should not be null. Consider using an empty string to clear the component or `undefined` for uncontrolled components.\"\n   *\n   * And we want this to be a controlled input when value is empty\n   */\n  value: number | '';\n\n  /**\n   * min allowed value, not needed if using `allowedValues`\n   */\n  min?: number;\n\n  /**\n   * max allowed value, not needed if using `allowedValues`\n   */\n  max?: number;\n\n  step?: number;\n  disabled?: boolean;\n\n  /**\n   * Render prop for slider's label\n   * Is passed the value as an argument\n   */\n  formatLabel?: (value: number | '') => React.ReactNode;\n\n  /**\n   * Array of allowed values. Make sure `value` is in this list.\n   * THIS NEEDS TO BE SORTED\n   */\n  allowedValues?: number[];\n\n  /**\n   * Show input control for custom values\n   */\n  showCustomInput?: boolean;\n  /**\n   * Show label with current value\n   */\n  showLabel?: boolean;\n\n  /**\n   * Placeholder for custom input\n   */\n  placeholder?: string;\n\n  /**\n   * This is called when *any* MouseUp or KeyUp event happens.\n   * Used for \"smart\" Fields to trigger a \"blur\" event. `onChange` can\n   * be triggered quite frequently\n   */\n  onBlur?: (\n    event: MouseEvent<HTMLInputElement> | KeyboardEvent<HTMLInputElement>\n  ) => void;\n  onChange?: (value: Props['value'], event: ChangeEvent<HTMLInputElement>) => void;\n  className?: string;\n  forwardRef?: React.Ref<HTMLDivElement>;\n};\n\nfunction RangeSlider({\n  value,\n  allowedValues,\n  showCustomInput,\n  name,\n  disabled,\n  placeholder,\n  formatLabel,\n  className,\n  onBlur,\n  onChange,\n  forwardRef,\n  showLabel = true,\n  ...props\n}: Props) {\n  const [sliderValue, setSliderValue] = useState(\n    allowedValues ? allowedValues.indexOf(Number(value || 0)) : value\n  );\n\n  useEffect(() => {\n    updateSliderValue();\n  }, [value]);\n\n  function updateSliderValue() {\n    if (!defined(value)) {\n      return;\n    }\n\n    const newSliderValueIndex = allowedValues?.indexOf(Number(value || 0)) ?? -1;\n\n    // If `allowedValues` is defined, then `sliderValue` represents index to `allowedValues`\n    if (newSliderValueIndex > -1) {\n      setSliderValue(newSliderValueIndex);\n      return;\n    }\n\n    setSliderValue(value);\n  }\n\n  function getActualValue(newSliderValue: Props['value']): Props['value'] {\n    if (!allowedValues) {\n      return newSliderValue;\n    }\n\n    // If `allowedValues` is defined, then `sliderValue` represents index to `allowedValues`\n    return allowedValues[newSliderValue];\n  }\n\n  function handleInput(e: ChangeEvent<HTMLInputElement>) {\n    const newSliderValue = parseInt(e.target.value, 10);\n    setSliderValue(newSliderValue);\n    onChange?.(getActualValue(newSliderValue), e);\n  }\n\n  function handleCustomInputChange(e: ChangeEvent<HTMLInputElement>) {\n    setSliderValue(parseInt(e.target.value, 10) || 0);\n  }\n\n  function handleBlur(e: MouseEvent<HTMLInputElement> | KeyboardEvent<HTMLInputElement>) {\n    if (typeof onBlur !== 'function') {\n      return;\n    }\n\n    onBlur(e);\n  }\n\n  function getSliderData() {\n    if (!allowedValues) {\n      const {min, max, step} = props;\n      return {\n        min,\n        max,\n        step,\n        actualValue: sliderValue,\n        displayValue: sliderValue,\n      };\n    }\n\n    const actualValue = allowedValues[sliderValue];\n\n    return {\n      step: 1,\n      min: 0,\n      max: allowedValues.length - 1,\n      actualValue,\n      displayValue: defined(actualValue) ? actualValue : t('Invalid value'),\n    };\n  }\n\n  const {min, max, step, actualValue, displayValue} = getSliderData();\n\n  return (\n    <div className={className} ref={forwardRef}>\n      {!showCustomInput && showLabel && (\n        <Label htmlFor={name}>{formatLabel?.(actualValue) ?? displayValue}</Label>\n      )}\n      <SliderAndInputWrapper showCustomInput={showCustomInput}>\n        <Slider\n          type=\"range\"\n          name={name}\n          min={min}\n          max={max}\n          step={step}\n          disabled={disabled}\n          onInput={handleInput}\n          onMouseUp={handleBlur}\n          onKeyUp={handleBlur}\n          value={sliderValue}\n          hasLabel={!showCustomInput}\n        />\n        {showCustomInput && (\n          <Input\n            placeholder={placeholder}\n            value={sliderValue}\n            onChange={handleCustomInputChange}\n            onBlur={handleInput}\n          />\n        )}\n      </SliderAndInputWrapper>\n    </div>\n  );\n}\n\nconst RangeSliderContainer = React.forwardRef(function RangeSliderContainer(\n  props: Props,\n  ref: React.Ref<any>\n) {\n  return <RangeSlider {...props} forwardRef={ref} />;\n});\n\nexport default RangeSliderContainer;\n\nexport const Slider = styled('input')<{hasLabel: boolean}>`\n  /* stylelint-disable-next-line property-no-vendor-prefix */\n  -webkit-appearance: none;\n  width: 100%;\n  background: transparent;\n  margin: ${p => p.theme.grid}px 0 ${p => p.theme.grid * (p.hasLabel ? 2 : 1)}px;\n\n  &::-webkit-slider-runnable-track {\n    width: 100%;\n    height: 3px;\n    cursor: pointer;\n    background: ${p => p.theme.border};\n    border-radius: 3px;\n    border: 0;\n  }\n\n  &::-moz-range-track {\n    width: 100%;\n    height: 3px;\n    cursor: pointer;\n    background: ${p => p.theme.border};\n    border-radius: 3px;\n    border: 0;\n  }\n\n  &::-ms-track {\n    width: 100%;\n    height: 3px;\n    cursor: pointer;\n    background: ${p => p.theme.border};\n    border-radius: 3px;\n    border: 0;\n  }\n\n  &::-webkit-slider-thumb {\n    box-shadow: 0 0 0 3px ${p => p.theme.background};\n    height: 17px;\n    width: 17px;\n    border-radius: 50%;\n    background: ${p => p.theme.active};\n    cursor: pointer;\n    /* stylelint-disable-next-line property-no-vendor-prefix */\n    -webkit-appearance: none;\n    margin-top: -7px;\n    border: 0;\n  }\n\n  &::-moz-range-thumb {\n    box-shadow: 0 0 0 3px ${p => p.theme.background};\n    height: 17px;\n    width: 17px;\n    border-radius: 50%;\n    background: ${p => p.theme.active};\n    cursor: pointer;\n    /* stylelint-disable-next-line property-no-vendor-prefix */\n    -webkit-appearance: none;\n    margin-top: -7px;\n    border: 0;\n  }\n\n  &::-ms-thumb {\n    box-shadow: 0 0 0 3px ${p => p.theme.background};\n    height: 17px;\n    width: 17px;\n    border-radius: 50%;\n    background: ${p => p.theme.active};\n    cursor: pointer;\n    /* stylelint-disable-next-line property-no-vendor-prefix */\n    -webkit-appearance: none;\n    margin-top: -7px;\n    border: 0;\n  }\n\n  &::-ms-fill-lower {\n    background: ${p => p.theme.border};\n    border: 0;\n    border-radius: 50%;\n  }\n\n  &::-ms-fill-upper {\n    background: ${p => p.theme.border};\n    border: 0;\n    border-radius: 50%;\n  }\n\n  &:focus {\n    outline: none;\n\n    &::-webkit-slider-runnable-track {\n      background: ${p => p.theme.border};\n    }\n\n    &::-ms-fill-upper {\n      background: ${p => p.theme.border};\n    }\n\n    &::-ms-fill-lower {\n      background: ${p => p.theme.border};\n    }\n  }\n\n  &[disabled] {\n    &::-webkit-slider-thumb {\n      background: ${p => p.theme.border};\n      cursor: default;\n    }\n\n    &::-moz-range-thumb {\n      background: ${p => p.theme.border};\n      cursor: default;\n    }\n\n    &::-ms-thumb {\n      background: ${p => p.theme.border};\n      cursor: default;\n    }\n\n    &::-webkit-slider-runnable-track {\n      cursor: default;\n    }\n\n    &::-moz-range-track {\n      cursor: default;\n    }\n\n    &::-ms-track {\n      cursor: default;\n    }\n  }\n`;\n\nconst Label = styled('label')`\n  font-size: 14px;\n  margin-bottom: ${p => p.theme.grid}px;\n  color: ${p => p.theme.subText};\n`;\n\nconst SliderAndInputWrapper = styled('div')<{showCustomInput?: boolean}>`\n  display: grid;\n  align-items: center;\n  grid-auto-flow: column;\n  grid-template-columns: 4fr ${p => p.showCustomInput && '1fr'};\n  grid-gap: ${space(1)};\n`;\n"],"names":["RangeSlider","value","allowedValues","showCustomInput","name","disabled","placeholder","formatLabel","className","onBlur","onChange","forwardRef","showLabel","props","sliderValue","setSliderValue","useState","indexOf","Number","handleInput","e","newSliderValue","parseInt","target","getActualValue","handleBlur","useEffect","defined","newSliderValueIndex","updateSliderValue","min","max","step","actualValue","displayValue","length","t","getSliderData","ref","Label","htmlFor","SliderAndInputWrapper","Slider","type","onInput","onMouseUp","onKeyUp","hasLabel","React","p","theme","grid","border","background","active","subText","space"],"sourceRoot":""}