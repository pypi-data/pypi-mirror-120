{"version":3,"file":"chunks/app_components_platformPicker_tsx.xxxxxxxxxxxxxxxxxxxx.js","mappings":"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","sources":["webpack:///./app/components/links/listLink.tsx","webpack:///./app/components/platformPicker.tsx"],"sourcesContent":["import * as React from 'react';\nimport {Link as RouterLink, withRouter, WithRouterProps} from 'react-router';\nimport styled from '@emotion/styled';\nimport classNames from 'classnames';\nimport {LocationDescriptor} from 'history';\nimport omit from 'lodash/omit';\nimport * as qs from 'query-string';\n\ntype DefaultProps = {\n  index: boolean;\n  activeClassName: string;\n  disabled: boolean;\n};\n\ntype LinkProps = Omit<React.ComponentProps<typeof RouterLink>, 'to'>;\n\ntype Props = WithRouterProps &\n  Partial<DefaultProps> &\n  LinkProps & {\n    /**\n     * Link target. We don't want to expose the ToLocationFunction on this component.\n     */\n    to: LocationDescriptor;\n    query?: string;\n    // If supplied by parent component, decides whether link element\n    // is \"active\" or not ... overriding default behavior of strict\n    // route matching\n    isActive?: (location: LocationDescriptor, indexOnly?: boolean) => boolean;\n  };\n\nclass ListLink extends React.Component<Props> {\n  static displayName = 'ListLink';\n\n  static defaultProps: DefaultProps = {\n    activeClassName: 'active',\n    index: false,\n    disabled: false,\n  };\n\n  isActive() {\n    const {isActive, to, query, index, router} = this.props;\n    const queryData = query ? qs.parse(query) : undefined;\n    const target: LocationDescriptor =\n      typeof to === 'string' ? {pathname: to, query: queryData} : to;\n\n    if (typeof isActive === 'function') {\n      return isActive(target, index);\n    }\n\n    return router.isActive(target, index);\n  }\n\n  getClassName = () => {\n    const _classNames = {};\n    const {className, activeClassName} = this.props;\n\n    if (className) {\n      _classNames[className] = true;\n    }\n\n    if (this.isActive() && activeClassName) {\n      _classNames[activeClassName] = true;\n    }\n\n    return classNames(_classNames);\n  };\n\n  render() {\n    const {index, children, to, disabled, ...props} = this.props;\n    const carriedProps = omit(\n      props,\n      'activeClassName',\n      'css',\n      'isActive',\n      'index',\n      'router',\n      'location'\n    );\n\n    return (\n      <StyledLi className={this.getClassName()} disabled={disabled}>\n        <RouterLink {...carriedProps} onlyActiveOnIndex={index} to={disabled ? '' : to}>\n          {children}\n        </RouterLink>\n      </StyledLi>\n    );\n  }\n}\n\nexport default withRouter(ListLink);\n\nconst StyledLi = styled('li', {\n  shouldForwardProp: prop => prop !== 'disabled',\n})<{disabled?: boolean}>`\n  ${p =>\n    p.disabled &&\n    `\n   a {\n    color:${p.theme.disabled} !important;\n    pointer-events: none;\n    :hover {\n      color: ${p.theme.disabled}  !important;\n    }\n   }\n`}\n`;\n","import * as React from 'react';\nimport keydown from 'react-keydown';\nimport styled from '@emotion/styled';\nimport debounce from 'lodash/debounce';\nimport {PlatformIcon} from 'platformicons';\n\nimport Button from 'app/components/button';\nimport ExternalLink from 'app/components/links/externalLink';\nimport ListLink from 'app/components/links/listLink';\nimport NavTabs from 'app/components/navTabs';\nimport {DEFAULT_DEBOUNCE_DURATION} from 'app/constants';\nimport categoryList, {filterAliases, PlatformKey} from 'app/data/platformCategories';\nimport platforms from 'app/data/platforms';\nimport {IconClose, IconProject, IconSearch} from 'app/icons';\nimport {t, tct} from 'app/locale';\nimport {inputStyles} from 'app/styles/input';\nimport space from 'app/styles/space';\nimport {Organization, PlatformIntegration} from 'app/types';\nimport trackAdvancedAnalyticsEvent from 'app/utils/analytics/trackAdvancedAnalyticsEvent';\nimport EmptyMessage from 'app/views/settings/components/emptyMessage';\n\nconst PLATFORM_CATEGORIES = [...categoryList, {id: 'all', name: t('All')}] as const;\n\nconst PlatformList = styled('div')`\n  display: grid;\n  grid-gap: ${space(1)};\n  grid-template-columns: repeat(auto-fill, 112px);\n  margin-bottom: ${space(2)};\n`;\n\ntype Category = typeof PLATFORM_CATEGORIES[number]['id'];\n\ntype Props = {\n  setPlatform: (key: PlatformKey | null) => void;\n  platform?: string | null;\n  showOther?: boolean;\n  listClassName?: string;\n  listProps?: React.ComponentProps<typeof PlatformList>;\n  noAutoFilter?: boolean;\n  defaultCategory?: Category;\n  organization?: Organization;\n  source?: string;\n};\n\ntype State = {\n  category: Category;\n  filter: string;\n};\n\nclass PlatformPicker extends React.Component<Props, State> {\n  static defaultProps = {\n    showOther: true,\n  };\n\n  state: State = {\n    category: this.props.defaultCategory ?? PLATFORM_CATEGORIES[0].id,\n    filter: this.props.noAutoFilter ? '' : (this.props.platform || '').split('-')[0],\n  };\n\n  get platformList() {\n    const {category} = this.state;\n    const currentCategory = categoryList.find(({id}) => id === category);\n\n    const filter = this.state.filter.toLowerCase();\n\n    const subsetMatch = (platform: PlatformIntegration) =>\n      platform.id.includes(filter) ||\n      platform.name.toLowerCase().includes(filter) ||\n      filterAliases[platform.id as PlatformKey]?.some(alias => alias.includes(filter));\n\n    const categoryMatch = (platform: PlatformIntegration) =>\n      category === 'all' ||\n      (currentCategory?.platforms as undefined | string[])?.includes(platform.id);\n\n    const filtered = platforms\n      .filter(this.state.filter ? subsetMatch : categoryMatch)\n      .sort((a, b) => a.id.localeCompare(b.id));\n\n    return this.props.showOther ? filtered : filtered.filter(({id}) => id !== 'other');\n  }\n\n  logSearch = debounce(() => {\n    if (this.state.filter) {\n      trackAdvancedAnalyticsEvent('growth.platformpicker_search', {\n        search: this.state.filter.toLowerCase(),\n        num_results: this.platformList.length,\n        source: this.props.source,\n        organization: this.props.organization ?? null,\n      });\n    }\n  }, DEFAULT_DEBOUNCE_DURATION);\n\n  @keydown('/')\n  focusSearch(e: KeyboardEvent) {\n    if (e.target !== this.searchInput.current) {\n      this.searchInput?.current?.focus();\n      e.preventDefault();\n    }\n  }\n\n  searchInput = React.createRef<HTMLInputElement>();\n\n  render() {\n    const platformList = this.platformList;\n    const {setPlatform, listProps, listClassName} = this.props;\n    const {filter, category} = this.state;\n\n    return (\n      <React.Fragment>\n        <NavContainer>\n          <CategoryNav>\n            {PLATFORM_CATEGORIES.map(({id, name}) => (\n              <ListLink\n                key={id}\n                onClick={(e: React.MouseEvent) => {\n                  trackAdvancedAnalyticsEvent('growth.platformpicker_category', {\n                    category: id,\n                    source: this.props.source,\n                    organization: this.props.organization ?? null,\n                  });\n                  this.setState({category: id, filter: ''});\n                  e.preventDefault();\n                }}\n                to=\"\"\n                isActive={() => id === (filter ? 'all' : category)}\n              >\n                {name}\n              </ListLink>\n            ))}\n          </CategoryNav>\n          <SearchBar>\n            <IconSearch size=\"xs\" />\n            <input\n              type=\"text\"\n              ref={this.searchInput}\n              value={filter}\n              placeholder={t('Filter Platforms')}\n              onChange={e => this.setState({filter: e.target.value}, this.logSearch)}\n            />\n          </SearchBar>\n        </NavContainer>\n        <PlatformList className={listClassName} {...listProps}>\n          {platformList.map(platform => (\n            <PlatformCard\n              data-test-id={`platform-${platform.id}`}\n              key={platform.id}\n              platform={platform}\n              selected={this.props.platform === platform.id}\n              onClear={(e: React.MouseEvent) => {\n                setPlatform(null);\n                e.stopPropagation();\n              }}\n              onClick={() => {\n                trackAdvancedAnalyticsEvent('growth.select_platform', {\n                  platform_id: platform.id,\n                  source: this.props.source,\n                  organization: this.props.organization ?? null,\n                });\n                setPlatform(platform.id as PlatformKey);\n              }}\n            />\n          ))}\n        </PlatformList>\n        {platformList.length === 0 && (\n          <EmptyMessage\n            icon={<IconProject size=\"xl\" />}\n            title={t(\"We don't have an SDK for that yet!\")}\n          >\n            {tct(\n              `Not finding your platform? You can still create your project,\n              but looks like we don't have an official SDK for your platform\n              yet. However, there's a rich ecosystem of community supported\n              SDKs (including Perl, CFML, Clojure, and ActionScript). Try\n              [search:searching for Sentry clients] or contacting support.`,\n              {\n                search: (\n                  <ExternalLink href=\"https://github.com/search?q=-org%3Agetsentry+topic%3Asentry&type=Repositories\" />\n                ),\n              }\n            )}\n          </EmptyMessage>\n        )}\n      </React.Fragment>\n    );\n  }\n}\n\nconst NavContainer = styled('div')`\n  margin-bottom: ${space(2)};\n  display: grid;\n  grid-gap: ${space(2)};\n  grid-template-columns: 1fr minmax(0, 300px);\n  align-items: start;\n  border-bottom: 1px solid ${p => p.theme.border};\n`;\n\nconst SearchBar = styled('div')`\n  ${p => inputStyles(p)};\n  padding: 0 8px;\n  color: ${p => p.theme.subText};\n  display: flex;\n  align-items: center;\n  font-size: 15px;\n  margin-top: -${space(0.75)};\n\n  input {\n    border: none;\n    background: none;\n    padding: 2px 4px;\n    width: 100%;\n    /* Ensure a consistent line height to keep the input the desired height */\n    line-height: 24px;\n\n    &:focus {\n      outline: none;\n    }\n  }\n`;\n\nconst CategoryNav = styled(NavTabs)`\n  margin: 0;\n  margin-top: 4px;\n  white-space: nowrap;\n\n  > li {\n    float: none;\n    display: inline-block;\n  }\n`;\n\nconst StyledPlatformIcon = styled(PlatformIcon)`\n  margin: ${space(2)};\n`;\n\nconst ClearButton = styled(Button)`\n  position: absolute;\n  top: -6px;\n  right: -6px;\n  height: 22px;\n  width: 22px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  border-radius: 50%;\n  background: ${p => p.theme.background};\n  color: ${p => p.theme.textColor};\n`;\n\nClearButton.defaultProps = {\n  icon: <IconClose isCircled size=\"xs\" />,\n  borderless: true,\n  size: 'xsmall',\n};\n\nconst PlatformCard = styled(({platform, selected, onClear, ...props}) => (\n  <div {...props}>\n    <StyledPlatformIcon\n      platform={platform.id}\n      size={56}\n      radius={5}\n      withLanguageIcon\n      format=\"lg\"\n    />\n\n    <h3>{platform.name}</h3>\n    {selected && <ClearButton onClick={onClear} />}\n  </div>\n))`\n  position: relative;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  padding: 0 0 14px;\n  border-radius: 4px;\n  cursor: pointer;\n  background: ${p => p.selected && p.theme.alert.info.backgroundLight};\n\n  &:hover {\n    background: ${p => p.theme.alert.muted.backgroundLight};\n  }\n\n  h3 {\n    flex-grow: 1;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    width: 100%;\n    color: ${p => (p.selected ? p.theme.textColor : p.theme.subText)};\n    text-align: center;\n    font-size: ${p => p.theme.fontSizeExtraSmall};\n    text-transform: uppercase;\n    margin: 0;\n    padding: 0 ${space(0.5)};\n    line-height: 1.2;\n  }\n`;\n\nexport default PlatformPicker;\n"],"names":["ListLink","React","_classNames","className","activeClassName","this","props","isActive","classNames","to","query","index","router","queryData","qs","undefined","target","pathname","render","children","disabled","carriedProps","omit","StyledLi","getClassName","onlyActiveOnIndex","withRouter","shouldForwardProp","prop","p","theme","PLATFORM_CATEGORIES","categoryList","id","name","t","PlatformList","space","PlatformPicker","keydown","category","defaultCategory","filter","noAutoFilter","platform","split","debounce","state","trackAdvancedAnalyticsEvent","search","toLowerCase","num_results","platformList","length","source","organization","DEFAULT_DEBOUNCE_DURATION","currentCategory","filtered","platforms","includes","filterAliases","some","alias","sort","a","b","localeCompare","showOther","focusSearch","e","searchInput","current","focus","preventDefault","setPlatform","listProps","listClassName","NavContainer","CategoryNav","map","onClick","setState","SearchBar","size","type","ref","value","placeholder","onChange","logSearch","PlatformCard","selected","onClear","stopPropagation","platform_id","icon","title","tct","href","border","inputStyles","subText","NavTabs","StyledPlatformIcon","PlatformIcon","ClearButton","Button","background","textColor","defaultProps","isCircled","borderless","radius","withLanguageIcon","format","alert","info","backgroundLight","muted","fontSizeExtraSmall"],"sourceRoot":""}