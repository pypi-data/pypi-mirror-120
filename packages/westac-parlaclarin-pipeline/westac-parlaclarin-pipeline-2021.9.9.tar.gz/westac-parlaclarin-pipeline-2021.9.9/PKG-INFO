Metadata-Version: 2.1
Name: westac-parlaclarin-pipeline
Version: 2021.9.9
Summary: Pipeline that transforms Parla-Clarin XML files
Home-page: https://westac.se
License: Apache-2.0
Author: Roger MÃ¤hler
Author-email: roger.mahler@hotmail.com
Requires-Python: ==3.8.5
Classifier: License :: OSI Approved :: Apache Software License
Classifier: Operating System :: OS Independent
Classifier: Programming Language :: Python
Classifier: Programming Language :: Python :: 3
Classifier: Programming Language :: Python :: 3.8
Classifier: Topic :: Software Development
Requires-Dist: click (>=7.1.2,<8.0.0)
Requires-Dist: cookiecutter (>=1.7.2,<2.0.0)
Requires-Dist: dehyphen (>=0.3.4,<0.4.0)
Requires-Dist: loguru (>=0.5.3,<0.6.0)
Requires-Dist: pandas (>=1.2.3,<2.0.0)
Requires-Dist: pygit2 (>=1.5.0,<2.0.0)
Requires-Dist: pyriksprot (>=2021.9.5,<2022.0.0)
Requires-Dist: snakefmt (>=0.3.1,<0.4.0)
Requires-Dist: snakemake (>=6.0.5,<7.0.0)
Requires-Dist: stanza (>=1.2.3,<2.0.0)
Requires-Dist: transformers (>=4.3.3,<5.0.0)
Project-URL: Repository, https://github.com/welfare-state-analytics/westac_parlaclarin_pipeline
Description-Content-Type: text/markdown

# Parla-Clarin Workflow

This package implements Stanza part-of-speech annotation of ParlaClarin XML files.

## Prerequisites

- Git
- Python 3.8.5^
- GNU make
- Poetry

## Install

Clone this repository:

1. cd a-project-directory-of-your-choosing
1. git clone git@github.com:welfare-state-analytics/westac_parlaclarin_pipeline
1. cd westac_parlaclarin_pipeline

Or install python package:

1. poetry init --python 3.8.5
1. poetry install westac_parlaclarin_pipeline
1. poetry install westac_parlaclarin_pipeline

## Run annotation

Update repository:

```bash
make update-repository
make update-repository-timestamps
```

Update all (changed) annotations:

```bash
make annotate
```

Update a single year (and set cpu count):

```bash
make annotate YEAR=1960 CPU_COUNT=1
```

## Configuration


```yaml
work_folders: !work_folders &work_folders
  data_folder: /data/riksdagen_corpus_data

parla_clarin: !parla_clarin &parla_clarin
  repository_folder: /data/riksdagen_corpus_data/riksdagen-corpus
  repository_url: https://github.com/welfare-state-analytics/riksdagen-corpus.git
  repository_branch: dev
  folder: /data/riksdagen_corpus_data/riksdagen-corpus/corpus

extract_speeches: !extract_speeches &extract_speeches
  folder: /data/riksdagen_corpus_data/riksdagen-corpus-exports/speech_xml
  template: speeches.cdata.xml
  extension: xml

word_frequency: !word_frequency &word_frequency
  <<: *work_folders
  filename: riksdagen-corpus-term-frequencies.pkl

dehyphen: !dehyphen &dehyphen
  <<: *work_folders
  whitelist_filename: dehyphen_whitelist.txt.gz
  whitelist_log_filename: dehyphen_whitelist_log.pkl
  unresolved_filename: dehyphen_unresolved.txt.gz

config: !config
    work_folders: *work_folders
    parla_clarin: *parla_clarin
    extract_speeches: *extract_speeches
    word_frequency: *word_frequency
    dehyphen: *dehyphen
    annotated_folder: /data/riksdagen_corpus_data/annotated
```

