(function(e){function t(t){for(var n,i,s=t[0],c=t[1],u=t[2],d=0,l=[];d<s.length;d++)i=s[d],Object.prototype.hasOwnProperty.call(r,i)&&r[i]&&l.push(r[i][0]),r[i]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);m&&m(t);while(l.length)l.shift()();return o.push.apply(o,u||[]),a()}function a(){for(var e,t=0;t<o.length;t++){for(var a=o[t],n=!0,i=1;i<a.length;i++){var s=a[i];0!==r[s]&&(n=!1)}n&&(o.splice(t--,1),e=c(c.s=a[0]))}return e}var n={},i={app:0},r={app:0},o=[];function s(e){return c.p+"js/"+({about:"about",dashboard:"dashboard"}[e]||e)+"."+{"chunk-61956cc0":"6f0f5cdd","chunk-54242ce8":"450b5139","chunk-5ab8dcb7":"eed725cc","chunk-d51d7a3c":"b9c0cbcc",about:"5055aa93","chunk-203cebb6":"1ca2d0df","chunk-6b03006e":"bcf00be6","chunk-2d0e6101":"500776fc","chunk-6066148b":"115fa1a8","chunk-6fcc9aa8":"9c8d312e","chunk-7b7ddf9e":"6c086d9e","chunk-c5cc9678":"21427a10","chunk-7d25d247":"b4a2bccf","chunk-b5935372":"c8ed66a7","chunk-2d0a49cc":"92ea78bb",dashboard:"beea6f55"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var a=n[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,c),a.l=!0,a.exports}c.e=function(e){var t=[],a={"chunk-61956cc0":1,"chunk-54242ce8":1,about:1,"chunk-203cebb6":1,"chunk-6b03006e":1,"chunk-6066148b":1,"chunk-6fcc9aa8":1,"chunk-7b7ddf9e":1,"chunk-c5cc9678":1,"chunk-7d25d247":1,"chunk-b5935372":1,dashboard:1};i[e]?t.push(i[e]):0!==i[e]&&a[e]&&t.push(i[e]=new Promise((function(t,a){for(var n="css/"+({about:"about",dashboard:"dashboard"}[e]||e)+"."+{"chunk-61956cc0":"d253099c","chunk-54242ce8":"bae1661e","chunk-5ab8dcb7":"31d6cfe0","chunk-d51d7a3c":"31d6cfe0",about:"726b3234","chunk-203cebb6":"2cf2cbd9","chunk-6b03006e":"3dd34626","chunk-2d0e6101":"31d6cfe0","chunk-6066148b":"952cfd64","chunk-6fcc9aa8":"73b6884d","chunk-7b7ddf9e":"dfa478a9","chunk-c5cc9678":"3dd34626","chunk-7d25d247":"b86ec276","chunk-b5935372":"8fb910fa","chunk-2d0a49cc":"31d6cfe0",dashboard:"df9d9a7c"}[e]+".css",r=c.p+n,o=document.getElementsByTagName("link"),s=0;s<o.length;s++){var u=o[s],d=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(d===n||d===r))return t()}var l=document.getElementsByTagName("style");for(s=0;s<l.length;s++){u=l[s],d=u.getAttribute("data-href");if(d===n||d===r)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var n=t&&t.target&&t.target.src||r,o=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");o.code="CSS_CHUNK_LOAD_FAILED",o.request=n,delete i[e],m.parentNode.removeChild(m),a(o)},m.href=r;var f=document.getElementsByTagName("head")[0];f.appendChild(m)})).then((function(){i[e]=0})));var n=r[e];if(0!==n)if(n)t.push(n[2]);else{var o=new Promise((function(t,a){n=r[e]=[t,a]}));t.push(n[2]=o);var u,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=s(e);var l=new Error;u=function(t){d.onerror=d.onload=null,clearTimeout(m);var a=r[e];if(0!==a){if(a){var n=t&&("load"===t.type?"missing":t.type),i=t&&t.target&&t.target.src;l.message="Loading chunk "+e+" failed.\n("+n+": "+i+")",l.name="ChunkLoadError",l.type=n,l.request=i,a[1](l)}r[e]=void 0}};var m=setTimeout((function(){u({type:"timeout",target:d})}),12e4);d.onerror=d.onload=u,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,a){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(c.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(a,n,function(t){return e[t]}.bind(null,n));return a},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/new-admin/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],d=u.push.bind(u);u.push=t,u=u.slice();for(var l=0;l<u.length;l++)t(u[l]);var m=d;o.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"2f1f":function(e){e.exports=JSON.parse('{"en":{},"fr":{"(disabled)":"(désactivé)","Account":"Compte","Account created":"Compte créé","Account updated":"Compte mis à jour","Actions":"Actions","Add":"Ajouter","Address":"Adresse","Administration":"Administration","Administrators":"Administrateurs","Alias":"Alias","Alias created":"Alias créé","Aliases":"Alias","Apply":"Appliquer","Authentication":"Authentification","Auto configuration":"Configuration automatique","Close":"Fermer","Confirmation":"Confirmation","Create a domain administrator":"Créer un administrateur de domaine","Create a mailbox for the administrator.":"Créer une boite aux lettres pour l\'administrateur","Create aliases":"Créer des alias","Creation date":"Date de création","Dashboard":"Tableau de bord","Date":"Date","Day":"Jour","Default mailbox quota":"Quota par défaut pour une boîte aux lettres","Default quota applied to mailboxes. Can be expressed in KB, MB (default) or GB. A value of 0 means no quota.":"Quota par défaut appliqué aux boîtes aux lettres. Peut être exprimé en Ko, Mo (défaut) ou Go. Une valeur à 0 signifie pas de quota.","Description":"Description","Disabled":"Désactivés","DKIM key":"Clé DKIM","DNS":"DNS","DNS status":"Statut DNS","Domain":"Domaine","Domain administrator":"Administrateur de domaine","Domain created":"Domaine créé","Domains":"Domaines","Email address":"Adresse email","Enable DKIM signing":"Activer la signature DKIM","Enable DNS checks":"Activer les tests DNS","Enabled":"Activé","Expire at":"Expire le","Forgot password?":"Mot de passe oublié ?","From":"De","General":"Général","Generate a random password for the administrator.":"Générer un mot de passe aléatoire pour cet administrateur.","hostname of your automx server":"Nom d\'hôte de votre serveur automx","Identities":"Identités","IP address of your Modoboa server":"Adresse IP de votre serveur Modoboa","Last modification date":"Date de dernière modification","Level":"Niveau","Logger":"Logger","Logout":"Déconnexion","Logs":"Journaux","Mailbox":"Boîte aux lettres","Mailboxes":"Boites","Message":"Message","Message sending limit":"Limite d\'envoi des messages","Month":"Mois","Name":"Nom","New account":"Nouveau compte","New alias":"Nouvel alias","New domain":"Nouveau domaine","Next":"Suivant","No":"Non","Not generated":"Non générée","Options":"Options","Password":"Mot de passe","Queue ID":"ID de file","Quota":"Quota","Quota for this mailbox, can be expressed in KB, MB (default) or GB. Define a custom value or use domain\'s default one. Leave empty to define an unlimited value (not allowed for domain administrators).":"Quota pour cette boite. Peut être exprimé en Ko, Mo (défaut) ou Go. Définir une valeur spécifique ou utiliser la valeur par défaut du domaine. Laisser vide pour définir une valeur illimitée (interdit pour les admins. de domaine).","Quota shared between mailboxes. Can be expressed in KB, MB (default) or GB. A value of 0 means no quota.":"Quota partagé entre les boîtes aux lettres. Peut être exprimé en Ko, Mo (défaut) ou Go. Une valeur à 0 signifie pas de quota.","Random address":"Adresse aléatoire","Random password":"Mot de passe aléatoire","Recipients":"Destinataires","Remember me":"Se souvenir de moi","Reseller":"Revendeur","Role":"Rôle","Save":"Enregistrer","Search":"Chercher","Settings":"Configuration","Show key":"Afficher la clé","Simple user":"Utilisateur simple","Status":"Statut","Summary":"Résumé","Super administrator":"Super administrateur","Tags":"Tags","To":"A","Type":"Type","Unknown":"Inconnu","unlimited":"illimité","Update":"Mettre à jour","Updated":"Mis à jour","Use domain default value":"Utiliser la valeur par défaut du domaine","Username":"Nom d\'utilisateur","Week":"Semaine","Welcome to Modoboa":"Bienvenue dans Modoboa","With a mailbox":"Avec une boite aux lettres","Year":"Année","Yes":"Oui","This field is required":"Ce champ est requis"}}')},"2fd4":function(e,t,a){},"321a":function(e,t,a){"use strict";a("2fd4")},3365:function(e,t,a){"use strict";a("64da")},"3ffe":function(e,t,a){"use strict";a("d3b7"),a("8a79");var n=a("bc3a"),i=a.n(n),r=a("a78e"),o=a.n(r),s=a("a18c"),c=a("4360"),u=i.a.create();u.interceptors.request.use((function(e){return c["a"].state.auth.isAuthenticated&&(e.headers["Accept-Language"]=c["a"].state.auth.authUser.language),e}),(function(e){return Promise.reject(e)})),u.interceptors.response.use((function(e){return e}),(function(e){if(418===e.response.status)return s["a"].push({name:"TwoFA"}),Promise.reject(e);if(401!==e.response.status||"/login/"===s["a"].currentRoute.path)return Promise.reject(e);var t=o.a.get("refreshToken");return e.config.url.endsWith("/token/refresh/")||!t?(c["a"].dispatch("auth/logout"),s["a"].push({name:"Login"}),Promise.reject(e)):u.post("/token/refresh/",{refresh:t}).then((function(t){o.a.set("token",t.data.access,{sameSite:"strict"}),u.defaults.headers.common.Authorization="Bearer ".concat(t.data.access);var a=e.config;return a.headers.Authorization="Bearer ".concat(t.data.access),new Promise((function(e,t){u.request(a).then((function(t){e(t)})).catch((function(e){t(e)}))}))})).catch((function(e){Promise.reject(e)}))})),t["a"]=u},4360:function(e,t,a){"use strict";var n=a("2b0e"),i=a("2f62"),r=(a("d3b7"),a("a78e")),o=a.n(r),s=a("3ffe"),c=a("5723");function u(e){s["a"].defaults.headers.common.Authorization="Bearer ".concat(e),s["a"].defaults.headers.post["Content-Type"]="application/json"}function d(e){return c["a"].getMe().then((function(t){e("SET_AUTH_USER",{authUser:t.data,isAuthenticated:!0})}))}var l,m=function(){return{authUser:{},isAuthenticated:!1}},f={isAuthenticated:function(e){return e.isAuthenticated},authUser:function(e){return e.authUser}},h={SET_AUTH_USER:function(e,t){var a=t.authUser,i=t.isAuthenticated;e.authUser=a,e.isAuthenticated=i,n["a"].config.language=a.language},LOGOUT_USER:function(e){e.authUser=null,e.isAuthenticated=!1}},p={initialize:function(e){var t=e.commit,a=e.state;if(!a.isAuthenticated){var n=o.a.get("token");if(n)return u(n),d(t)}},logout:function(e){var t=e.commit;return new Promise((function(e,a){delete s["a"].defaults.headers.common.Authorization,o.a.remove("token"),o.a.remove("refreshToken"),t("LOGOUT_USER"),e()}))}},b={namespaced:!0,state:m,getters:f,mutations:h,actions:p},v=a("ade3"),g=a("b85c"),A=(a("4de4"),a("458e")),k="SET_DOMAINS",x="ADD_DOMAIN",_="UPDATE_DOMAIN",D="DELETE_DOMAIN",y={domainsLoaded:!1,domains:[]},S={domains:function(e){return e.domains},getDomainByPk:function(e){return function(t){var a,n=Object(g["a"])(e.domains);try{for(n.s();!(a=n.n()).done;){var i=a.value;if(i.pk===parseInt(t,10))return i}}catch(r){n.e(r)}finally{n.f()}return null}}},w={getDomains:function(e){var t=e.commit;return A["a"].getDomains().then((function(e){t(k,{domains:e.data})}))},createDomain:function(e,t){var a=e.commit;return new Promise((function(e,n){A["a"].createDomain(t).then((function(t){a(x,{domain:t.data}),e(t)})).catch((function(e){n(e)}))}))},updateDomain:function(e,t){var a=e.commit;return A["a"].updateDomain(t.pk,t).then((function(e){a(_,{domain:e.data})}))},deleteDomain:function(e,t){var a=e.commit,n=t.id,i=t.data;return A["a"].deleteDomain(n,i).then((function(e){a(D,n)}))}},E=(l={},Object(v["a"])(l,k,(function(e,t){var a=t.domains;e.domainsLoaded=!0,e.domains=a})),Object(v["a"])(l,x,(function(e,t){var a=t.domain;e.domains.push(a)})),Object(v["a"])(l,_,(function(e,t){var a=t.domain;e.domains.filter((function(t,i){t.pk===a.pk&&n["a"].set(e.domains,i,a)}))})),Object(v["a"])(l,D,(function(e,t){e.domains=e.domains.filter((function(e){return e.pk!==t}))})),l),T={namespaced:!0,state:y,getters:S,actions:w,mutations:E},M=(a("7db0"),a("b0c0"),{domains:[]}),P={domains:function(e){return e.domains},getDomainByName:function(e){return function(t){return e.domains.find((function(e){return e.name===t}))}}},O={SET_DOMAINS:function(e,t){e.domains=t}},C={fetchDomains:function(e){var t=e.commit;A["a"].getDomains().then((function(e){t("SET_DOMAINS",e.data)}))}},U={namespaced:!0,state:M,getters:P,actions:C,mutations:O};n["a"].use(i["a"]);t["a"]=new i["a"].Store({modules:{auth:b,domains:T,identities:U},strict:!1})},"458e":function(e,t,a){"use strict";var n=a("3ffe"),i="domains",r="domainaliases";t["a"]={getDomains:function(){return n["a"].get("/".concat(i,"/"))},getDomain:function(e){return n["a"].get("/".concat(i,"/").concat(e,"/"))},getDomainDNSDetail:function(e){return n["a"].get("/".concat(i,"/").concat(e,"/dns_detail/"))},getDomainAliases:function(e){var t="/".concat(r,"/");return void 0!==e&&(t+="?domain=".concat(e)),n["a"].get(t)},getDomainAdministrators:function(e){return n["a"].get("/".concat(i,"/").concat(e,"/administrators/"))},addDomainAdministrator:function(e,t){return n["a"].post("/".concat(i,"/").concat(e,"/administrators/add/"),{account:t})},removeDomainAdministrator:function(e,t){return n["a"].post("/".concat(i,"/").concat(e,"/administrators/remove/"),{account:t})},createDomain:function(e){return n["a"].post("/".concat(i,"/"),e)},updateDomain:function(e,t){return n["a"].put("/".concat(i,"/").concat(e,"/"),t)},deleteDomain:function(e,t){return n["a"].post("/".concat(i,"/").concat(e,"/delete/"),t)},createDomainAlias:function(e){return n["a"].post("/".concat(r,"/"),e)},updateDomainAlias:function(e,t){return n["a"].put("/".concat(r,"/").concat(e,"/"),t)},deleteDomainAlias:function(e){return n["a"].delete("/".concat(r,"/").concat(e,"/"))}}},"56d7":function(e,t,a){"use strict";a.r(t),a.d(t,"bus",(function(){return X}));a("e260"),a("e6cf"),a("cca6"),a("a79d"),a("d3b7");var n=a("2b0e"),i=a("5530"),r=a("7bb1"),o=a("4c93"),s=a("5035"),c=a.n(s),u=s["translate"].gettext;Object(r["c"])("numeric",Object(i["a"])(Object(i["a"])({},o["a"]),{},{message:function(){return u("This field must be a valid number")}})),Object(r["c"])("required",Object(i["a"])(Object(i["a"])({},o["b"]),{},{message:function(){return u("This field is required")}})),n["a"].component("ValidationObserver",r["a"]),n["a"].component("ValidationProvider",r["b"]);var d=a("00e7"),l=a.n(d);n["a"].use(l.a);a("4de4"),a("25f0");var m=a("2f1f");n["a"].use(c.a,{availableLanguages:{en:"English",fr:"Français"},translations:m}),n["a"].filter("translate",(function(e){return e?n["a"].prototype.$gettext(e.toString()):""}));a("fb6a");var f=a("1315"),h=s["translate"].gettext;n["a"].filter("yesno",(function(e){return h(e?"yes":"no")})),n["a"].filter("date",(function(e){return f["DateTime"].fromISO(e).setLocale("en").toLocaleString(f["DateTime"].DATETIME_MED)})),n["a"].filter("truncate",(function(e,t,a){return a=a||"...",e.length>t?e.slice(0,t)+a:e}));var p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isAuthenticated?a("v-app",[a("navbar"),a("v-main",[a("v-container",{attrs:{fluid:""}},[a("router-view")],1)],1),a("v-snackbar",{attrs:{color:e.notificationColor,timeout:e.notificationTimeout,top:""},scopedSlots:e._u([{key:"action",fn:function(t){var n=t.attrs;return[a("v-btn",e._b({attrs:{color:"white",text:""},on:{click:function(t){e.snackbar=!1}}},"v-btn",n,!1),[a("translate",[e._v("Close")])],1)]}}]),model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v(" "+e._s(e.notification)+" ")])],1):a("v-app",[a("v-main",[a("router-view")],1)],1)},b=[],v=a("2f62"),g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{"mini-variant":e.mini,permanent:"",color:"primary",app:"",dark:""},on:{"update:miniVariant":function(t){e.mini=t},"update:mini-variant":function(t){e.mini=t}},scopedSlots:e._u([{key:"append",fn:function(){return[n("v-menu",{attrs:{rounded:"lg","offset-y":"",top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var a=t.attrs,i=t.on;return[n("div",e._g(e._b({staticClass:"d-flex user-box justify-center align-center white--text py-2"},"div",a,!1),i),[n("v-avatar",{attrs:{size:"40",color:"primary"}},[n("span",{staticClass:"white--text headline"},[e._v(e._s(e.userInitials))])]),e.mini?e._e():[n("span",{staticClass:"mx-2"},[e._v(e._s(e.displayName))]),n("v-icon",{staticClass:"float-right"},[e._v("mdi-chevron-up")])]],2)]}}])},[n("v-list",e._l(e.userMenuItems,(function(t){return n("v-list-item",{key:t.text,attrs:{link:""},on:{click:t.click}},[t.icon?n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1):e._e(),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.text))])],1)],1)})),1)],1)]},proxy:!0}]),model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("div",{staticClass:"d-flex align-center"},[n("v-img",{attrs:{src:a("b0c8"),"max-width":"190"}}),n("v-btn",{attrs:{icon:""},on:{click:function(t){t.stopPropagation(),e.mini=!e.mini}}},[n("v-icon",[e._v("mdi-chevron-left")])],1)],1),n("v-list",[e._l(e.mainMenuItems,(function(t){return[void 0===t.roles||-1!==t.roles.indexOf(e.authUser.role)?[t.children?n("v-list-group",{key:t.text,attrs:{color:"white","prepend-icon":t.icon,"no-action":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-title",[e._v(e._s(t.text))])]},proxy:!0}],null,!0)},[e._l(t.children,(function(t){return[t.children?n("v-list-group",{key:t.text,attrs:{value:!0,"no-action":"","sub-group":""},scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-title",[e._v(e._s(t.text))])]},proxy:!0}],null,!0)},e._l(t.children,(function(t){return n("v-list-item",{key:t.text,attrs:{to:t.to,link:""}},[n("v-list-item-title",[e._v(e._s(t.text))])],1)})),1):n("v-list-item",{key:t.text,attrs:{to:t.to,link:""}},[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.text))])],1)],1)]}))],2):n("v-list-item",{key:t.title,staticClass:"menu-item",attrs:{to:t.to,link:"",exact:t.exact}},[t.icon?n("v-list-item-icon",[n("v-icon",[e._v(e._s(t.icon))])],1):e._e(),n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(t.text))])],1)],1)]:e._e()]}))],2)],1)},A=[],k=(a("99af"),a("159b"),a("b0c0"),a("6464")),x={computed:Object(i["a"])(Object(i["a"])({},Object(v["b"])({authUser:"auth/authUser"})),{},{userInitials:function(){var e=null;return this.authUser.first_name&&(e=this.authUser.first_name[0]),this.authUser.last_name&&(e=e?e+this.authUser.last_name[0]:this.authUser.last_name[0]),e||(e=this.authUser.username[0]),e},displayName:function(){return this.authUser.first_name||this.authUser.last_name?"".concat(this.authUser.first_name," ").concat(this.authUser.last_name):this.authUser.username}}),data:function(){return{drawer:!0,mainMenuItems:[{text:this.$gettext("Dashboard"),to:{name:"Dashboard"},icon:"mdi-view-dashboard-outline",exact:!0},{text:this.$gettext("Domains"),to:{name:"DomainList"},icon:"mdi-domain",roles:["DomainAdmins","Resellers","SuperAdmins"]},{text:this.$gettext("Identities"),to:{name:"Identities"},icon:"mdi-account",roles:["DomainAdmins","Resellers","SuperAdmins"]},{icon:"mdi-history",text:this.$gettext("Logs"),roles:["SuperAdmins","Resellers","DomainAdmins"],children:[{text:this.$gettext("Audit trail"),to:{name:"AuditTrail"},roles:["SuperAdmins"]},{text:this.$gettext("Messages"),to:{name:"MessageLog"},roles:["DomainAdmins","Resellers","SuperAdmins"]}]},{icon:"mdi-cog",text:this.$gettext("Settings"),children:[],roles:["SuperAdmins"]}],mini:!1,userMenuItems:[{text:this.$gettext("Logout"),icon:"mdi-logout",click:this.logout}]}},created:function(){var e=this;k["a"].getApplications().then((function(t){t.data.forEach((function(t){e.mainMenuItems[4].children.push({text:t.label,to:{name:"ParametersEdit",params:{app:t.name}}})}))}))},methods:{logout:function(){var e=this;this.$store.dispatch("auth/logout").then((function(){e.$router.push({name:"Login"})}))}}},_=x,D=(a("3365"),a("2877")),y=a("6544"),S=a.n(y),w=a("8212"),E=a("8336"),T=a("132d"),M=a("adda"),P=a("8860"),O=a("56b0"),C=a("da13"),U=a("5d23"),j=a("34c3"),L=a("e449"),I=a("f774"),N=Object(D["a"])(_,g,A,!1,null,"062a21c5",null),R=N.exports;S()(N,{VAvatar:w["a"],VBtn:E["a"],VIcon:T["a"],VImg:M["a"],VList:P["a"],VListGroup:O["a"],VListItem:C["a"],VListItemContent:U["a"],VListItemIcon:j["a"],VListItemTitle:U["b"],VMenu:L["a"],VNavigationDrawer:I["a"]});var V={name:"App",computed:Object(i["a"])({},Object(v["b"])({isAuthenticated:"auth/isAuthenticated"})),components:{Navbar:R},created:function(){X.$on("notification",this.showNotification)},data:function(){return{snackbar:!1,notification:"",notificationColor:"success",notificationTimeout:2e3}},methods:{showNotification:function(e){this.notification=e.msg,this.notificationColor=e.type?e.type:"success",this.snackbar=!0}}},B=V,$=(a("df33"),a("7496")),q=a("a523"),F=a("f6c4"),G=a("2db4"),K=Object(D["a"])(B,p,b,!1,null,"345ee5e5",null),Q=K.exports;S()(K,{VApp:$["a"],VBtn:E["a"],VContainer:q["a"],VMain:F["a"],VSnackbar:G["a"]});var z=a("a18c"),J=a("4360"),W=(a("5363"),a("f309"));n["a"].use(W["a"]);var H=new W["a"]({theme:{options:{customProperties:!0},themes:{light:{primary:"#046BF8",secondary:"#F18429",label:"#616161"}}}}),Y=(a("b7e3"),a("3ffe"));n["a"].config.productionTip=!1;var X=new n["a"];fetch("/new-admin/config.json").then((function(e){e.json().then((function(e){if(!e.API_BASE_URL)throw Error("API_BASE_URL is not defined in config.json");Y["a"].defaults.baseURL=e.API_BASE_URL,n["a"].prototype.$config=e,new n["a"]({router:z["a"],store:J["a"],vuetify:H,render:function(e){return e(Q)}}).$mount("#app")}))}))},5723:function(e,t,a){"use strict";var n=a("3ffe"),i="account";t["a"]={getMe:function(){return n["a"].get("/".concat(i,"/me/"))},verifyTFACode:function(e){var t={code:e};return n["a"].post("".concat(i,"/tfa/verify/"),t)}}},6464:function(e,t,a){"use strict";var n=a("3ffe"),i="parameters";t["a"]={getApplications:function(){return n["a"].get("/".concat(i,"/applications/"))},getApplication:function(e){return n["a"].get("/".concat(i,"/").concat(e,"/"))},getApplicationStructure:function(e){return n["a"].get("/".concat(i,"/structure/?app=").concat(e))},saveApplication:function(e,t){return n["a"].put("/".concat(i,"/").concat(e,"/"),t)}}},"64da":function(e,t,a){},"8d46":function(e,t,a){},a18c:function(e,t,a){"use strict";a("d3b7"),a("3ca3"),a("ddb0");var n=a("2b0e"),i=a("8c4f"),r=a("4360"),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("v-toolbar",{attrs:{flat:""}},[a("v-toolbar-title",[e._v(e._s(e.title))])],1),a("v-tabs",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[e._l(e.displayableElements,(function(t,n){return a("v-tab",{key:n},[e._v(" "+e._s(t.label)+" ")])})),a("v-tabs-items",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},e._l(e.displayableElements,(function(t,n){return a("v-tab-item",{key:n},[a("v-card",[a("v-card-text",[e._l(e.displayableParams(t.parameters),(function(t,n){return[a("div",{key:n,staticClass:"my-4"},["SeparatorField"===t.widget?[a("h2",[e._v(e._s(t.label))])]:"BooleanField"===t.widget?["BooleanField"===t.widget?a("v-switch",{attrs:{label:t.label,hint:t.help_text,"persistent-hint":""},model:{value:e.parameters[t.name],callback:function(a){e.$set(e.parameters,t.name,a)},expression:"parameters[param.name]"}}):e._e()]:[a("label",{staticClass:"m-label"},[e._v(e._s(t.label))]),"ChoiceField"===t.widget?a("v-select",{attrs:{items:t.choices,hint:t.help_text,"persistent-hint":"",dense:"",outlined:""},model:{value:e.parameters[t.name],callback:function(a){e.$set(e.parameters,t.name,a)},expression:"parameters[param.name]"}}):a("v-text-field",{attrs:{hint:t.help_text,"persistent-hint":"",error:void 0!==e.formErrors[t.name],"error-messages":e.formErrors[t.name],type:"PasswordField"===t.widget?"password":"text",dense:"",outlined:""},model:{value:e.parameters[t.name],callback:function(a){e.$set(e.parameters,t.name,a)},expression:"parameters[param.name]"}})]],2)]}))],2)],1)],1)})),1)],2),a("v-btn",{attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"green"},on:{click:e.save}},[a("v-icon",[e._v("mdi-content-save")])],1)],1)},s=[],c=a("3835"),u=(a("4de4"),a("159b"),a("ac1f"),a("1276"),a("56d7")),d=a("6464"),l={data:function(){return{active:0,structure:[],parameters:{},formErrors:{}}},computed:{displayableElements:function(){var e=this,t=this.structure.filter((function(t){return e.display(t)}));return t},title:function(){var e=this.$gettext("Settings: ");return"core"===this.$route.params.app?e+=this.$gettext("General"):"admin"===this.$route.params.app?e+=this.$gettext("Administration"):"limits"===this.$route.params.app&&(e+=this.$gettext("Limitations")),e}},created:function(){this.loadParams(this.$route.params.app)},watch:{$route:function(e,t){this.loadParams(e.params.app)}},methods:{loadParams:function(e){var t=this;d["a"].getApplicationStructure(e).then((function(e){t.structure=e.data})),d["a"].getApplication(e).then((function(e){t.parameters=e.data}))},display:function(e){var t=this;if(""===e.display)return!0;var a=!0;return e.display.split("&").forEach((function(e){var n=e.split("="),i=Object(c["a"])(n,2),r=i[0],o=i[1];"true"!==o&&"false"!==o||(o=Boolean(o)),a&=t.parameters[r]===o})),a},displayableParams:function(e){var t=this;return e.filter((function(e){return t.display(e)}))},save:function(){var e=this;d["a"].saveApplication(this.$route.params.app,this.parameters).then((function(){u["bus"].$emit("notification",{msg:e.$gettext("Parameters updated")})})).catch((function(t){e.formErrors=t.response.data}))}}},m=l,f=(a("321a"),a("2877")),h=a("6544"),p=a.n(h),b=a("8336"),v=a("b0af"),g=a("99d9"),A=a("132d"),k=a("b974"),x=a("b73d"),_=a("71a3"),D=a("c671"),y=a("fe57"),S=a("aac8"),w=a("8654"),E=a("71d9"),T=a("2a7f"),M=Object(f["a"])(m,o,s,!1,null,"02e474f1",null),P=M.exports;p()(M,{VBtn:b["a"],VCard:v["a"],VCardText:g["b"],VIcon:A["a"],VSelect:k["a"],VSwitch:x["a"],VTab:_["a"],VTabItem:D["a"],VTabs:y["a"],VTabsItems:S["a"],VTextField:w["a"],VToolbar:E["a"],VToolbarTitle:T["a"]}),n["a"].use(i["a"]);var O=[{path:"/",name:"Dashboard",component:function(){return a.e("dashboard").then(a.bind(null,"7277"))},meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("about")]).then(a.bind(null,"a55b"))}},{path:"/twofa",name:"TwoFA",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-2d0e6101")]).then(a.bind(null,"96c1"))}},{path:"/domains",name:"DomainList",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-61956cc0"),a.e("chunk-6066148b"),a.e("chunk-7b7ddf9e")]).then(a.bind(null,"1594"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","Resellers","SuperAdmins"]}},{path:"/domains/:id",name:"DomainDetail",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-61956cc0"),a.e("chunk-c5cc9678"),a.e("chunk-7d25d247")]).then(a.bind(null,"5ad9"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","Resellers","SuperAdmins"]}},{path:"/domains/:id/edit",name:"DomainEdit",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-c5cc9678"),a.e("chunk-2d0a49cc")]).then(a.bind(null,"06d4"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","Resellers","SuperAdmins"]}},{path:"/identities",name:"Identities",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-61956cc0"),a.e("chunk-6066148b"),a.e("chunk-203cebb6"),a.e("chunk-6fcc9aa8")]).then(a.bind(null,"f602"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","Resellers","SuperAdmins"]}},{path:"/identities/accounts/:id/edit",name:"AccountEdit",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-203cebb6"),a.e("chunk-6b03006e")]).then(a.bind(null,"d368"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","Resellers","SuperAdmins"]}},{path:"/identities/aliases/:id/edit",name:"AliasEdit",component:function(){return Promise.all([a.e("chunk-d51d7a3c"),a.e("chunk-b5935372")]).then(a.bind(null,"e61c"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","Resellers","SuperAdmins"]}},{path:"/parameters/:app",name:"ParametersEdit",component:P,meta:{requiresAuth:!0,allowedRoles:["SuperAdmins"]}},{path:"/logs/audit_trail",name:"AuditTrail",component:function(){return Promise.all([a.e("chunk-61956cc0"),a.e("chunk-54242ce8")]).then(a.bind(null,"033e"))},meta:{requiresAuth:!0,allowedRoles:["SuperAdmins"]}},{path:"/logs/messages",name:"MessageLog",component:function(){return Promise.all([a.e("chunk-61956cc0"),a.e("chunk-5ab8dcb7")]).then(a.bind(null,"4a00"))},meta:{requiresAuth:!0,allowedRoles:["DomainAdmins","SuperAdmins"]}}],C=new i["a"]({mode:"history",base:"/new-admin/",routes:O});C.beforeEach((function(e,t,a){e.matched.some((function(e){return e.meta.requiresAuth}))?r["a"].dispatch("auth/initialize").then((function(){if(r["a"].getters["auth/isAuthenticated"]){if(void 0!==e.meta.allowedRoles&&-1===e.meta.allowedRoles.indexOf(r["a"].getters["auth/authUser"].role))return void a({name:"Dashboard"});a()}else a({name:"Login"})})):a()}));t["a"]=C},b0c8:function(e,t,a){e.exports=a.p+"img/Modoboa_RVB-BLANC-SANS.76cc66d6.png"},b7e3:function(e,t,a){},df33:function(e,t,a){"use strict";a("8d46")}});
//# sourceMappingURL=app.d7ef43c3.js.map